function t(t,e=!1,r=!0){let n="";n=(t=>{const e=[];for(let r=0;r<t.length;r+=32768)e.push(String.fromCharCode.apply(null,t.subarray(r,r+32768)));return btoa(e.join(""))})("string"==typeof t?(new TextEncoder).encode(t):new Uint8Array(t));return e&&(n=function(t){return t.replace(/\+/g,"-").replace(/\//g,"_")}(n)),r||(n=n.replace(/=/g,"")),n}function e(t,e=!1){{let r=!1;if(/^[0-9a-zA-Z_-]+={0,2}$/.test(t))r=!0;else if(!/^[0-9a-zA-Z+/]*={0,2}$/.test(t))throw new Error("Not a valid base64 input");r&&(t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/=/g,""));const n=new Uint8Array(atob(t).split("").map((t=>t.charCodeAt(0))));return e?(new TextDecoder).decode(n):n}}function r(t){{let e="";const r="0123456789abcdef";return(t=ArrayBuffer.isView(t)?new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)):new Uint8Array(t)).forEach((t=>{e+=r[t>>4]+r[15&t]})),e}}function n(t,e=!1){if(void 0===t)throw RangeError("hexStr cannot undefined");const r=t.match(/^(0x)?([\da-fA-F]+)$/);if(null==r)throw RangeError("hexStr must be a hexadecimal string, e.g. '0x124fe3a' or '0214f1b2'");let n=r[2];return n=n.length%2==0?n:"0"+n,Uint8Array.from(n.match(/[\da-fA-F]{2}/g).map((t=>parseInt(t,16)))).buffer}function i(t,e=!1){if(t<1)throw new RangeError("byteLength MUST be > 0");return new Promise((function(r,n){{const n=new Uint8Array(t);self.crypto.getRandomValues(n),e&&(n[0]=128|n[0]),r(n)}}))}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s={},a="6.5.4",h={},u={exports:{}};!function(t,e){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function i(t,e,r){if(i.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var o;"object"==typeof t?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:require("buffer").Buffer}catch(t){}function s(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function a(t,e,r){var n=s(t,r);return r-1>=e&&(n|=s(t,r-1)<<4),n}function h(t,e,r,n){for(var i=0,o=Math.min(t.length,r),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}i.isBN=function(t){return t instanceof i||null!==t&&"object"==typeof t&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)},i.max=function(t,e){return t.cmp(e)>0?t:e},i.min=function(t,e){return t.cmp(e)<0?t:e},i.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,n):(this._parseBase(t,e,i),"le"===n&&this._initArray(this.toArray(),e,n)))},i.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},i.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},i.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=t.length-1;n>=e;n-=2)i=a(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)i=a(t,e,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},i.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,s=o%n,a=Math.min(o,o-s)+r,u=0,c=r;c<a;c+=n)u=h(t,c,c+n,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var f=1;for(u=h(t,c,t.length,e),c=0;c<s;c++)f*=e;this.imuln(f),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},i.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},i.prototype.clone=function(){var t=new i(null);return this.copy(t),t},i.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function l(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,h=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var c=h>>>26,f=67108863&h,l=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=l;d++){var p=u-d|0;c+=(s=(i=0|t.words[p])*(o=0|e.words[d])+f)/67108864|0,f=67108863&s}r.words[u]=0|f,h=0|c}return 0!==h?r.words[u]=0|h:r.length--,r.strip()}i.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],h=(16777215&(a<<i|o)).toString(16);n=0!=(o=a>>>24-i&16777215)||s!==this.length-1?u[6-h.length]+h+n:h+n,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var l=c[t],d=f[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(t);n=(p=p.idivn(d)).isZero()?m+n:u[l-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(t,e){return r(void 0!==o),this.toArrayLike(o,t,e)},i.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},i.prototype.toArrayLike=function(t,e,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,h="le"===e,u=new t(o),c=this.clone();if(h){for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-i;a++)u[a]=0;for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),u[o-a-1]=s}return u},Math.clz32?i.prototype._countBits=function(t){return 32-Math.clz32(t)}:i.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},i.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},i.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},i.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},i.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},i.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},i.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},i.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},i.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},i.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},i.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},i.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},i.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},i.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},i.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},i.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},i.prototype.notn=function(t){return this.clone().inotn(t)},i.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},i.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},i.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,s=0;s<n.length;s++)o=(e=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<r.length;s++)o=(e=(0|r.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,r){var n,i,o,s=t.words,a=e.words,h=r.words,u=0,c=0|s[0],f=8191&c,l=c>>>13,d=0|s[1],p=8191&d,m=d>>>13,g=0|s[2],y=8191&g,v=g>>>13,w=0|s[3],b=8191&w,E=w>>>13,A=0|s[4],S=8191&A,_=A>>>13,k=0|s[5],P=8191&k,x=k>>>13,M=0|s[6],I=8191&M,R=M>>>13,N=0|s[7],C=8191&N,T=N>>>13,O=0|s[8],B=8191&O,F=O>>>13,D=0|s[9],U=8191&D,L=D>>>13,H=0|a[0],z=8191&H,j=H>>>13,K=0|a[1],W=8191&K,J=K>>>13,q=0|a[2],G=8191&q,V=q>>>13,$=0|a[3],X=8191&$,Z=$>>>13,Y=0|a[4],Q=8191&Y,tt=Y>>>13,et=0|a[5],rt=8191&et,nt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ht=8191&at,ut=at>>>13,ct=0|a[8],ft=8191&ct,lt=ct>>>13,dt=0|a[9],pt=8191&dt,mt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var gt=(u+(n=Math.imul(f,z))|0)+((8191&(i=(i=Math.imul(f,j))+Math.imul(l,z)|0))<<13)|0;u=((o=Math.imul(l,j))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,n=Math.imul(p,z),i=(i=Math.imul(p,j))+Math.imul(m,z)|0,o=Math.imul(m,j);var yt=(u+(n=n+Math.imul(f,W)|0)|0)+((8191&(i=(i=i+Math.imul(f,J)|0)+Math.imul(l,W)|0))<<13)|0;u=((o=o+Math.imul(l,J)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(y,z),i=(i=Math.imul(y,j))+Math.imul(v,z)|0,o=Math.imul(v,j),n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,J)|0;var vt=(u+(n=n+Math.imul(f,G)|0)|0)+((8191&(i=(i=i+Math.imul(f,V)|0)+Math.imul(l,G)|0))<<13)|0;u=((o=o+Math.imul(l,V)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(b,z),i=(i=Math.imul(b,j))+Math.imul(E,z)|0,o=Math.imul(E,j),n=n+Math.imul(y,W)|0,i=(i=i+Math.imul(y,J)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,J)|0,n=n+Math.imul(p,G)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,V)|0;var wt=(u+(n=n+Math.imul(f,X)|0)|0)+((8191&(i=(i=i+Math.imul(f,Z)|0)+Math.imul(l,X)|0))<<13)|0;u=((o=o+Math.imul(l,Z)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(S,z),i=(i=Math.imul(S,j))+Math.imul(_,z)|0,o=Math.imul(_,j),n=n+Math.imul(b,W)|0,i=(i=i+Math.imul(b,J)|0)+Math.imul(E,W)|0,o=o+Math.imul(E,J)|0,n=n+Math.imul(y,G)|0,i=(i=i+Math.imul(y,V)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,V)|0,n=n+Math.imul(p,X)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,Z)|0;var bt=(u+(n=n+Math.imul(f,Q)|0)|0)+((8191&(i=(i=i+Math.imul(f,tt)|0)+Math.imul(l,Q)|0))<<13)|0;u=((o=o+Math.imul(l,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(P,z),i=(i=Math.imul(P,j))+Math.imul(x,z)|0,o=Math.imul(x,j),n=n+Math.imul(S,W)|0,i=(i=i+Math.imul(S,J)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,J)|0,n=n+Math.imul(b,G)|0,i=(i=i+Math.imul(b,V)|0)+Math.imul(E,G)|0,o=o+Math.imul(E,V)|0,n=n+Math.imul(y,X)|0,i=(i=i+Math.imul(y,Z)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,Z)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0;var Et=(u+(n=n+Math.imul(f,rt)|0)|0)+((8191&(i=(i=i+Math.imul(f,nt)|0)+Math.imul(l,rt)|0))<<13)|0;u=((o=o+Math.imul(l,nt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(I,z),i=(i=Math.imul(I,j))+Math.imul(R,z)|0,o=Math.imul(R,j),n=n+Math.imul(P,W)|0,i=(i=i+Math.imul(P,J)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,J)|0,n=n+Math.imul(S,G)|0,i=(i=i+Math.imul(S,V)|0)+Math.imul(_,G)|0,o=o+Math.imul(_,V)|0,n=n+Math.imul(b,X)|0,i=(i=i+Math.imul(b,Z)|0)+Math.imul(E,X)|0,o=o+Math.imul(E,Z)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(m,rt)|0,o=o+Math.imul(m,nt)|0;var At=(u+(n=n+Math.imul(f,ot)|0)|0)+((8191&(i=(i=i+Math.imul(f,st)|0)+Math.imul(l,ot)|0))<<13)|0;u=((o=o+Math.imul(l,st)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(C,z),i=(i=Math.imul(C,j))+Math.imul(T,z)|0,o=Math.imul(T,j),n=n+Math.imul(I,W)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,J)|0,n=n+Math.imul(P,G)|0,i=(i=i+Math.imul(P,V)|0)+Math.imul(x,G)|0,o=o+Math.imul(x,V)|0,n=n+Math.imul(S,X)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(_,X)|0,o=o+Math.imul(_,Z)|0,n=n+Math.imul(b,Q)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,n=n+Math.imul(y,rt)|0,i=(i=i+Math.imul(y,nt)|0)+Math.imul(v,rt)|0,o=o+Math.imul(v,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,st)|0;var St=(u+(n=n+Math.imul(f,ht)|0)|0)+((8191&(i=(i=i+Math.imul(f,ut)|0)+Math.imul(l,ht)|0))<<13)|0;u=((o=o+Math.imul(l,ut)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(B,z),i=(i=Math.imul(B,j))+Math.imul(F,z)|0,o=Math.imul(F,j),n=n+Math.imul(C,W)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(T,W)|0,o=o+Math.imul(T,J)|0,n=n+Math.imul(I,G)|0,i=(i=i+Math.imul(I,V)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,V)|0,n=n+Math.imul(P,X)|0,i=(i=i+Math.imul(P,Z)|0)+Math.imul(x,X)|0,o=o+Math.imul(x,Z)|0,n=n+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(b,rt)|0,i=(i=i+Math.imul(b,nt)|0)+Math.imul(E,rt)|0,o=o+Math.imul(E,nt)|0,n=n+Math.imul(y,ot)|0,i=(i=i+Math.imul(y,st)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,st)|0,n=n+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ut)|0;var _t=(u+(n=n+Math.imul(f,ft)|0)|0)+((8191&(i=(i=i+Math.imul(f,lt)|0)+Math.imul(l,ft)|0))<<13)|0;u=((o=o+Math.imul(l,lt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(U,z),i=(i=Math.imul(U,j))+Math.imul(L,z)|0,o=Math.imul(L,j),n=n+Math.imul(B,W)|0,i=(i=i+Math.imul(B,J)|0)+Math.imul(F,W)|0,o=o+Math.imul(F,J)|0,n=n+Math.imul(C,G)|0,i=(i=i+Math.imul(C,V)|0)+Math.imul(T,G)|0,o=o+Math.imul(T,V)|0,n=n+Math.imul(I,X)|0,i=(i=i+Math.imul(I,Z)|0)+Math.imul(R,X)|0,o=o+Math.imul(R,Z)|0,n=n+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,tt)|0,n=n+Math.imul(S,rt)|0,i=(i=i+Math.imul(S,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(b,ot)|0,i=(i=i+Math.imul(b,st)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,st)|0,n=n+Math.imul(y,ht)|0,i=(i=i+Math.imul(y,ut)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ut)|0,n=n+Math.imul(p,ft)|0,i=(i=i+Math.imul(p,lt)|0)+Math.imul(m,ft)|0,o=o+Math.imul(m,lt)|0;var kt=(u+(n=n+Math.imul(f,pt)|0)|0)+((8191&(i=(i=i+Math.imul(f,mt)|0)+Math.imul(l,pt)|0))<<13)|0;u=((o=o+Math.imul(l,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(U,W),i=(i=Math.imul(U,J))+Math.imul(L,W)|0,o=Math.imul(L,J),n=n+Math.imul(B,G)|0,i=(i=i+Math.imul(B,V)|0)+Math.imul(F,G)|0,o=o+Math.imul(F,V)|0,n=n+Math.imul(C,X)|0,i=(i=i+Math.imul(C,Z)|0)+Math.imul(T,X)|0,o=o+Math.imul(T,Z)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(R,Q)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(P,rt)|0,i=(i=i+Math.imul(P,nt)|0)+Math.imul(x,rt)|0,o=o+Math.imul(x,nt)|0,n=n+Math.imul(S,ot)|0,i=(i=i+Math.imul(S,st)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,st)|0,n=n+Math.imul(b,ht)|0,i=(i=i+Math.imul(b,ut)|0)+Math.imul(E,ht)|0,o=o+Math.imul(E,ut)|0,n=n+Math.imul(y,ft)|0,i=(i=i+Math.imul(y,lt)|0)+Math.imul(v,ft)|0,o=o+Math.imul(v,lt)|0;var Pt=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((o=o+Math.imul(m,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,n=Math.imul(U,G),i=(i=Math.imul(U,V))+Math.imul(L,G)|0,o=Math.imul(L,V),n=n+Math.imul(B,X)|0,i=(i=i+Math.imul(B,Z)|0)+Math.imul(F,X)|0,o=o+Math.imul(F,Z)|0,n=n+Math.imul(C,Q)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(I,rt)|0,i=(i=i+Math.imul(I,nt)|0)+Math.imul(R,rt)|0,o=o+Math.imul(R,nt)|0,n=n+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,st)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,st)|0,n=n+Math.imul(S,ht)|0,i=(i=i+Math.imul(S,ut)|0)+Math.imul(_,ht)|0,o=o+Math.imul(_,ut)|0,n=n+Math.imul(b,ft)|0,i=(i=i+Math.imul(b,lt)|0)+Math.imul(E,ft)|0,o=o+Math.imul(E,lt)|0;var xt=(u+(n=n+Math.imul(y,pt)|0)|0)+((8191&(i=(i=i+Math.imul(y,mt)|0)+Math.imul(v,pt)|0))<<13)|0;u=((o=o+Math.imul(v,mt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(U,X),i=(i=Math.imul(U,Z))+Math.imul(L,X)|0,o=Math.imul(L,Z),n=n+Math.imul(B,Q)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(F,Q)|0,o=o+Math.imul(F,tt)|0,n=n+Math.imul(C,rt)|0,i=(i=i+Math.imul(C,nt)|0)+Math.imul(T,rt)|0,o=o+Math.imul(T,nt)|0,n=n+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(R,ot)|0,o=o+Math.imul(R,st)|0,n=n+Math.imul(P,ht)|0,i=(i=i+Math.imul(P,ut)|0)+Math.imul(x,ht)|0,o=o+Math.imul(x,ut)|0,n=n+Math.imul(S,ft)|0,i=(i=i+Math.imul(S,lt)|0)+Math.imul(_,ft)|0,o=o+Math.imul(_,lt)|0;var Mt=(u+(n=n+Math.imul(b,pt)|0)|0)+((8191&(i=(i=i+Math.imul(b,mt)|0)+Math.imul(E,pt)|0))<<13)|0;u=((o=o+Math.imul(E,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(U,Q),i=(i=Math.imul(U,tt))+Math.imul(L,Q)|0,o=Math.imul(L,tt),n=n+Math.imul(B,rt)|0,i=(i=i+Math.imul(B,nt)|0)+Math.imul(F,rt)|0,o=o+Math.imul(F,nt)|0,n=n+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,st)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,st)|0,n=n+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ut)|0)+Math.imul(R,ht)|0,o=o+Math.imul(R,ut)|0,n=n+Math.imul(P,ft)|0,i=(i=i+Math.imul(P,lt)|0)+Math.imul(x,ft)|0,o=o+Math.imul(x,lt)|0;var It=(u+(n=n+Math.imul(S,pt)|0)|0)+((8191&(i=(i=i+Math.imul(S,mt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((o=o+Math.imul(_,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(U,rt),i=(i=Math.imul(U,nt))+Math.imul(L,rt)|0,o=Math.imul(L,nt),n=n+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(F,ot)|0,o=o+Math.imul(F,st)|0,n=n+Math.imul(C,ht)|0,i=(i=i+Math.imul(C,ut)|0)+Math.imul(T,ht)|0,o=o+Math.imul(T,ut)|0,n=n+Math.imul(I,ft)|0,i=(i=i+Math.imul(I,lt)|0)+Math.imul(R,ft)|0,o=o+Math.imul(R,lt)|0;var Rt=(u+(n=n+Math.imul(P,pt)|0)|0)+((8191&(i=(i=i+Math.imul(P,mt)|0)+Math.imul(x,pt)|0))<<13)|0;u=((o=o+Math.imul(x,mt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(U,ot),i=(i=Math.imul(U,st))+Math.imul(L,ot)|0,o=Math.imul(L,st),n=n+Math.imul(B,ht)|0,i=(i=i+Math.imul(B,ut)|0)+Math.imul(F,ht)|0,o=o+Math.imul(F,ut)|0,n=n+Math.imul(C,ft)|0,i=(i=i+Math.imul(C,lt)|0)+Math.imul(T,ft)|0,o=o+Math.imul(T,lt)|0;var Nt=(u+(n=n+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,mt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((o=o+Math.imul(R,mt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,n=Math.imul(U,ht),i=(i=Math.imul(U,ut))+Math.imul(L,ht)|0,o=Math.imul(L,ut),n=n+Math.imul(B,ft)|0,i=(i=i+Math.imul(B,lt)|0)+Math.imul(F,ft)|0,o=o+Math.imul(F,lt)|0;var Ct=(u+(n=n+Math.imul(C,pt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(T,pt)|0))<<13)|0;u=((o=o+Math.imul(T,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(U,ft),i=(i=Math.imul(U,lt))+Math.imul(L,ft)|0,o=Math.imul(L,lt);var Tt=(u+(n=n+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,mt)|0)+Math.imul(F,pt)|0))<<13)|0;u=((o=o+Math.imul(F,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863;var Ot=(u+(n=Math.imul(U,pt))|0)+((8191&(i=(i=Math.imul(U,mt))+Math.imul(L,pt)|0))<<13)|0;return u=((o=Math.imul(L,mt))+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,h[0]=gt,h[1]=yt,h[2]=vt,h[3]=wt,h[4]=bt,h[5]=Et,h[6]=At,h[7]=St,h[8]=_t,h[9]=kt,h[10]=Pt,h[11]=xt,h[12]=Mt,h[13]=It,h[14]=Rt,h[15]=Nt,h[16]=Ct,h[17]=Tt,h[18]=Ot,0!==u&&(h[19]=u,r.length++),r};function p(t,e,r){return(new m).mulp(t,e,r)}function m(t,e){this.x=t,this.y=e}Math.imul||(d=l),i.prototype.mulTo=function(t,e){var r,n=this.length+t.length;return r=10===this.length&&10===t.length?d(this,t,e):n<63?l(this,t,e):n<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,h=Math.min(o,e.length-1),u=Math.max(0,o-t.length+1);u<=h;u++){var c=o-u,f=(0|t.words[c])*(0|e.words[u]),l=67108863&f;a=67108863&(l=l+a|0),i+=(s=(s=s+(f/67108864|0)|0)+(l>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):p(this,t,e),r},m.prototype.makeRBT=function(t){for(var e=new Array(t),r=i.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},m.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},m.prototype.permute=function(t,e,r,n,i,o){for(var s=0;s<o;s++)n[s]=e[t[s]],i[s]=r[t[s]]},m.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,h=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),c=0;c<i;c+=a)for(var f=h,l=u,d=0;d<s;d++){var p=r[c+d],m=n[c+d],g=r[c+d+s],y=n[c+d+s],v=f*g-l*y;y=f*y+l*g,g=v,r[c+d]=p+g,n[c+d]=m+y,r[c+d+s]=p-g,n[c+d+s]=m-y,d!==a&&(v=h*f-u*l,l=h*l+u*f,f=v)}},m.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},m.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},m.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},m.prototype.convert13b=function(t,e,n,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)n[s]=0;r(0===o),r(0==(-8192&o))},m.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},m.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),h=new Array(n),u=new Array(n),c=new Array(n),f=new Array(n),l=r.words;l.length=n,this.convert13b(t.words,t.length,s,n),this.convert13b(e.words,e.length,u,n),this.transform(s,o,a,h,n,i),this.transform(u,o,c,f,n,i);for(var d=0;d<n;d++){var p=a[d]*c[d]-h[d]*f[d];h[d]=a[d]*f[d]+h[d]*c[d],a[d]=p}return this.conjugate(a,h,n),this.transform(a,h,l,o,n,i),this.conjugate(l,o,n),this.normalize13b(l,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},i.prototype.mul=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},i.prototype.mulf=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),p(this,t,e)},i.prototype.imul=function(t){return this.clone().mulTo(t,this)},i.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[n]=67108863&o}return 0!==e&&(this.words[n]=e,this.length++),this},i.prototype.muln=function(t){return this.clone().imuln(t)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new i(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var o=r.sqr();n<e.length;n++,o=o.sqr())0!==e[n]&&(r=r.mul(o));return r},i.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,h=(0|this.words[e])-a<<n;this.words[e]=h|s,s=a>>>26-n}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},i.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},i.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,h=n;if(i-=s,i=Math.max(0,i),h){for(var u=0;u<s;u++)h.words[u]=this.words[u];h.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var f=0|this.words[u];this.words[u]=c<<26-o|f>>>o,c=f&a}return h&&0!==c&&(h.words[h.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},i.prototype.shln=function(t){return this.clone().ishln(t)},i.prototype.ushln=function(t){return this.clone().iushln(t)},i.prototype.shrn=function(t){return this.clone().ishrn(t)},i.prototype.ushrn=function(t){return this.clone().iushrn(t)},i.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n||!(this.words[n]&i))},i.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(t){return this.clone().imaskn(t)},i.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},i.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},i.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},i.prototype.addn=function(t){return this.clone().iaddn(t)},i.prototype.subn=function(t){return this.clone().isubn(t)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(t,e,n){var i,o,s=t.length+n;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+a;var h=(0|t.words[i])*e;a=((o-=67108863&h)>>26)-(h/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},i.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),o=t,s=0|o.words[o.length-1];0!=(r=26-this._countBits(s))&&(o=o.ushln(r),n.iushln(r),s=0|o.words[o.length-1]);var a,h=n.length-o.length;if("mod"!==e){(a=new i(null)).length=h+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var c=n.clone()._ishlnsubmul(o,1,h);0===c.negative&&(n=c,a&&(a.words[h]=1));for(var f=h-1;f>=0;f--){var l=67108864*(0|n.words[o.length+f])+(0|n.words[o.length+f-1]);for(l=Math.min(l/s|0,67108863),n._ishlnsubmul(o,l,f);0!==n.negative;)l--,n.negative=0,n._ishlnsubmul(o,1,f),n.isZero()||(n.negative^=1);a&&(a.words[f]=l)}return a&&a.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},i.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(o=a.div.neg()),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(t)),{div:o,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(o=a.div.neg()),{div:o,mod:a.mod}):0!=(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new i(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new i(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new i(this.modn(t.words[0]))}:this._wordDiv(t,e);var o,s,a},i.prototype.div=function(t){return this.divmod(t,"div",!1).div},i.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},i.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},i.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},i.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(e*n+(0|this.words[i]))%t;return n},i.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},i.prototype.divn=function(t){return this.clone().idivn(t)},i.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o=new i(1),s=new i(0),a=new i(0),h=new i(1),u=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++u;for(var c=n.clone(),f=e.clone();!e.isZero();){for(var l=0,d=1;0==(e.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(e.iushrn(l);l-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(c),s.isub(f)),o.iushrn(1),s.iushrn(1);for(var p=0,m=1;0==(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||h.isOdd())&&(a.iadd(c),h.isub(f)),a.iushrn(1),h.iushrn(1);e.cmp(n)>=0?(e.isub(n),o.isub(a),s.isub(h)):(n.isub(e),a.isub(o),h.isub(s))}return{a:a,b:h,gcd:n.iushln(u)}},i.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o,s=new i(1),a=new i(0),h=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,c=1;0==(e.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(e.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(h),s.iushrn(1);for(var f=0,l=1;0==(n.words[0]&l)&&f<26;++f,l<<=1);if(f>0)for(n.iushrn(f);f-- >0;)a.isOdd()&&a.iadd(h),a.iushrn(1);e.cmp(n)>=0?(e.isub(n),s.isub(a)):(n.isub(e),a.isub(s))}return(o=0===e.cmpn(1)?s:a).cmpn(0)<0&&o.iadd(t),o},i.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},i.prototype.invm=function(t){return this.egcd(t).a.umod(t)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(t){return this.words[0]&t},i.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},i.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},i.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},i.prototype.gtn=function(t){return 1===this.cmpn(t)},i.prototype.gt=function(t){return 1===this.cmp(t)},i.prototype.gten=function(t){return this.cmpn(t)>=0},i.prototype.gte=function(t){return this.cmp(t)>=0},i.prototype.ltn=function(t){return-1===this.cmpn(t)},i.prototype.lt=function(t){return-1===this.cmp(t)},i.prototype.lten=function(t){return this.cmpn(t)<=0},i.prototype.lte=function(t){return this.cmp(t)<=0},i.prototype.eqn=function(t){return 0===this.cmpn(t)},i.prototype.eq=function(t){return 0===this.cmp(t)},i.red=function(t){return new A(t)},i.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(t){return this.red=t,this},i.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},i.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},i.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},i.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},i.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},i.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},i.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},i.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new i(e,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(t){if("string"==typeof t){var e=i._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function S(t){A.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new i(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},n(v,y),v.prototype.split=function(t,e){for(var r=4194303,n=Math.min(t.length,9),i=0;i<n;i++)e.words[i]=t.words[i];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&r,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(w,y),n(b,y),n(E,y),E.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},i._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new w;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new E}return g[t]=e,e},A.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},A.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},A.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},A.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},A.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},A.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},A.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},A.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},A.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},A.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},A.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},A.prototype.isqr=function(t){return this.imul(t,t.clone())},A.prototype.sqr=function(t){return this.mul(t,t)},A.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new i(1)).iushrn(2);return this.pow(t,n)}for(var o=this.m.subn(1),s=0;!o.isZero()&&0===o.andln(1);)s++,o.iushrn(1);r(!o.isZero());var a=new i(1).toRed(this),h=a.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);0!==this.pow(c,u).cmp(h);)c.redIAdd(h);for(var f=this.pow(c,o),l=this.pow(t,o.addn(1).iushrn(1)),d=this.pow(t,o),p=s;0!==d.cmp(a);){for(var m=d,g=0;0!==m.cmp(a);g++)m=m.redSqr();r(g<p);var y=this.pow(f,new i(1).iushln(p-g-1));l=l.redMul(y),f=y.redSqr(),d=d.redMul(f),p=g}return l},A.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},A.prototype.pow=function(t,e){if(e.isZero())return new i(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new i(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var o=r[0],s=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],c=h-1;c>=0;c--){var f=u>>c&1;o!==r[0]&&(o=this.sqr(o)),0!==f||0!==s?(s<<=1,s|=f,(4==++a||0===n&&0===c)&&(o=this.mul(o,r[s]),a=0,s=0)):a=0}h=26}return o},A.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},A.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},i.mont=function(t){return new S(t)},n(S,A),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new i(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(u,o);var c=u.exports,f=l;function l(t,e){if(!t)throw new Error(e||"Assertion failed")}l.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)};var d={};!function(t){var e=d;function r(t){return 1===t.length?"0"+t:t}function n(t){for(var e="",n=0;n<t.length;n++)e+=r(t[n].toString(16));return e}e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"!=typeof t){for(var n=0;n<t.length;n++)r[n]=0|t[n];return r}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t);for(n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(n=0;n<t.length;n++){var i=t.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r},e.zero2=r,e.toHex=n,e.encode=function(t,e){return"hex"===e?n(t):t}}(),function(t){var e=h,r=u.exports,n=f,i=d;e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode,e.getNAF=function(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);for(var i=1<<e+1,o=t.clone(),s=0;s<n.length;s++){var a,h=o.andln(i-1);o.isOdd()?(a=h>(i>>1)-1?(i>>1)-h:h,o.isubn(a)):a=0,n[s]=a,o.iushrn(1)}return n},e.getJSF=function(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var n,i=0,o=0;t.cmpn(-i)>0||e.cmpn(-o)>0;){var s,a,h=t.andln(3)+i&3,u=e.andln(3)+o&3;3===h&&(h=-1),3===u&&(u=-1),s=0==(1&h)?0:3!==(n=t.andln(7)+i&7)&&5!==n||2!==u?h:-h,r[0].push(s),a=0==(1&u)?0:3!==(n=e.andln(7)+o&7)&&5!==n||2!==h?u:-u,r[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),t.iushrn(1),e.iushrn(1)}return r},e.cachedProperty=function(t,e,r){var n="_"+e;t.prototype[e]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},e.parseBytes=function(t){return"string"==typeof t?e.toArray(t,"hex"):t},e.intFromLE=function(t){return new r(t,"hex","le")}}();var p,m={exports:{}};function g(t){this.rand=t}if(m.exports=function(t){return p||(p=new g(null)),p.generate(t)},m.exports.Rand=g,g.prototype.generate=function(t){return this._rand(t)},g.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),r=0;r<e.length;r++)e[r]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?g.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?g.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(g.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var y=require("crypto");if("function"!=typeof y.randomBytes)throw new Error("Not supported");g.prototype._rand=function(t){return y.randomBytes(t)}}catch(t){}var v={},w=u.exports,b=h,E=b.getNAF,A=b.getJSF,S=b.assert;function _(t,e){this.type=t,this.p=new w(e.p,16),this.red=e.prime?w.red(e.prime):w.mont(this.p),this.zero=new w(0).toRed(this.red),this.one=new w(1).toRed(this.red),this.two=new w(2).toRed(this.red),this.n=e.n&&new w(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var k=_;function P(t,e){this.curve=t,this.type=e,this.precomputed=null}_.prototype.point=function(){throw new Error("Not implemented")},_.prototype.validate=function(){throw new Error("Not implemented")},_.prototype._fixedNafMul=function(t,e){S(t.precomputed);var r=t._getDoubles(),n=E(e,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var o,s,a=[];for(o=0;o<n.length;o+=r.step){s=0;for(var h=o+r.step-1;h>=o;h--)s=(s<<1)+n[h];a.push(s)}for(var u=this.jpoint(null,null,null),c=this.jpoint(null,null,null),f=i;f>0;f--){for(o=0;o<a.length;o++)(s=a[o])===f?c=c.mixedAdd(r.points[o]):s===-f&&(c=c.mixedAdd(r.points[o].neg()));u=u.add(c)}return u.toP()},_.prototype._wnafMul=function(t,e){var r=4,n=t._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=E(e,r,this._bitLength),s=this.jpoint(null,null,null),a=o.length-1;a>=0;a--){for(var h=0;a>=0&&0===o[a];a--)h++;if(a>=0&&h++,s=s.dblp(h),a<0)break;var u=o[a];S(0!==u),s="affine"===t.type?u>0?s.mixedAdd(i[u-1>>1]):s.mixedAdd(i[-u-1>>1].neg()):u>0?s.add(i[u-1>>1]):s.add(i[-u-1>>1].neg())}return"affine"===t.type?s.toP():s},_.prototype._wnafMulAdd=function(t,e,r,n,i){var o,s,a,h=this._wnafT1,u=this._wnafT2,c=this._wnafT3,f=0;for(o=0;o<n;o++){var l=(a=e[o])._getNAFPoints(t);h[o]=l.wnd,u[o]=l.points}for(o=n-1;o>=1;o-=2){var d=o-1,p=o;if(1===h[d]&&1===h[p]){var m=[e[d],null,null,e[p]];0===e[d].y.cmp(e[p].y)?(m[1]=e[d].add(e[p]),m[2]=e[d].toJ().mixedAdd(e[p].neg())):0===e[d].y.cmp(e[p].y.redNeg())?(m[1]=e[d].toJ().mixedAdd(e[p]),m[2]=e[d].add(e[p].neg())):(m[1]=e[d].toJ().mixedAdd(e[p]),m[2]=e[d].toJ().mixedAdd(e[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],y=A(r[d],r[p]);for(f=Math.max(y[0].length,f),c[d]=new Array(f),c[p]=new Array(f),s=0;s<f;s++){var v=0|y[0][s],w=0|y[1][s];c[d][s]=g[3*(v+1)+(w+1)],c[p][s]=0,u[d]=m}}else c[d]=E(r[d],h[d],this._bitLength),c[p]=E(r[p],h[p],this._bitLength),f=Math.max(c[d].length,f),f=Math.max(c[p].length,f)}var b=this.jpoint(null,null,null),S=this._wnafT4;for(o=f;o>=0;o--){for(var _=0;o>=0;){var k=!0;for(s=0;s<n;s++)S[s]=0|c[s][o],0!==S[s]&&(k=!1);if(!k)break;_++,o--}if(o>=0&&_++,b=b.dblp(_),o<0)break;for(s=0;s<n;s++){var P=S[s];0!==P&&(P>0?a=u[s][P-1>>1]:P<0&&(a=u[s][-P-1>>1].neg()),b="affine"===a.type?b.mixedAdd(a):b.add(a))}}for(o=0;o<n;o++)u[o]=null;return i?b:b.toP()},_.BasePoint=P,P.prototype.eq=function(){throw new Error("Not implemented")},P.prototype.validate=function(){return this.curve.validate(this)},_.prototype.decodePoint=function(t,e){t=b.toArray(t,e);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*r)return 6===t[0]?S(t[t.length-1]%2==0):7===t[0]&&S(t[t.length-1]%2==1),this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},P.prototype.encodeCompressed=function(t){return this.encode(t,!0)},P.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},P.prototype.encode=function(t,e){return b.encode(this._encode(e),t)},P.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},P.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},P.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)n=n.dbl();r.push(n)}return{step:t,points:r}},P.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)e[i]=e[i-1].add(n);return{wnd:t,points:e}},P.prototype._getBeta=function(){return null},P.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e};var x={exports:{}},M={exports:{}};"function"==typeof Object.create?M.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:M.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}};try{var I=require("util");if("function"!=typeof I.inherits)throw"";x.exports=I.inherits}catch(t){x.exports=M.exports}var R=h,N=u.exports,C=x.exports,T=k,O=R.assert;function B(t){T.call(this,"short",t),this.a=new N(t.a,16).toRed(this.red),this.b=new N(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}C(B,T);var F=B;function D(t,e,r,n){T.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new N(e,16),this.y=new N(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function U(t,e,r,n){T.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new N(0)):(this.x=new N(e,16),this.y=new N(r,16),this.z=new N(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}B.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,r;if(t.beta)e=new N(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);e=(e=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(t.lambda)r=new N(t.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(e))?r=i[0]:(r=i[1],O(0===this.g.mul(r).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:r,basis:t.basis?t.basis.map((function(t){return{a:new N(t.a,16),b:new N(t.b,16)}})):this._getEndoBasis(r)}}},B.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:N.mont(t),r=new N(2).toRed(e).redInvm(),n=r.redNeg(),i=new N(3).toRed(e).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},B.prototype._getEndoBasis=function(t){for(var e,r,n,i,o,s,a,h,u,c=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=t,l=this.n.clone(),d=new N(1),p=new N(0),m=new N(0),g=new N(1),y=0;0!==f.cmpn(0);){var v=l.div(f);h=l.sub(v.mul(f)),u=m.sub(v.mul(d));var w=g.sub(v.mul(p));if(!n&&h.cmp(c)<0)e=a.neg(),r=d,n=h.neg(),i=u;else if(n&&2==++y)break;a=h,l=f,f=h,m=d,d=u,g=p,p=w}o=h.neg(),s=u;var b=n.sqr().add(i.sqr());return o.sqr().add(s.sqr()).cmp(b)>=0&&(o=e,s=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:n,b:i},{a:o,b:s}]},B.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],n=e[1],i=n.b.mul(t).divRound(this.n),o=r.b.neg().mul(t).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),h=i.mul(r.b),u=o.mul(n.b);return{k1:t.sub(s).sub(a),k2:h.add(u).neg()}},B.prototype.pointFromX=function(t,e){(t=new N(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(e&&!i||!e&&i)&&(n=n.redNeg()),this.point(t,n)},B.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,n=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},B.prototype._endoWnafMulAdd=function(t,e,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<t.length;o++){var s=this._endoSplit(e[o]),a=t[o],h=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),h=h.neg(!0)),n[2*o]=a,n[2*o+1]=h,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var u=this._wnafMulAdd(1,n,i,2*o,r),c=0;c<2*o;c++)n[c]=null,i[c]=null;return u},C(D,T.BasePoint),B.prototype.point=function(t,e,r){return new D(this,t,e,r)},B.prototype.pointFromJSON=function(t,e){return D.fromJSON(this,t,e)},D.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,n=function(t){return r.point(t.x.redMul(r.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return e}},D.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},D.fromJSON=function(t,e,r){"string"==typeof e&&(e=JSON.parse(e));var n=t.point(e[0],e[1],r);if(!e[2])return n;function i(e){return t.point(e[0],e[1],r)}var o=e[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},D.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},D.prototype.isInfinity=function(){return this.inf},D.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},D.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),n=t.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},D.prototype.getX=function(){return this.x.fromRed()},D.prototype.getY=function(){return this.y.fromRed()},D.prototype.mul=function(t){return t=new N(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},D.prototype.mulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},D.prototype.jmulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},D.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},D.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,n=function(t){return t.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return e},D.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},C(U,T.BasePoint),B.prototype.jpoint=function(t,e,r){return new U(this,t,e,r)},U.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(r,n)},U.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},U.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(e),i=t.x.redMul(r),o=this.y.redMul(e.redMul(t.z)),s=t.y.redMul(r.redMul(this.z)),a=n.redSub(i),h=o.redSub(s);if(0===a.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),c=u.redMul(a),f=n.redMul(u),l=h.redSqr().redIAdd(c).redISub(f).redISub(f),d=h.redMul(f.redISub(l)).redISub(o.redMul(c)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(l,d,p)},U.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,n=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=s.redSqr(),u=h.redMul(s),c=r.redMul(h),f=a.redSqr().redIAdd(u).redISub(c).redISub(c),l=a.redMul(c.redISub(f)).redISub(i.redMul(u)),d=this.z.redMul(s);return this.curve.jpoint(f,l,d)},U.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var r=this;for(e=0;e<t;e++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,h=a.redSqr().redSqr(),u=s.redAdd(s);for(e=0;e<t;e++){var c=o.redSqr(),f=u.redSqr(),l=f.redSqr(),d=c.redAdd(c).redIAdd(c).redIAdd(n.redMul(h)),p=o.redMul(f),m=d.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),y=d.redMul(g);y=y.redIAdd(y).redISub(l);var v=u.redMul(a);e+1<t&&(h=h.redMul(l)),o=m,a=v,u=y}return this.curve.jpoint(o,u.redMul(i),a)},U.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},U.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),h=a.redSqr().redISub(s).redISub(s),u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),t=h,e=a.redMul(s.redISub(h)).redISub(u),r=this.y.redAdd(this.y)}else{var c=this.x.redSqr(),f=this.y.redSqr(),l=f.redSqr(),d=this.x.redAdd(f).redSqr().redISub(c).redISub(l);d=d.redIAdd(d);var p=c.redAdd(c).redIAdd(c),m=p.redSqr(),g=l.redIAdd(l);g=(g=g.redIAdd(g)).redIAdd(g),t=m.redISub(d).redISub(d),e=p.redMul(d.redISub(t)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(t,e,r)},U.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),h=a.redSqr().redISub(s).redISub(s);t=h;var u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),e=a.redMul(s.redISub(h)).redISub(u),r=this.y.redAdd(this.y)}else{var c=this.z.redSqr(),f=this.y.redSqr(),l=this.x.redMul(f),d=this.x.redSub(c).redMul(this.x.redAdd(c));d=d.redAdd(d).redIAdd(d);var p=l.redIAdd(l),m=(p=p.redIAdd(p)).redAdd(p);t=d.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(f).redISub(c);var g=f.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),e=d.redMul(p.redISub(t)).redISub(g)}return this.curve.jpoint(t,e,r)},U.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=e.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),h=e.redAdd(e),u=(h=h.redIAdd(h)).redMul(s),c=a.redSqr().redISub(u.redAdd(u)),f=u.redISub(c),l=s.redSqr();l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var d=a.redMul(f).redISub(l),p=r.redAdd(r).redMul(n);return this.curve.jpoint(c,d,p)},U.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),n=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),s=this.x.redAdd(e).redSqr().redISub(t).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),h=n.redIAdd(n);h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var u=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(h),c=e.redMul(u);c=(c=c.redIAdd(c)).redIAdd(c);var f=this.x.redMul(a).redISub(c);f=(f=f.redIAdd(f)).redIAdd(f);var l=this.y.redMul(u.redMul(h.redISub(u)).redISub(s.redMul(a)));l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var d=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(f,l,d)},U.prototype.mul=function(t,e){return t=new N(t,e),this.curve._wnafMul(this,t)},U.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(0!==this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0))return!1;var n=e.redMul(this.z),i=r.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(n)).cmpn(0)},U.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(r))return!0;for(var n=t.clone(),i=this.curve.redN.redMul(e);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},U.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},U.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var L=u.exports,H=x.exports,z=k,j=h;function K(t){z.call(this,"mont",t),this.a=new L(t.a,16).toRed(this.red),this.b=new L(t.b,16).toRed(this.red),this.i4=new L(4).toRed(this.red).redInvm(),this.two=new L(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}H(K,z);var W=K;function J(t,e,r){z.BasePoint.call(this,t,"projective"),null===e&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new L(e,16),this.z=new L(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}K.prototype.validate=function(t){var e=t.normalize().x,r=e.redSqr(),n=r.redMul(e).redAdd(r.redMul(this.a)).redAdd(e);return 0===n.redSqrt().redSqr().cmp(n)},H(J,z.BasePoint),K.prototype.decodePoint=function(t,e){return this.point(j.toArray(t,e),1)},K.prototype.point=function(t,e){return new J(this,t,e)},K.prototype.pointFromJSON=function(t){return J.fromJSON(this,t)},J.prototype.precompute=function(){},J.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},J.fromJSON=function(t,e){return new J(t,e[0],e[1]||t.one)},J.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},J.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},J.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),r=t.redSub(e),n=t.redMul(e),i=r.redMul(e.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},J.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},J.prototype.diffAdd=function(t,e){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=t.x.redAdd(t.z),o=t.x.redSub(t.z).redMul(r),s=i.redMul(n),a=e.z.redMul(o.redAdd(s).redSqr()),h=e.x.redMul(o.redISub(s).redSqr());return this.curve.point(a,h)},J.prototype.mul=function(t){for(var e=t.clone(),r=this,n=this.curve.point(null,null),i=[];0!==e.cmpn(0);e.iushrn(1))i.push(e.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},J.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},J.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},J.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},J.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},J.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var q=h,G=u.exports,V=x.exports,$=k,X=q.assert;function Z(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,$.call(this,"edwards",t),this.a=new G(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new G(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new G(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),X(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}V(Z,$);var Y=Z;function Q(t,e,r,n,i){$.BasePoint.call(this,t,"projective"),null===e&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new G(e,16),this.y=new G(r,16),this.z=n?new G(n,16):this.curve.one,this.t=i&&new G(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}Z.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},Z.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},Z.prototype.jpoint=function(t,e,r,n){return this.point(t,e,r,n)},Z.prototype.pointFromX=function(t,e){(t=new G(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),n=this.c2.redSub(this.a.redMul(r)),i=this.one.redSub(this.c2.redMul(this.d).redMul(r)),o=n.redMul(i.redInvm()),s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var a=s.fromRed().isOdd();return(e&&!a||!e&&a)&&(s=s.redNeg()),this.point(t,s)},Z.prototype.pointFromY=function(t,e){(t=new G(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr(),n=r.redSub(this.c2),i=r.redMul(this.d).redMul(this.c2).redSub(this.a),o=n.redMul(i.redInvm());if(0===o.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==e&&(s=s.redNeg()),this.point(s,t)},Z.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),r=t.y.redSqr(),n=e.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(r)));return 0===n.cmp(i)},V(Q,$.BasePoint),Z.prototype.pointFromJSON=function(t){return Q.fromJSON(this,t)},Z.prototype.point=function(t,e,r,n){return new Q(this,t,e,r,n)},Q.fromJSON=function(t,e){return new Q(t,e[0],e[1],e[2])},Q.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Q.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},Q.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(t),i=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=n.redAdd(e),s=o.redSub(r),a=n.redSub(e),h=i.redMul(s),u=o.redMul(a),c=i.redMul(a),f=s.redMul(o);return this.curve.point(h,u,f,c)},Q.prototype._projDbl=function(){var t,e,r,n,i,o,s=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),h=this.y.redSqr();if(this.curve.twisted){var u=(n=this.curve._mulA(a)).redAdd(h);this.zOne?(t=s.redSub(a).redSub(h).redMul(u.redSub(this.curve.two)),e=u.redMul(n.redSub(h)),r=u.redSqr().redSub(u).redSub(u)):(i=this.z.redSqr(),o=u.redSub(i).redISub(i),t=s.redSub(a).redISub(h).redMul(o),e=u.redMul(n.redSub(h)),r=u.redMul(o))}else n=a.redAdd(h),i=this.curve._mulC(this.z).redSqr(),o=n.redSub(i).redSub(i),t=this.curve._mulC(s.redISub(n)).redMul(o),e=this.curve._mulC(n).redMul(a.redISub(h)),r=n.redMul(o);return this.curve.point(t,e,r)},Q.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Q.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),r=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),n=this.t.redMul(this.curve.dd).redMul(t.t),i=this.z.redMul(t.z.redAdd(t.z)),o=r.redSub(e),s=i.redSub(n),a=i.redAdd(n),h=r.redAdd(e),u=o.redMul(s),c=a.redMul(h),f=o.redMul(h),l=s.redMul(a);return this.curve.point(u,c,l,f)},Q.prototype._projAdd=function(t){var e,r,n=this.z.redMul(t.z),i=n.redSqr(),o=this.x.redMul(t.x),s=this.y.redMul(t.y),a=this.curve.d.redMul(o).redMul(s),h=i.redSub(a),u=i.redAdd(a),c=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(s),f=n.redMul(h).redMul(c);return this.curve.twisted?(e=n.redMul(u).redMul(s.redSub(this.curve._mulA(o))),r=h.redMul(u)):(e=n.redMul(u).redMul(s.redSub(o)),r=this.curve._mulC(h).redMul(u)),this.curve.point(f,e,r)},Q.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},Q.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},Q.prototype.mulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!1)},Q.prototype.jmulAdd=function(t,e,r){return this.curve._wnafMulAdd(1,[this,e],[t,r],2,!0)},Q.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},Q.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Q.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Q.prototype.getY=function(){return this.normalize(),this.y.fromRed()},Q.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},Q.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var r=t.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(n),0===this.x.cmp(e))return!0}},Q.prototype.toP=Q.prototype.normalize,Q.prototype.mixedAdd=Q.prototype.add,function(t){var e=t;e.base=k,e.short=F,e.mont=W,e.edwards=Y}(v);var tt={},et={},rt={},nt=f,it=x.exports;function ot(t,e){return 55296==(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1)))}function st(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function at(t){return 1===t.length?"0"+t:t}function ht(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}rt.inherits=it,rt.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=63&o|128):ot(t,i)?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++i)),r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=63&o|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=63&o|128)}else for(i=0;i<t.length;i++)r[i]=0|t[i];return r},rt.toHex=function(t){for(var e="",r=0;r<t.length;r++)e+=at(t[r].toString(16));return e},rt.htonl=st,rt.toHex32=function(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];"little"===e&&(i=st(i)),r+=ht(i.toString(16))}return r},rt.zero2=at,rt.zero8=ht,rt.join32=function(t,e,r,n){var i=r-e;nt(i%4==0);for(var o=new Array(i/4),s=0,a=e;s<o.length;s++,a+=4){var h;h="big"===n?t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],o[s]=h>>>0}return o},rt.split32=function(t,e){for(var r=new Array(4*t.length),n=0,i=0;n<t.length;n++,i+=4){var o=t[n];"big"===e?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r},rt.rotr32=function(t,e){return t>>>e|t<<32-e},rt.rotl32=function(t,e){return t<<e|t>>>32-e},rt.sum32=function(t,e){return t+e>>>0},rt.sum32_3=function(t,e,r){return t+e+r>>>0},rt.sum32_4=function(t,e,r,n){return t+e+r+n>>>0},rt.sum32_5=function(t,e,r,n,i){return t+e+r+n+i>>>0},rt.sum64=function(t,e,r,n){var i=t[e],o=n+t[e+1]>>>0,s=(o<n?1:0)+r+i;t[e]=s>>>0,t[e+1]=o},rt.sum64_hi=function(t,e,r,n){return(e+n>>>0<e?1:0)+t+r>>>0},rt.sum64_lo=function(t,e,r,n){return e+n>>>0},rt.sum64_4_hi=function(t,e,r,n,i,o,s,a){var h=0,u=e;return h+=(u=u+n>>>0)<e?1:0,h+=(u=u+o>>>0)<o?1:0,t+r+i+s+(h+=(u=u+a>>>0)<a?1:0)>>>0},rt.sum64_4_lo=function(t,e,r,n,i,o,s,a){return e+n+o+a>>>0},rt.sum64_5_hi=function(t,e,r,n,i,o,s,a,h,u){var c=0,f=e;return c+=(f=f+n>>>0)<e?1:0,c+=(f=f+o>>>0)<o?1:0,c+=(f=f+a>>>0)<a?1:0,t+r+i+s+h+(c+=(f=f+u>>>0)<u?1:0)>>>0},rt.sum64_5_lo=function(t,e,r,n,i,o,s,a,h,u){return e+n+o+a+u>>>0},rt.rotr64_hi=function(t,e,r){return(e<<32-r|t>>>r)>>>0},rt.rotr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0},rt.shr64_hi=function(t,e,r){return t>>>r},rt.shr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0};var ut={},ct=rt,ft=f;function lt(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}ut.BlockHash=lt,lt.prototype.update=function(t,e){if(t=ct.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var r=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-r,t.length),0===this.pending.length&&(this.pending=null),t=ct.join32(t,0,t.length-r,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this},lt.prototype.digest=function(t){return this.update(this._pad()),ft(null===this.pending),this._digest(t)},lt.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=255&t}else for(n[i++]=255&t,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n};var dt={},pt={},mt=rt.rotr32;function gt(t,e,r){return t&e^~t&r}function yt(t,e,r){return t&e^t&r^e&r}function vt(t,e,r){return t^e^r}pt.ft_1=function(t,e,r,n){return 0===t?gt(e,r,n):1===t||3===t?vt(e,r,n):2===t?yt(e,r,n):void 0},pt.ch32=gt,pt.maj32=yt,pt.p32=vt,pt.s0_256=function(t){return mt(t,2)^mt(t,13)^mt(t,22)},pt.s1_256=function(t){return mt(t,6)^mt(t,11)^mt(t,25)},pt.g0_256=function(t){return mt(t,7)^mt(t,18)^t>>>3},pt.g1_256=function(t){return mt(t,17)^mt(t,19)^t>>>10};var wt=rt,bt=ut,Et=pt,At=wt.rotl32,St=wt.sum32,_t=wt.sum32_5,kt=Et.ft_1,Pt=bt.BlockHash,xt=[1518500249,1859775393,2400959708,3395469782];function Mt(){if(!(this instanceof Mt))return new Mt;Pt.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}wt.inherits(Mt,Pt);var It=Mt;Mt.blockSize=512,Mt.outSize=160,Mt.hmacStrength=80,Mt.padLength=64,Mt.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=At(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],h=this.h[4];for(n=0;n<r.length;n++){var u=~~(n/20),c=_t(At(i,5),kt(u,o,s,a),h,r[n],xt[u]);h=a,a=s,s=At(o,30),o=i,i=c}this.h[0]=St(this.h[0],i),this.h[1]=St(this.h[1],o),this.h[2]=St(this.h[2],s),this.h[3]=St(this.h[3],a),this.h[4]=St(this.h[4],h)},Mt.prototype._digest=function(t){return"hex"===t?wt.toHex32(this.h,"big"):wt.split32(this.h,"big")};var Rt=rt,Nt=ut,Ct=pt,Tt=f,Ot=Rt.sum32,Bt=Rt.sum32_4,Ft=Rt.sum32_5,Dt=Ct.ch32,Ut=Ct.maj32,Lt=Ct.s0_256,Ht=Ct.s1_256,zt=Ct.g0_256,jt=Ct.g1_256,Kt=Nt.BlockHash,Wt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Jt(){if(!(this instanceof Jt))return new Jt;Kt.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Wt,this.W=new Array(64)}Rt.inherits(Jt,Kt);var qt=Jt;Jt.blockSize=512,Jt.outSize=256,Jt.hmacStrength=192,Jt.padLength=64,Jt.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=Bt(jt(r[n-2]),r[n-7],zt(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],s=this.h[2],a=this.h[3],h=this.h[4],u=this.h[5],c=this.h[6],f=this.h[7];for(Tt(this.k.length===r.length),n=0;n<r.length;n++){var l=Ft(f,Ht(h),Dt(h,u,c),this.k[n],r[n]),d=Ot(Lt(i),Ut(i,o,s));f=c,c=u,u=h,h=Ot(a,l),a=s,s=o,o=i,i=Ot(l,d)}this.h[0]=Ot(this.h[0],i),this.h[1]=Ot(this.h[1],o),this.h[2]=Ot(this.h[2],s),this.h[3]=Ot(this.h[3],a),this.h[4]=Ot(this.h[4],h),this.h[5]=Ot(this.h[5],u),this.h[6]=Ot(this.h[6],c),this.h[7]=Ot(this.h[7],f)},Jt.prototype._digest=function(t){return"hex"===t?Rt.toHex32(this.h,"big"):Rt.split32(this.h,"big")};var Gt=rt,Vt=qt;function $t(){if(!(this instanceof $t))return new $t;Vt.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Gt.inherits($t,Vt);var Xt=$t;$t.blockSize=512,$t.outSize=224,$t.hmacStrength=192,$t.padLength=64,$t.prototype._digest=function(t){return"hex"===t?Gt.toHex32(this.h.slice(0,7),"big"):Gt.split32(this.h.slice(0,7),"big")};var Zt=rt,Yt=ut,Qt=f,te=Zt.rotr64_hi,ee=Zt.rotr64_lo,re=Zt.shr64_hi,ne=Zt.shr64_lo,ie=Zt.sum64,oe=Zt.sum64_hi,se=Zt.sum64_lo,ae=Zt.sum64_4_hi,he=Zt.sum64_4_lo,ue=Zt.sum64_5_hi,ce=Zt.sum64_5_lo,fe=Yt.BlockHash,le=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function de(){if(!(this instanceof de))return new de;fe.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=le,this.W=new Array(160)}Zt.inherits(de,fe);var pe=de;function me(t,e,r,n,i){var o=t&r^~t&i;return o<0&&(o+=4294967296),o}function ge(t,e,r,n,i,o){var s=e&n^~e&o;return s<0&&(s+=4294967296),s}function ye(t,e,r,n,i){var o=t&r^t&i^r&i;return o<0&&(o+=4294967296),o}function ve(t,e,r,n,i,o){var s=e&n^e&o^n&o;return s<0&&(s+=4294967296),s}function we(t,e){var r=te(t,e,28)^te(e,t,2)^te(e,t,7);return r<0&&(r+=4294967296),r}function be(t,e){var r=ee(t,e,28)^ee(e,t,2)^ee(e,t,7);return r<0&&(r+=4294967296),r}function Ee(t,e){var r=te(t,e,14)^te(t,e,18)^te(e,t,9);return r<0&&(r+=4294967296),r}function Ae(t,e){var r=ee(t,e,14)^ee(t,e,18)^ee(e,t,9);return r<0&&(r+=4294967296),r}function Se(t,e){var r=te(t,e,1)^te(t,e,8)^re(t,e,7);return r<0&&(r+=4294967296),r}function _e(t,e){var r=ee(t,e,1)^ee(t,e,8)^ne(t,e,7);return r<0&&(r+=4294967296),r}function ke(t,e){var r=te(t,e,19)^te(e,t,29)^re(t,e,6);return r<0&&(r+=4294967296),r}function Pe(t,e){var r=ee(t,e,19)^ee(e,t,29)^ne(t,e,6);return r<0&&(r+=4294967296),r}de.blockSize=1024,de.outSize=512,de.hmacStrength=192,de.padLength=128,de.prototype._prepareBlock=function(t,e){for(var r=this.W,n=0;n<32;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=ke(r[n-4],r[n-3]),o=Pe(r[n-4],r[n-3]),s=r[n-14],a=r[n-13],h=Se(r[n-30],r[n-29]),u=_e(r[n-30],r[n-29]),c=r[n-32],f=r[n-31];r[n]=ae(i,o,s,a,h,u,c,f),r[n+1]=he(i,o,s,a,h,u,c,f)}},de.prototype._update=function(t,e){this._prepareBlock(t,e);var r=this.W,n=this.h[0],i=this.h[1],o=this.h[2],s=this.h[3],a=this.h[4],h=this.h[5],u=this.h[6],c=this.h[7],f=this.h[8],l=this.h[9],d=this.h[10],p=this.h[11],m=this.h[12],g=this.h[13],y=this.h[14],v=this.h[15];Qt(this.k.length===r.length);for(var w=0;w<r.length;w+=2){var b=y,E=v,A=Ee(f,l),S=Ae(f,l),_=me(f,l,d,p,m),k=ge(f,l,d,p,m,g),P=this.k[w],x=this.k[w+1],M=r[w],I=r[w+1],R=ue(b,E,A,S,_,k,P,x,M,I),N=ce(b,E,A,S,_,k,P,x,M,I);b=we(n,i),E=be(n,i),A=ye(n,i,o,s,a),S=ve(n,i,o,s,a,h);var C=oe(b,E,A,S),T=se(b,E,A,S);y=m,v=g,m=d,g=p,d=f,p=l,f=oe(u,c,R,N),l=se(c,c,R,N),u=a,c=h,a=o,h=s,o=n,s=i,n=oe(R,N,C,T),i=se(R,N,C,T)}ie(this.h,0,n,i),ie(this.h,2,o,s),ie(this.h,4,a,h),ie(this.h,6,u,c),ie(this.h,8,f,l),ie(this.h,10,d,p),ie(this.h,12,m,g),ie(this.h,14,y,v)},de.prototype._digest=function(t){return"hex"===t?Zt.toHex32(this.h,"big"):Zt.split32(this.h,"big")};var xe=rt,Me=pe;function Ie(){if(!(this instanceof Ie))return new Ie;Me.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}xe.inherits(Ie,Me);var Re=Ie;Ie.blockSize=1024,Ie.outSize=384,Ie.hmacStrength=192,Ie.padLength=128,Ie.prototype._digest=function(t){return"hex"===t?xe.toHex32(this.h.slice(0,12),"big"):xe.split32(this.h.slice(0,12),"big")},dt.sha1=It,dt.sha224=Xt,dt.sha256=qt,dt.sha384=Re,dt.sha512=pe;var Ne={},Ce=rt,Te=ut,Oe=Ce.rotl32,Be=Ce.sum32,Fe=Ce.sum32_3,De=Ce.sum32_4,Ue=Te.BlockHash;function Le(){if(!(this instanceof Le))return new Le;Ue.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function He(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function ze(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function je(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}Ce.inherits(Le,Ue),Ne.ripemd160=Le,Le.blockSize=512,Le.outSize=160,Le.hmacStrength=192,Le.padLength=64,Le.prototype._update=function(t,e){for(var r=this.h[0],n=this.h[1],i=this.h[2],o=this.h[3],s=this.h[4],a=r,h=n,u=i,c=o,f=s,l=0;l<80;l++){var d=Be(Oe(De(r,He(l,n,i,o),t[Ke[l]+e],ze(l)),Je[l]),s);r=s,s=o,o=Oe(i,10),i=n,n=d,d=Be(Oe(De(a,He(79-l,h,u,c),t[We[l]+e],je(l)),qe[l]),f),a=f,f=c,c=Oe(u,10),u=h,h=d}d=Fe(this.h[1],i,c),this.h[1]=Fe(this.h[2],o,f),this.h[2]=Fe(this.h[3],s,a),this.h[3]=Fe(this.h[4],r,h),this.h[4]=Fe(this.h[0],n,u),this.h[0]=d},Le.prototype._digest=function(t){return"hex"===t?Ce.toHex32(this.h,"little"):Ce.split32(this.h,"little")};var Ke=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],We=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Je=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],qe=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Ge=rt,Ve=f;function $e(t,e,r){if(!(this instanceof $e))return new $e(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(Ge.toArray(e,r))}var Xe=$e;$e.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),Ve(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},$e.prototype.update=function(t,e){return this.inner.update(t,e),this},$e.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)},function(t){var e=et;e.utils=rt,e.common=ut,e.sha=dt,e.ripemd=Ne,e.hmac=Xe,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(),function(t){var e,r=tt,n=et,i=v,o=h.assert;function s(t){"short"===t.type?this.curve=new i.short(t):"edwards"===t.type?this.curve=new i.edwards(t):this.curve=new i.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function a(t,e){Object.defineProperty(r,t,{configurable:!0,enumerable:!0,get:function(){var n=new s(e);return Object.defineProperty(r,t,{configurable:!0,enumerable:!0,value:n}),n}})}r.PresetCurve=s,a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:n.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:n.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:n.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:n.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:n.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{e=require("./precomputed/secp256k1")}catch(t){e=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:n.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",e]})}();var Ze=et,Ye=d,Qe=f;function tr(t){if(!(this instanceof tr))return new tr(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Ye.toArray(t.entropy,t.entropyEnc||"hex"),r=Ye.toArray(t.nonce,t.nonceEnc||"hex"),n=Ye.toArray(t.pers,t.persEnc||"hex");Qe(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var er=tr;tr.prototype._init=function(t,e,r){var n=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},tr.prototype._hmac=function(){return new Ze.hmac(this.hash,this.K)},tr.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},tr.prototype.reseed=function(t,e,r,n){"string"!=typeof e&&(n=r,r=e,e=null),t=Ye.toArray(t,e),r=Ye.toArray(r,n),Qe(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1},tr.prototype.generate=function(t,e,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(n=r,r=e,e=null),r&&(r=Ye.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<t;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,t);return this._update(r),this._reseed++,Ye.encode(o,e)};var rr=u.exports,nr=h.assert;function ir(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var or=ir;ir.fromPublic=function(t,e,r){return e instanceof ir?e:new ir(t,{pub:e,pubEnc:r})},ir.fromPrivate=function(t,e,r){return e instanceof ir?e:new ir(t,{priv:e,privEnc:r})},ir.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},ir.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},ir.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},ir.prototype._importPrivate=function(t,e){this.priv=new rr(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},ir.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?nr(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||nr(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},ir.prototype.derive=function(t){return t.validate()||nr(t.validate(),"public point not validated"),t.mul(this.priv).getX()},ir.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)},ir.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},ir.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var sr=u.exports,ar=h,hr=ar.assert;function ur(t,e){if(t instanceof ur)return t;this._importDER(t,e)||(hr(t.r&&t.s,"Signature without r or s"),this.r=new sr(t.r,16),this.s=new sr(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var cr=ur;function fr(){this.place=0}function lr(t,e){var r=t[e.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,s=e.place;o<n;o++,s++)i<<=8,i|=t[s],i>>>=0;return!(i<=127)&&(e.place=s,i)}function dr(t){for(var e=0,r=t.length-1;!t[e]&&!(128&t[e+1])&&e<r;)e++;return 0===e?t:t.slice(e)}function pr(t,e){if(e<128)t.push(e);else{var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|r);--r;)t.push(e>>>(r<<3)&255);t.push(e)}}ur.prototype._importDER=function(t,e){t=ar.toArray(t,e);var r=new fr;if(48!==t[r.place++])return!1;var n=lr(t,r);if(!1===n)return!1;if(n+r.place!==t.length)return!1;if(2!==t[r.place++])return!1;var i=lr(t,r);if(!1===i)return!1;var o=t.slice(r.place,i+r.place);if(r.place+=i,2!==t[r.place++])return!1;var s=lr(t,r);if(!1===s)return!1;if(t.length!==s+r.place)return!1;var a=t.slice(r.place,s+r.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new sr(o),this.s=new sr(a),this.recoveryParam=null,!0},ur.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r)),e=dr(e),r=dr(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];pr(n,e.length),(n=n.concat(e)).push(2),pr(n,r.length);var i=n.concat(r),o=[48];return pr(o,i.length),o=o.concat(i),ar.encode(o,t)};var mr=u.exports,gr=er,yr=h,vr=tt,wr=m.exports,br=yr.assert,Er=or,Ar=cr;function Sr(t){if(!(this instanceof Sr))return new Sr(t);"string"==typeof t&&(br(Object.prototype.hasOwnProperty.call(vr,t),"Unknown curve "+t),t=vr[t]),t instanceof vr.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var _r=Sr;Sr.prototype.keyPair=function(t){return new Er(this,t)},Sr.prototype.keyFromPrivate=function(t,e){return Er.fromPrivate(this,t,e)},Sr.prototype.keyFromPublic=function(t,e){return Er.fromPublic(this,t,e)},Sr.prototype.genKeyPair=function(t){t||(t={});for(var e=new gr({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||wr(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new mr(2));;){var i=new mr(e.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},Sr.prototype._truncateToN=function(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},Sr.prototype.sign=function(t,e,r,n){"object"==typeof r&&(n=r,r=null),n||(n={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new mr(t,16));for(var i=this.n.byteLength(),o=e.getPrivate().toArray("be",i),s=t.toArray("be",i),a=new gr({hash:this.hash,entropy:o,nonce:s,pers:n.pers,persEnc:n.persEnc||"utf8"}),h=this.n.sub(new mr(1)),u=0;;u++){var c=n.k?n.k(u):new mr(a.generate(this.n.byteLength()));if(!((c=this._truncateToN(c,!0)).cmpn(1)<=0||c.cmp(h)>=0)){var f=this.g.mul(c);if(!f.isInfinity()){var l=f.getX(),d=l.umod(this.n);if(0!==d.cmpn(0)){var p=c.invm(this.n).mul(d.mul(e.getPrivate()).iadd(t));if(0!==(p=p.umod(this.n)).cmpn(0)){var m=(f.getY().isOdd()?1:0)|(0!==l.cmp(d)?2:0);return n.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),m^=1),new Ar({r:d,s:p,recoveryParam:m})}}}}}},Sr.prototype.verify=function(t,e,r,n){t=this._truncateToN(new mr(t,16)),r=this.keyFromPublic(r,n);var i=(e=new Ar(e,"hex")).r,o=e.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s,a=o.invm(this.n),h=a.mul(t).umod(this.n),u=a.mul(i).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(h,r.getPublic(),u)).isInfinity()&&s.eqXToP(i):!(s=this.g.mulAdd(h,r.getPublic(),u)).isInfinity()&&0===s.getX().umod(this.n).cmp(i)},Sr.prototype.recoverPubKey=function(t,e,r,n){br((3&r)===r,"The recovery param is more than two bits"),e=new Ar(e,n);var i=this.n,o=new mr(t),s=e.r,a=e.s,h=1&r,u=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");s=u?this.curve.pointFromX(s.add(this.curve.n),h):this.curve.pointFromX(s,h);var c=e.r.invm(i),f=i.sub(o).mul(c).umod(i),l=a.mul(c).umod(i);return this.g.mulAdd(f,s,l)},Sr.prototype.getKeyRecoveryParam=function(t,e,r,n){if(null!==(e=new Ar(e,n)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch(t){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var kr=h,Pr=kr.assert,xr=kr.parseBytes,Mr=kr.cachedProperty;function Ir(t,e){this.eddsa=t,this._secret=xr(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=xr(e.pub)}Ir.fromPublic=function(t,e){return e instanceof Ir?e:new Ir(t,{pub:e})},Ir.fromSecret=function(t,e){return e instanceof Ir?e:new Ir(t,{secret:e})},Ir.prototype.secret=function(){return this._secret},Mr(Ir,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),Mr(Ir,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),Mr(Ir,"privBytes",(function(){var t=this.eddsa,e=this.hash(),r=t.encodingLength-1,n=e.slice(0,t.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n})),Mr(Ir,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),Mr(Ir,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),Mr(Ir,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),Ir.prototype.sign=function(t){return Pr(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},Ir.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},Ir.prototype.getSecret=function(t){return Pr(this._secret,"KeyPair is public only"),kr.encode(this.secret(),t)},Ir.prototype.getPublic=function(t){return kr.encode(this.pubBytes(),t)};var Rr=Ir,Nr=u.exports,Cr=h,Tr=Cr.assert,Or=Cr.cachedProperty,Br=Cr.parseBytes;function Fr(t,e){this.eddsa=t,"object"!=typeof e&&(e=Br(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),Tr(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof Nr&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Or(Fr,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),Or(Fr,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),Or(Fr,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),Or(Fr,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),Fr.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},Fr.prototype.toHex=function(){return Cr.encode(this.toBytes(),"hex").toUpperCase()};var Dr=Fr,Ur=et,Lr=tt,Hr=h,zr=Hr.assert,jr=Hr.parseBytes,Kr=Rr,Wr=Dr;function Jr(t){if(zr("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof Jr))return new Jr(t);t=Lr[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=Ur.sha512}var qr=Jr;Jr.prototype.sign=function(t,e){t=jr(t);var r=this.keyFromSecret(e),n=this.hashInt(r.messagePrefix(),t),i=this.g.mul(n),o=this.encodePoint(i),s=this.hashInt(o,r.pubBytes(),t).mul(r.priv()),a=n.add(s).umod(this.curve.n);return this.makeSignature({R:i,S:a,Rencoded:o})},Jr.prototype.verify=function(t,e,r){t=jr(t),e=this.makeSignature(e);var n=this.keyFromPublic(r),i=this.hashInt(e.Rencoded(),n.pubBytes(),t),o=this.g.mul(e.S());return e.R().add(n.pub().mul(i)).eq(o)},Jr.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return Hr.intFromLE(t.digest()).umod(this.curve.n)},Jr.prototype.keyFromPublic=function(t){return Kr.fromPublic(this,t)},Jr.prototype.keyFromSecret=function(t){return Kr.fromSecret(this,t)},Jr.prototype.makeSignature=function(t){return t instanceof Wr?t:new Wr(this,t)},Jr.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},Jr.prototype.decodePoint=function(t){var e=(t=Hr.parseBytes(t)).length-1,r=t.slice(0,e).concat(-129&t[e]),n=0!=(128&t[e]),i=Hr.intFromLE(r);return this.curve.pointFromY(i,n)},Jr.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},Jr.prototype.decodeInt=function(t){return Hr.intFromLE(t)},Jr.prototype.isPoint=function(t){return t instanceof this.pointClass},function(t){var e=t;e.version=a,e.utils=h,e.rand=m.exports,e.curve=v,e.curves=tt,e.ec=_r,e.eddsa=qr}(s);class Gr extends Error{constructor(t,e){super(t),t instanceof Gr?(this.nrErrors=t.nrErrors,this.add(...e)):this.nrErrors=e}add(...t){t.forEach((t=>this.nrErrors.push(t)))}}async function Vr(r,o,a){const h=["ES256","ES384","ES512"];if(!h.includes(r))throw new Gr(new RangeError(`Invalid signature algorithm '${r}''. Allowed algorithms are ${h.toString()}`),["invalid algorithm"]);let u,c,f;switch(r){case"ES512":c="P-521",u=66;break;case"ES384":c="P-384",u=48;break;default:c="P-256",u=32}f=void 0!==o?"string"==typeof o?!0===a?e(o):new Uint8Array(n(o)):o:new Uint8Array(await i(u));const l=new s.ec("p"+c.substring(c.length-3)).keyFromPrivate(f),d=l.getPublic(),p=d.getX().toString("hex").padStart(2*u,"0"),m=d.getY().toString("hex").padStart(2*u,"0"),g=l.getPrivate("hex").padStart(2*u,"0"),y={kty:"EC",crv:c,x:t(n(p),!0,!1),y:t(n(m),!0,!1),d:t(n(g),!0,!1),alg:r},v={...y};return delete v.d,{publicJwk:v,privateJwk:y}}const $r=new TextEncoder,Xr=new TextDecoder;function Zr(...t){const e=t.reduce(((t,{length:e})=>t+e),0),r=new Uint8Array(e);let n=0;return t.forEach((t=>{r.set(t,n),n+=t.length})),r}function Yr(t,e,r){if(e<0||e>=4294967296)throw new RangeError(`value must be >= 0 and <= 4294967295. Received ${e}`);t.set([e>>>24,e>>>16,e>>>8,255&e],r)}function Qr(t){const e=Math.floor(t/4294967296),r=t%4294967296,n=new Uint8Array(8);return Yr(n,e,0),Yr(n,r,4),n}function tn(t){const e=new Uint8Array(4);return Yr(e,t),e}function en(t){return Zr(tn(t.length),t)}const rn=t=>(t=>{let e=t;"string"==typeof e&&(e=$r.encode(e));const r=[];for(let t=0;t<e.length;t+=32768)r.push(String.fromCharCode.apply(null,e.subarray(t,t+32768)));return btoa(r.join(""))})(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),nn=t=>{let e=t;e instanceof Uint8Array&&(e=Xr.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return(t=>new Uint8Array(atob(t).split("").map((t=>t.charCodeAt(0)))))(e)}catch(t){throw new TypeError("The input to be decoded is not correctly encoded.")}};class on extends Error{constructor(t){var e;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(e=Error.captureStackTrace)||void 0===e||e.call(Error,this,this.constructor)}static get code(){return"ERR_JOSE_GENERIC"}}class sn extends on{constructor(t,e="unspecified",r="unspecified"){super(t),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=e,this.reason=r}static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}}class an extends on{constructor(t,e="unspecified",r="unspecified"){super(t),this.code="ERR_JWT_EXPIRED",this.claim=e,this.reason=r}static get code(){return"ERR_JWT_EXPIRED"}}class hn extends on{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class un extends on{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class cn extends on{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class fn extends on{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class ln extends on{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class dn extends on{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class pn extends on{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}var mn=crypto;function gn(t){try{return null!=t&&"boolean"==typeof t.extractable&&"string"==typeof t.algorithm.name&&"string"==typeof t.type}catch(t){return!1}}var yn=mn.getRandomValues.bind(mn);function vn(t){switch(t){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new un(`Unsupported JWE Algorithm: ${t}`)}}var wn=t=>yn(new Uint8Array(vn(t)>>3));const bn=(t,e)=>{if(e.length<<3!==vn(t))throw new fn("Invalid Initialization Vector length")},En=(t,e)=>{if(t.length<<3!==e)throw new fn("Invalid Content Encryption Key length")};function An(){return"function"==typeof WebSocketPair}function Sn(){try{return void 0!==process.versions.node}catch(t){return!1}}function _n(t,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${t}`)}function kn(t,e){return t.name===e}function Pn(t){return parseInt(t.name.substr(4),10)}function xn(t,e){if(e.length&&!e.some((e=>t.usages.includes(e)))){let t="CryptoKey does not support this operation, its usages must include ";if(e.length>2){const r=e.pop();t+=`one of ${e.join(", ")}, or ${r}.`}else 2===e.length?t+=`one of ${e[0]} or ${e[1]}.`:t+=`${e[0]}.`;throw new TypeError(t)}}function Mn(t,e,...r){switch(e){case"HS256":case"HS384":case"HS512":{if(!kn(t.algorithm,"HMAC"))throw _n("HMAC");const r=parseInt(e.substr(2),10);if(Pn(t.algorithm.hash)!==r)throw _n(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!kn(t.algorithm,"RSASSA-PKCS1-v1_5"))throw _n("RSASSA-PKCS1-v1_5");const r=parseInt(e.substr(2),10);if(Pn(t.algorithm.hash)!==r)throw _n(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!kn(t.algorithm,"RSA-PSS"))throw _n("RSA-PSS");const r=parseInt(e.substr(2),10);if(Pn(t.algorithm.hash)!==r)throw _n(`SHA-${r}`,"algorithm.hash");break}case Sn()&&"EdDSA":if("NODE-ED25519"!==t.algorithm.name&&"NODE-ED448"!==t.algorithm.name)throw _n("NODE-ED25519 or NODE-ED448");break;case An()&&"EdDSA":if(!kn(t.algorithm,"NODE-ED25519"))throw _n("NODE-ED25519");break;case"ES256":case"ES384":case"ES512":{if(!kn(t.algorithm,"ECDSA"))throw _n("ECDSA");const r=function(t){switch(t){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}(e);if(t.algorithm.namedCurve!==r)throw _n(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}xn(t,r)}function In(t,e,...r){switch(e){case"A128GCM":case"A192GCM":case"A256GCM":{if(!kn(t.algorithm,"AES-GCM"))throw _n("AES-GCM");const r=parseInt(e.substr(1,3),10);if(t.algorithm.length!==r)throw _n(r,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!kn(t.algorithm,"AES-KW"))throw _n("AES-KW");const r=parseInt(e.substr(1,3),10);if(t.algorithm.length!==r)throw _n(r,"algorithm.length");break}case"ECDH-ES":if(!kn(t.algorithm,"ECDH"))throw _n("ECDH");break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!kn(t.algorithm,"PBKDF2"))throw _n("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!kn(t.algorithm,"RSA-OAEP"))throw _n("RSA-OAEP");const r=parseInt(e.substr(9),10)||1;if(Pn(t.algorithm.hash)!==r)throw _n(`SHA-${r}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}xn(t,r)}var Rn=(t,...e)=>{let r="Key must be ";if(e.length>2){const t=e.pop();r+=`one of type ${e.join(", ")}, or ${t}.`}else 2===e.length?r+=`one of type ${e[0]} or ${e[1]}.`:r+=`of type ${e[0]}.`;return null==t?r+=` Received ${t}`:"function"==typeof t&&t.name?r+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor&&t.constructor.name&&(r+=` Received an instance of ${t.constructor.name}`),r},Nn=t=>gn(t);const Cn=["CryptoKey"];async function Tn(t,e,r,n,i,o){if(!(e instanceof Uint8Array))throw new TypeError(Rn(e,"Uint8Array"));const s=parseInt(t.substr(1,3),10),a=await mn.subtle.importKey("raw",e.subarray(s>>3),"AES-CBC",!1,["decrypt"]),h=await mn.subtle.importKey("raw",e.subarray(0,s>>3),{hash:"SHA-"+(s<<1),name:"HMAC"},!1,["sign"]),u=Zr(o,n,r,Qr(o.length<<3)),c=new Uint8Array((await mn.subtle.sign("HMAC",h,u)).slice(0,s>>3));let f,l;try{f=((t,e)=>{if(!(t instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(e instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(t.length!==e.length)throw new TypeError("Input buffers must have the same length");const r=t.length;let n=0,i=-1;for(;++i<r;)n|=t[i]^e[i];return 0===n})(i,c)}catch(t){}if(!f)throw new cn;try{l=new Uint8Array(await mn.subtle.decrypt({iv:n,name:"AES-CBC"},a,r))}catch(t){}if(!l)throw new cn;return l}const On=async(t,e,r,n,i,o)=>{if(!(gn(e)||e instanceof Uint8Array))throw new TypeError(Rn(e,...Cn,"Uint8Array"));switch(bn(t,n),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return e instanceof Uint8Array&&En(e,parseInt(t.substr(-3),10)),Tn(t,e,r,n,i,o);case"A128GCM":case"A192GCM":case"A256GCM":return e instanceof Uint8Array&&En(e,parseInt(t.substr(1,3),10)),async function(t,e,r,n,i,o){let s;e instanceof Uint8Array?s=await mn.subtle.importKey("raw",e,"AES-GCM",!1,["decrypt"]):(In(e,t,"decrypt"),s=e);try{return new Uint8Array(await mn.subtle.decrypt({additionalData:o,iv:n,name:"AES-GCM",tagLength:128},s,Zr(r,i)))}catch(t){throw new cn}}(t,e,r,n,i,o);default:throw new un("Unsupported JWE Content Encryption Algorithm")}},Bn=async()=>{throw new un('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.')},Fn=async()=>{throw new un('JWE "zip" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.')},Dn=(...t)=>{const e=t.filter(Boolean);if(0===e.length||1===e.length)return!0;let r;for(const t of e){const e=Object.keys(t);if(r&&0!==r.size)for(const t of e){if(r.has(t))return!1;r.add(t)}else r=new Set(e)}return!0};function Un(t){if("object"!=typeof(e=t)||null===e||"[object Object]"!==Object.prototype.toString.call(t))return!1;var e;if(null===Object.getPrototypeOf(t))return!0;let r=t;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}const Ln=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function Hn(t,e){if(t.algorithm.length!==parseInt(e.substr(1,3),10))throw new TypeError(`Invalid key size for alg: ${e}`)}function zn(t,e,r){if(gn(t))return In(t,e,r),t;if(t instanceof Uint8Array)return mn.subtle.importKey("raw",t,"AES-KW",!0,[r]);throw new TypeError(Rn(t,...Cn,"Uint8Array"))}const jn=async(t,e,r)=>{const n=await zn(e,t,"wrapKey");Hn(n,t);const i=await mn.subtle.importKey("raw",r,...Ln);return new Uint8Array(await mn.subtle.wrapKey("raw",i,n,"AES-KW"))},Kn=async(t,e,r)=>{const n=await zn(e,t,"unwrapKey");Hn(n,t);const i=await mn.subtle.unwrapKey("raw",r,n,"AES-KW",...Ln);return new Uint8Array(await mn.subtle.exportKey("raw",i))},Wn=async(t,e)=>{const r=`SHA-${t.substr(-3)}`;return new Uint8Array(await mn.subtle.digest(r,e))},Jn=async(t,e,r,n,i=new Uint8Array(0),o=new Uint8Array(0))=>{if(!gn(t))throw new TypeError(Rn(t,...Cn));if(In(t,"ECDH-ES"),!gn(e))throw new TypeError(Rn(e,...Cn));In(e,"ECDH-ES","deriveBits","deriveKey");const s=Zr(en($r.encode(r)),en(i),en(o),tn(n));if(!e.usages.includes("deriveBits"))throw new TypeError('ECDH-ES private key "usages" must include "deriveBits"');const a=new Uint8Array(await mn.subtle.deriveBits({name:"ECDH",public:t},e,Math.ceil(parseInt(e.algorithm.namedCurve.substr(-3),10)/8)<<3));return async function(t,e,r,n){const i=Math.ceil((r>>3)/32);let o;for(let r=1;r<=i;r++){const i=new Uint8Array(4+e.length+n.length);i.set(tn(r)),i.set(e,4),i.set(n,4+e.length),o=o?Zr(o,await t("sha256",i)):await t("sha256",i)}return o=o.slice(0,r>>3),o}(Wn,a,n,s)},qn=t=>{if(!gn(t))throw new TypeError(Rn(t,...Cn));return["P-256","P-384","P-521"].includes(t.algorithm.namedCurve)};async function Gn(t,e,r,n){!function(t){if(!(t instanceof Uint8Array)||t.length<8)throw new fn("PBES2 Salt Input must be 8 or more octets")}(t);const i=function(t,e){return Zr($r.encode(t),new Uint8Array([0]),e)}(e,t),o=parseInt(e.substr(13,3),10),s={hash:`SHA-${e.substr(8,3)}`,iterations:r,name:"PBKDF2",salt:i},a={length:o,name:"AES-KW"},h=await function(t,e){if(t instanceof Uint8Array)return mn.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits"]);if(gn(t))return In(t,e,"deriveBits","deriveKey"),t;throw new TypeError(Rn(t,...Cn,"Uint8Array"))}(n,e);if(h.usages.includes("deriveBits"))return new Uint8Array(await mn.subtle.deriveBits(s,h,o));if(h.usages.includes("deriveKey"))return mn.subtle.deriveKey(s,h,a,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}function Vn(t){switch(t){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new un(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}var $n=(t,e)=>{if(t.startsWith("RS")||t.startsWith("PS")){const{modulusLength:r}=e.algorithm;if("number"!=typeof r||r<2048)throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}};function Xn(t){switch(t){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new un(`Unsupported JWE Algorithm: ${t}`)}}var Zn=t=>yn(new Uint8Array(Xn(t)>>3));var Yn=async t=>{var e,r;const{algorithm:n,keyUsages:i}=function(t){let e,r;switch(t.kty){case"oct":switch(t.alg){case"HS256":case"HS384":case"HS512":e={name:"HMAC",hash:`SHA-${t.alg.substr(-3)}`},r=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":throw new un(`${t.alg} keys cannot be imported as CryptoKey instances`);case"A128GCM":case"A192GCM":case"A256GCM":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":e={name:"AES-GCM"},r=["encrypt","decrypt"];break;case"A128KW":case"A192KW":case"A256KW":e={name:"AES-KW"},r=["wrapKey","unwrapKey"];break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":e={name:"PBKDF2"},r=["deriveBits"];break;default:throw new un('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(t.alg){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${t.alg.substr(-3)}`},r=t.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${t.alg.substr(-3)}`},r=t.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(t.alg.substr(-3),10)||1}`},r=t.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new un('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(t.alg){case"ES256":e={name:"ECDSA",namedCurve:"P-256"},r=t.d?["sign"]:["verify"];break;case"ES384":e={name:"ECDSA",namedCurve:"P-384"},r=t.d?["sign"]:["verify"];break;case"ES512":e={name:"ECDSA",namedCurve:"P-521"},r=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":e={name:"ECDH",namedCurve:t.crv},r=t.d?["deriveBits"]:[];break;default:throw new un('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case(An()||Sn())&&"OKP":if("EdDSA"!==t.alg)throw new un('Invalid or unsupported JWK "alg" (Algorithm) Parameter value');switch(t.crv){case"Ed25519":e={name:"NODE-ED25519",namedCurve:"NODE-ED25519"},r=t.d?["sign"]:["verify"];break;case Sn()&&"Ed448":e={name:"NODE-ED448",namedCurve:"NODE-ED448"},r=t.d?["sign"]:["verify"];break;default:throw new un('Invalid or unsupported JWK "crv" (Subtype of Key Pair) Parameter value')}break;default:throw new un('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:e,keyUsages:r}}(t),o=[n,null!==(e=t.ext)&&void 0!==e&&e,null!==(r=t.key_ops)&&void 0!==r?r:i];if("PBKDF2"===n.name)return mn.subtle.importKey("raw",nn(t.k),...o);const s={...t};return delete s.alg,mn.subtle.importKey("jwk",s,...o)};async function Qn(t,e,r){if(!Un(t))throw new TypeError("JWK must be an object");if(e||(e=t.alg),"string"!=typeof e||!e)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');switch(t.kty){case"oct":if("string"!=typeof t.k||!t.k)throw new TypeError('missing "k" (Key Value) Parameter value');return null!=r||(r=!0!==t.ext),r?Yn({...t,alg:e,ext:!1}):nn(t.k);case"RSA":if(void 0!==t.oth)throw new un('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Yn({...t,alg:e});default:throw new un('Unsupported "kty" (Key Type) Parameter value')}}const ti=(t,e,r)=>{t.startsWith("HS")||"dir"===t||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?(t=>{if(!(t instanceof Uint8Array)){if(!Nn(t))throw new TypeError(Rn(t,...Cn,"Uint8Array"));if("secret"!==t.type)throw new TypeError(`${Cn.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}})(e):((t,e)=>{if(!Nn(t))throw new TypeError(Rn(t,...Cn));if("secret"===t.type)throw new TypeError(`${Cn.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===e&&"public"===t.type)throw new TypeError(`${Cn.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===e&&"public"===t.type)throw new TypeError(`${Cn.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===e&&"private"===t.type)throw new TypeError(`${Cn.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===e&&"private"===t.type)throw new TypeError(`${Cn.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)})(e,r)};const ei=async(t,e,r,n,i)=>{if(!(gn(r)||r instanceof Uint8Array))throw new TypeError(Rn(r,...Cn,"Uint8Array"));switch(bn(t,n),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&En(r,parseInt(t.substr(-3),10)),async function(t,e,r,n,i){if(!(r instanceof Uint8Array))throw new TypeError(Rn(r,"Uint8Array"));const o=parseInt(t.substr(1,3),10),s=await mn.subtle.importKey("raw",r.subarray(o>>3),"AES-CBC",!1,["encrypt"]),a=await mn.subtle.importKey("raw",r.subarray(0,o>>3),{hash:"SHA-"+(o<<1),name:"HMAC"},!1,["sign"]),h=new Uint8Array(await mn.subtle.encrypt({iv:n,name:"AES-CBC"},s,e)),u=Zr(i,n,h,Qr(i.length<<3));return{ciphertext:h,tag:new Uint8Array((await mn.subtle.sign("HMAC",a,u)).slice(0,o>>3))}}(t,e,r,n,i);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&En(r,parseInt(t.substr(1,3),10)),async function(t,e,r,n,i){let o;r instanceof Uint8Array?o=await mn.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(In(r,t,"encrypt"),o=r);const s=new Uint8Array(await mn.subtle.encrypt({additionalData:i,iv:n,name:"AES-GCM",tagLength:128},o,e)),a=s.slice(-16);return{ciphertext:s.slice(0,-16),tag:a}}(t,e,r,n,i);default:throw new un("Unsupported JWE Content Encryption Algorithm")}};async function ri(t,e,r,n){switch(ti(t,e,"decrypt"),t){case"dir":if(void 0!==r)throw new fn("Encountered unexpected JWE Encrypted Key");return e;case"ECDH-ES":if(void 0!==r)throw new fn("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!Un(n.epk))throw new fn('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!qn(e))throw new un("ECDH-ES with the provided key is not allowed or not supported by your javascript runtime");const i=await Qn(n.epk,t);let o,s;if(void 0!==n.apu){if("string"!=typeof n.apu)throw new fn('JOSE Header "apu" (Agreement PartyUInfo) invalid');o=nn(n.apu)}if(void 0!==n.apv){if("string"!=typeof n.apv)throw new fn('JOSE Header "apv" (Agreement PartyVInfo) invalid');s=nn(n.apv)}const a=await Jn(i,e,"ECDH-ES"===t?n.enc:t,"ECDH-ES"===t?Xn(n.enc):parseInt(t.substr(-5,3),10),o,s);if("ECDH-ES"===t)return a;if(void 0===r)throw new fn("JWE Encrypted Key missing");return Kn(t.substr(-6),a,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new fn("JWE Encrypted Key missing");return(async(t,e,r)=>{if(!gn(e))throw new TypeError(Rn(e,...Cn));if(In(e,t,"decrypt","unwrapKey"),$n(t,e),e.usages.includes("decrypt"))return new Uint8Array(await mn.subtle.decrypt(Vn(t),e,r));if(e.usages.includes("unwrapKey")){const n=await mn.subtle.unwrapKey("raw",r,e,Vn(t),...Ln);return new Uint8Array(await mn.subtle.exportKey("raw",n))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')})(t,e,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(void 0===r)throw new fn("JWE Encrypted Key missing");if("number"!=typeof n.p2c)throw new fn('JOSE Header "p2c" (PBES2 Count) missing or invalid');if("string"!=typeof n.p2s)throw new fn('JOSE Header "p2s" (PBES2 Salt) missing or invalid');return(async(t,e,r,n,i)=>{const o=await Gn(i,t,n,e);return Kn(t.substr(-6),o,r)})(t,e,r,n.p2c,nn(n.p2s));case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new fn("JWE Encrypted Key missing");return Kn(t,e,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":if(void 0===r)throw new fn("JWE Encrypted Key missing");if("string"!=typeof n.iv)throw new fn('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof n.tag)throw new fn('JOSE Header "tag" (Authentication Tag) missing or invalid');return async function(t,e,r,n,i){const o=t.substr(0,7);return On(o,e,r,n,i,new Uint8Array(0))}(t,e,r,nn(n.iv),nn(n.tag));default:throw new un('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function ni(t,e,r,n,i){if(void 0!==i.crit&&void 0===n.crit)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some((t=>"string"!=typeof t||0===t.length)))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let o;o=void 0!==r?new Map([...Object.entries(r),...e.entries()]):e;for(const e of n.crit){if(!o.has(e))throw new un(`Extension Header Parameter "${e}" is not recognized`);if(void 0===i[e])throw new t(`Extension Header Parameter "${e}" is missing`);if(o.get(e)&&void 0===n[e])throw new t(`Extension Header Parameter "${e}" MUST be integrity protected`)}return new Set(n.crit)}const ii=(t,e)=>{if(void 0!==e&&(!Array.isArray(e)||e.some((t=>"string"!=typeof t))))throw new TypeError(`"${t}" option must be an array of strings`);if(e)return new Set(e)};async function oi(t,e,r){var n;if(!Un(t))throw new fn("Flattened JWE must be an object");if(void 0===t.protected&&void 0===t.header&&void 0===t.unprotected)throw new fn("JOSE Header missing");if("string"!=typeof t.iv)throw new fn("JWE Initialization Vector missing or incorrect type");if("string"!=typeof t.ciphertext)throw new fn("JWE Ciphertext missing or incorrect type");if("string"!=typeof t.tag)throw new fn("JWE Authentication Tag missing or incorrect type");if(void 0!==t.protected&&"string"!=typeof t.protected)throw new fn("JWE Protected Header incorrect type");if(void 0!==t.encrypted_key&&"string"!=typeof t.encrypted_key)throw new fn("JWE Encrypted Key incorrect type");if(void 0!==t.aad&&"string"!=typeof t.aad)throw new fn("JWE AAD incorrect type");if(void 0!==t.header&&!Un(t.header))throw new fn("JWE Shared Unprotected Header incorrect type");if(void 0!==t.unprotected&&!Un(t.unprotected))throw new fn("JWE Per-Recipient Unprotected Header incorrect type");let i;if(t.protected){const e=nn(t.protected);try{i=JSON.parse(Xr.decode(e))}catch(t){throw new fn("JWE Protected Header is invalid")}}if(!Dn(i,t.header,t.unprotected))throw new fn("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const o={...i,...t.header,...t.unprotected};if(ni(fn,new Map,null==r?void 0:r.crit,i,o),void 0!==o.zip){if(!i||!i.zip)throw new fn('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==o.zip)throw new un('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:s,enc:a}=o;if("string"!=typeof s||!s)throw new fn("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof a||!a)throw new fn("missing JWE Encryption Algorithm (enc) in JWE Header");const h=r&&ii("keyManagementAlgorithms",r.keyManagementAlgorithms),u=r&&ii("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(h&&!h.has(s))throw new hn('"alg" (Algorithm) Header Parameter not allowed');if(u&&!u.has(a))throw new hn('"enc" (Encryption Algorithm) Header Parameter not allowed');let c;void 0!==t.encrypted_key&&(c=nn(t.encrypted_key));let f,l=!1;"function"==typeof e&&(e=await e(i,t),l=!0);try{f=await ri(s,e,c,o)}catch(t){if(t instanceof TypeError)throw t;f=Zn(a)}const d=nn(t.iv),p=nn(t.tag),m=$r.encode(null!==(n=t.protected)&&void 0!==n?n:"");let g;g=void 0!==t.aad?Zr(m,$r.encode("."),$r.encode(t.aad)):m;let y=await On(a,f,nn(t.ciphertext),d,p,g);"DEF"===o.zip&&(y=await((null==r?void 0:r.inflateRaw)||Bn)(y));const v={plaintext:y};return void 0!==t.protected&&(v.protectedHeader=i),void 0!==t.aad&&(v.additionalAuthenticatedData=nn(t.aad)),void 0!==t.unprotected&&(v.sharedUnprotectedHeader=t.unprotected),void 0!==t.header&&(v.unprotectedHeader=t.header),l?{...v,key:e}:v}var si=async t=>{if(t instanceof Uint8Array)return{kty:"oct",k:rn(t)};if(!gn(t))throw new TypeError(Rn(t,...Cn,"Uint8Array"));if(!t.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:e,key_ops:r,alg:n,use:i,...o}=await mn.subtle.exportKey("jwk",t);return o};async function ai(t){return si(t)}async function hi(t,e,r,n,i={}){let o,s,a;switch(ti(t,r,"encrypt"),t){case"dir":a=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!qn(r))throw new un("ECDH-ES with the provided key is not allowed or not supported by your javascript runtime");const{apu:h,apv:u}=i;let{epk:c}=i;c||(c=await(async t=>{if(!gn(t))throw new TypeError(Rn(t,...Cn));return(await mn.subtle.generateKey({name:"ECDH",namedCurve:t.algorithm.namedCurve},!0,["deriveBits"])).privateKey})(r));const{x:f,y:l,crv:d,kty:p}=await ai(c),m=await Jn(r,c,"ECDH-ES"===t?e:t,"ECDH-ES"===t?Xn(e):parseInt(t.substr(-5,3),10),h,u);if(s={epk:{x:f,y:l,crv:d,kty:p}},h&&(s.apu=rn(h)),u&&(s.apv=rn(u)),"ECDH-ES"===t){a=m;break}a=n||Zn(e);const g=t.substr(-6);o=await jn(g,m,a);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":a=n||Zn(e),o=await(async(t,e,r)=>{if(!gn(e))throw new TypeError(Rn(e,...Cn));if(In(e,t,"encrypt","wrapKey"),$n(t,e),e.usages.includes("encrypt"))return new Uint8Array(await mn.subtle.encrypt(Vn(t),e,r));if(e.usages.includes("wrapKey")){const n=await mn.subtle.importKey("raw",r,...Ln);return new Uint8Array(await mn.subtle.wrapKey("raw",n,e,Vn(t)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')})(t,r,a);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{a=n||Zn(e);const{p2c:h,p2s:u}=i;({encryptedKey:o,...s}=await(async(t,e,r,n=Math.floor(2049*Math.random())+2048,i=yn(new Uint8Array(16)))=>{const o=await Gn(i,t,n,e);return{encryptedKey:await jn(t.substr(-6),o,r),p2c:n,p2s:rn(i)}})(t,r,a,h,u));break}case"A128KW":case"A192KW":case"A256KW":a=n||Zn(e),o=await jn(t,r,a);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{a=n||Zn(e);const{iv:h}=i;({encryptedKey:o,...s}=await async function(t,e,r,n){const i=t.substr(0,7);n||(n=wn(i));const{ciphertext:o,tag:s}=await ei(i,r,e,n,new Uint8Array(0));return{encryptedKey:o,iv:rn(n),tag:rn(s)}}(t,r,a,h));break}default:throw new un('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:a,encryptedKey:o,parameters:s}}const ui=Symbol();class ci{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=t}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}async encrypt(t,e){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new fn("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!Dn(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new fn("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const r={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(ni(fn,new Map,null==e?void 0:e.crit,this._protectedHeader,r),void 0!==r.zip){if(!this._protectedHeader||!this._protectedHeader.zip)throw new fn('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==r.zip)throw new un('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}const{alg:n,enc:i}=r;if("string"!=typeof n||!n)throw new fn('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof i||!i)throw new fn('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let o,s,a,h,u,c,f;if("dir"===n){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if("ECDH-ES"===n&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");{let r;({cek:s,encryptedKey:o,parameters:r}=await hi(n,i,t,this._cek,this._keyManagementParameters)),r&&(e&&ui in e?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...r}:this.setUnprotectedHeader(r):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...r}:this.setProtectedHeader(r))}if(this._iv||(this._iv=wn(i)),h=this._protectedHeader?$r.encode(rn(JSON.stringify(this._protectedHeader))):$r.encode(""),this._aad?(u=rn(this._aad),a=Zr(h,$r.encode("."),$r.encode(u))):a=h,"DEF"===r.zip){const t=await((null==e?void 0:e.deflateRaw)||Fn)(this._plaintext);({ciphertext:c,tag:f}=await ei(i,t,s,this._iv,a))}else({ciphertext:c,tag:f}=await ei(i,this._plaintext,s,this._iv,a));const l={ciphertext:rn(c),iv:rn(this._iv),tag:rn(f)};return o&&(l.encrypted_key=rn(o)),u&&(l.aad=u),this._protectedHeader&&(l.protected=Xr.decode(h)),this._sharedUnprotectedHeader&&(l.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(l.header=this._unprotectedHeader),l}}function fi(t,e){const r=parseInt(t.substr(-3),10);switch(t){case"HS256":case"HS384":case"HS512":return{hash:`SHA-${r}`,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:`SHA-${r}`,name:"RSA-PSS",saltLength:r>>3};case"RS256":case"RS384":case"RS512":return{hash:`SHA-${r}`,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:`SHA-${r}`,name:"ECDSA",namedCurve:e};case(An()||Sn())&&"EdDSA":return{name:e,namedCurve:e};default:throw new un(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}function li(t,e,r){if(gn(e))return Mn(e,t,r),e;if(e instanceof Uint8Array){if(!t.startsWith("HS"))throw new TypeError(Rn(e,...Cn));return mn.subtle.importKey("raw",e,{hash:`SHA-${t.substr(-3)}`,name:"HMAC"},!1,[r])}throw new TypeError(Rn(e,...Cn,"Uint8Array"))}async function di(t,e,r){var n;if(!Un(t))throw new ln("Flattened JWS must be an object");if(void 0===t.protected&&void 0===t.header)throw new ln('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==t.protected&&"string"!=typeof t.protected)throw new ln("JWS Protected Header incorrect type");if(void 0===t.payload)throw new ln("JWS Payload missing");if("string"!=typeof t.signature)throw new ln("JWS Signature missing or incorrect type");if(void 0!==t.header&&!Un(t.header))throw new ln("JWS Unprotected Header incorrect type");let i={};if(t.protected){const e=nn(t.protected);try{i=JSON.parse(Xr.decode(e))}catch(t){throw new ln("JWS Protected Header is invalid")}}if(!Dn(i,t.header))throw new ln("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const o={...i,...t.header};let s=!0;if(ni(ln,new Map([["b64",!0]]),null==r?void 0:r.crit,i,o).has("b64")&&(s=i.b64,"boolean"!=typeof s))throw new ln('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:a}=o;if("string"!=typeof a||!a)throw new ln('JWS "alg" (Algorithm) Header Parameter missing or invalid');const h=r&&ii("algorithms",r.algorithms);if(h&&!h.has(a))throw new hn('"alg" (Algorithm) Header Parameter not allowed');if(s){if("string"!=typeof t.payload)throw new ln("JWS Payload must be a string")}else if("string"!=typeof t.payload&&!(t.payload instanceof Uint8Array))throw new ln("JWS Payload must be a string or an Uint8Array instance");let u=!1;"function"==typeof e&&(e=await e(i,t),u=!0),ti(a,e,"verify");const c=Zr($r.encode(null!==(n=t.protected)&&void 0!==n?n:""),$r.encode("."),"string"==typeof t.payload?$r.encode(t.payload):t.payload),f=nn(t.signature),l=await(async(t,e,r,n)=>{const i=await li(t,e,"verify");$n(t,i);const o=fi(t,i.algorithm.namedCurve);try{return await mn.subtle.verify(o,i,r,n)}catch(t){return!1}})(a,e,f,c);if(!l)throw new pn;let d;d=s?nn(t.payload):"string"==typeof t.payload?$r.encode(t.payload):t.payload;const p={payload:d};return void 0!==t.protected&&(p.protectedHeader=i),void 0!==t.header&&(p.unprotectedHeader=t.header),u?{...p,key:e}:p}var pi=t=>Math.floor(t.getTime()/1e3);const mi=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;var gi=t=>{const e=mi.exec(t);if(!e)throw new TypeError("Invalid time period format");const r=parseFloat(e[1]);switch(e[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(r);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*r);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*r);case"day":case"days":case"d":return Math.round(86400*r);case"week":case"weeks":case"w":return Math.round(604800*r);default:return Math.round(31557600*r)}};const yi=t=>t.toLowerCase().replace(/^application\//,"");var vi=(t,e,r={})=>{const{typ:n}=r;if(n&&("string"!=typeof t.typ||yi(t.typ)!==yi(n)))throw new sn('unexpected "typ" JWT header value',"typ","check_failed");let i;try{i=JSON.parse(Xr.decode(e))}catch(t){}if(!Un(i))throw new dn("JWT Claims Set must be a top-level JSON object");const{issuer:o}=r;if(o&&!(Array.isArray(o)?o:[o]).includes(i.iss))throw new sn('unexpected "iss" claim value',"iss","check_failed");const{subject:s}=r;if(s&&i.sub!==s)throw new sn('unexpected "sub" claim value',"sub","check_failed");const{audience:a}=r;if(a&&(h=i.aud,u="string"==typeof a?[a]:a,!("string"==typeof h?u.includes(h):Array.isArray(h)&&u.some(Set.prototype.has.bind(new Set(h))))))throw new sn('unexpected "aud" claim value',"aud","check_failed");var h,u;let c;switch(typeof r.clockTolerance){case"string":c=gi(r.clockTolerance);break;case"number":c=r.clockTolerance;break;case"undefined":c=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:f}=r,l=pi(f||new Date);if(void 0!==i.iat||r.maxTokenAge){if("number"!=typeof i.iat)throw new sn('"iat" claim must be a number',"iat","invalid");if(void 0===i.exp&&i.iat>l+c)throw new sn('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}if(void 0!==i.nbf){if("number"!=typeof i.nbf)throw new sn('"nbf" claim must be a number',"nbf","invalid");if(i.nbf>l+c)throw new sn('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==i.exp){if("number"!=typeof i.exp)throw new sn('"exp" claim must be a number',"exp","invalid");if(i.exp<=l-c)throw new an('"exp" claim timestamp check failed',"exp","check_failed")}if(r.maxTokenAge){const t=l-i.iat;if(t-c>("number"==typeof r.maxTokenAge?r.maxTokenAge:gi(r.maxTokenAge)))throw new an('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(t<0-c)throw new sn('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return i};async function wi(t,e,r){var n;const i=await async function(t,e,r){if(t instanceof Uint8Array&&(t=Xr.decode(t)),"string"!=typeof t)throw new ln("Compact JWS must be a string or Uint8Array");const{0:n,1:i,2:o,length:s}=t.split(".");if(3!==s)throw new ln("Invalid Compact JWS");const a=await di({payload:i,protected:n,signature:o},e,r),h={payload:a.payload,protectedHeader:a.protectedHeader};return"function"==typeof e?{...h,key:a.key}:h}(t,e,r);if((null===(n=i.protectedHeader.crit)||void 0===n?void 0:n.includes("b64"))&&!1===i.protectedHeader.b64)throw new dn("JWTs MUST NOT use unencoded payload");const o={payload:vi(i.protectedHeader,i.payload,r),protectedHeader:i.protectedHeader};return"function"==typeof e?{...o,key:i.key}:o}class bi{constructor(t){this._flattened=new ci(t)}setContentEncryptionKey(t){return this._flattened.setContentEncryptionKey(t),this}setInitializationVector(t){return this._flattened.setInitializationVector(t),this}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}setKeyManagementParameters(t){return this._flattened.setKeyManagementParameters(t),this}async encrypt(t,e){const r=await this._flattened.encrypt(t,e);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}class Ei{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,e){if(!this._protectedHeader&&!this._unprotectedHeader)throw new ln("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Dn(this._protectedHeader,this._unprotectedHeader))throw new ln("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const r={...this._protectedHeader,...this._unprotectedHeader};let n=!0;if(ni(ln,new Map([["b64",!0]]),null==e?void 0:e.crit,this._protectedHeader,r).has("b64")&&(n=this._protectedHeader.b64,"boolean"!=typeof n))throw new ln('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:i}=r;if("string"!=typeof i||!i)throw new ln('JWS "alg" (Algorithm) Header Parameter missing or invalid');ti(i,t,"sign");let o,s=this._payload;n&&(s=$r.encode(rn(s))),o=this._protectedHeader?$r.encode(rn(JSON.stringify(this._protectedHeader))):$r.encode("");const a=Zr(o,$r.encode("."),s),h=await(async(t,e,r)=>{const n=await li(t,e,"sign");$n(t,n);const i=await mn.subtle.sign(fi(t,n.algorithm.namedCurve),n,r);return new Uint8Array(i)})(i,t,a),u={signature:rn(h),payload:""};return n&&(u.payload=Xr.decode(s)),this._unprotectedHeader&&(u.header=this._unprotectedHeader),this._protectedHeader&&(u.protected=Xr.decode(o)),u}}class Ai{constructor(t){this._flattened=new Ei(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,e){const r=await this._flattened.sign(t,e);if(void 0===r.payload)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}class Si{constructor(t,e,r){this.parent=t,this.key=e,this.options=r}setProtectedHeader(t){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=t,this}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addSignature(...t){return this.parent.addSignature(...t)}sign(...t){return this.parent.sign(...t)}done(){return this.parent}}class _i{constructor(t){this._signatures=[],this._payload=t}addSignature(t,e){const r=new Si(this,t,e);return this._signatures.push(r),r}async sign(){if(!this._signatures.length)throw new ln("at least one signature must be added");const t={signatures:[],payload:""};for(let e=0;e<this._signatures.length;e++){const r=this._signatures[e],n=new Ei(this._payload);n.setProtectedHeader(r.protectedHeader),n.setUnprotectedHeader(r.unprotectedHeader);const{payload:i,...o}=await n.sign(r.key,r.options);if(0===e)t.payload=i;else if(t.payload!==i)throw new ln("inconsistent use of JWS Unencoded Payload Option (RFC7797)");t.signatures.push(o)}return t}}class ki extends class{constructor(t){if(!Un(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return this._payload="number"==typeof t?{...this._payload,nbf:t}:{...this._payload,nbf:pi(new Date)+gi(t)},this}setExpirationTime(t){return this._payload="number"==typeof t?{...this._payload,exp:t}:{...this._payload,exp:pi(new Date)+gi(t)},this}setIssuedAt(t){return this._payload=void 0===t?{...this._payload,iat:pi(new Date)}:{...this._payload,iat:t},this}}{setProtectedHeader(t){return this._protectedHeader=t,this}async sign(t,e){var r;const n=new Ai($r.encode(JSON.stringify(this._payload)));if(n.setProtectedHeader(this._protectedHeader),Array.isArray(null===(r=this._protectedHeader)||void 0===r?void 0:r.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new dn("JWTs MUST NOT use unencoded payload");return n.sign(t,e)}}async function Pi(t,e){return async function(t,e){var r;let n,i,o;switch(t){case"HS256":case"HS384":case"HS512":n=parseInt(t.substr(-3),10),i={name:"HMAC",hash:`SHA-${n}`,length:n},o=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return n=parseInt(t.substr(-3),10),yn(new Uint8Array(n>>3));case"A128KW":case"A192KW":case"A256KW":n=parseInt(t.substring(1,4),10),i={name:"AES-KW",length:n},o=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":n=parseInt(t.substring(1,4),10),i={name:"AES-GCM",length:n},o=["encrypt","decrypt"];break;default:throw new un('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return mn.subtle.generateKey(i,null!==(r=null==e?void 0:e.extractable)&&void 0!==r&&r,o)}(t,e)}async function xi(t,e){try{return await Qn(t,e)}catch(t){throw new Gr(t,["invalid key"])}}async function Mi(t,e,r){const n=await xi(e);let i;try{return i=await new bi(t).setProtectedHeader({alg:"dir",enc:r,kid:e.kid}).encrypt(n),i}catch(t){throw new Gr(t,["encryption failed"])}}async function Ii(t,e,r="A256GCM"){const n=await xi(e);try{return await async function(t,e,r){if(t instanceof Uint8Array&&(t=Xr.decode(t)),"string"!=typeof t)throw new fn("Compact JWE must be a string or Uint8Array");const{0:n,1:i,2:o,3:s,4:a,length:h}=t.split(".");if(5!==h)throw new fn("Invalid Compact JWE");const u=await oi({ciphertext:s||void 0,iv:o||void 0,protected:n||void 0,tag:a||void 0,encrypted_key:i||void 0},e,r),c={plaintext:u.plaintext,protectedHeader:u.protectedHeader};return"function"==typeof e?{...c,key:u.key}:c}(t,n,{contentEncryptionAlgorithms:[r]})}catch(t){throw new Gr(t,["decryption failed"])}}async function Ri(t,r){const n=t.match(/^([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)$/);if(null===n)throw new Gr(new Error(`${t} is not a JWS`),["not a compact jws"]);let i,o;try{i=JSON.parse(e(n[1],!0)),o=JSON.parse(e(n[2],!0))}catch(t){throw new Gr(t,["invalid format","not a compact jws"])}if(void 0!==r){const e="function"==typeof r?await r(i,o):r,n=await xi(e);try{const r=await wi(t,n);return{header:r.protectedHeader,payload:r.payload,signer:e}}catch(t){throw new Gr(t,["jws verification failed"])}}return{header:i,payload:o}}async function Ni(t,i,o){let s,a;switch(t){case"A128GCM":a=16;break;case"A256GCM":a=32;break;default:throw new Gr(new Error(`Invalid encAlg '${t}'. Supported values are: ${["A128GCM","A256GCM"].toString()}`),["invalid algorithm"])}if(void 0!==i){if(s="string"==typeof i?!0===o?e(i):new Uint8Array(n(i)):i,s.length!==a)throw new Gr(new RangeError(`Expected secret length ${a} does not meet provided one ${s.length}`),["invalid key"])}else try{s=await Pi(t,{extractable:!0})}catch(t){throw new Gr(t,["unexpected error"])}const h=await ai(s);return h.alg=t,{jwk:h,hex:r(e(h.k))}}async function Ci(t,e){if(void 0===t.alg||void 0===e.alg||t.alg!==e.alg)throw new Error("alg no present in either pubJwk or privJwk, or pubJWK.alg != privJWK.alg");const r=await xi(t),n=await xi(e);try{const t=await i(16),o=await new _i(t).addSignature(n).setProtectedHeader({alg:e.alg}).sign();await async function(t,e,r){if(!Un(t))throw new ln("General JWS must be an object");if(!Array.isArray(t.signatures)||!t.signatures.every(Un))throw new ln("JWS Signatures missing or incorrect type");for(const n of t.signatures)try{return await di({header:n.header,payload:t.payload,protected:n.protected,signature:n.signature},e,r)}catch(t){}throw new pn}(o,r)}catch(t){throw new Gr(t,["unexpected error"])}}const Ti={gasLimit:125e5,rpcProviderUrl:"***REMOVED***",disable:!1,contract:{address:"0x8d407A1722633bDD1dcf221474be7a44C05d7c2F",abi:[{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"dataExchangeId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"},{indexed:!1,internalType:"uint256",name:"secret",type:"uint256"}],name:"Registration",type:"event"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"registry",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"uint256",name:"secret",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_dataExchangeId",type:"uint256"},{internalType:"uint256",name:"_secret",type:"uint256"}],name:"setRegistry",outputs:[],stateMutability:"nonpayable",type:"function"}],transactionHash:"0x6a3828f8fe232819dc40ca66f93930b3bd1619db31a67ec34b44446b3e7c8289",receipt:{to:null,from:"0x17bd12C2134AfC1f6E9302a532eFE30C19B9E903",contractAddress:"0x8d407A1722633bDD1dcf221474be7a44C05d7c2F",transactionIndex:0,gasUsed:"253928",logsBloom:"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",blockHash:"0x0118672bb9b27679e616831d056d36291dd20cfe88c3ee2abd8f2dfce579cad4",transactionHash:"0x6a3828f8fe232819dc40ca66f93930b3bd1619db31a67ec34b44446b3e7c8289",logs:[],blockNumber:119389,cumulativeGasUsed:"253928",status:1,byzantium:!0},args:[],solcInputHash:"c528a37588793ef74285d75e08d6b8eb",metadata:'{"compiler":{"version":"0.8.4+commit.c7e474f2"},"language":"Solidity","output":{"abi":[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"uint256","name":"dataExchangeId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"secret","type":"uint256"}],"name":"Registration","type":"event"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"registry","outputs":[{"internalType":"uint256","name":"timestamp","type":"uint256"},{"internalType":"uint256","name":"secret","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_dataExchangeId","type":"uint256"},{"internalType":"uint256","name":"_secret","type":"uint256"}],"name":"setRegistry","outputs":[],"stateMutability":"nonpayable","type":"function"}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"compilationTarget":{"contracts/NonRepudiation.sol":"NonRepudiation"},"evmVersion":"istanbul","libraries":{},"metadata":{"bytecodeHash":"ipfs","useLiteralContent":true},"optimizer":{"enabled":false,"runs":200},"remappings":[]},"sources":{"contracts/NonRepudiation.sol":{"content":"//SPDX-License-Identifier: Unlicense\\npragma solidity ^0.8.0;\\n\\ncontract NonRepudiation {\\n    struct Proof {\\n        uint256 timestamp;\\n        uint256 secret;\\n    }\\n    mapping(address => mapping (uint256 => Proof)) public registry;\\n    event Registration(address sender, uint256 dataExchangeId, uint256 timestamp, uint256 secret);\\n\\n    function setRegistry(uint256 _dataExchangeId, uint256 _secret) public {\\n        require(registry[msg.sender][_dataExchangeId].secret == 0);\\n        registry[msg.sender][_dataExchangeId] = Proof(block.timestamp, _secret);\\n        emit Registration(msg.sender, _dataExchangeId, block.timestamp, _secret);\\n    }\\n}\\n","keccak256":"0x8d371257a9b03c9102f158323e61f56ce49dd8489bd92c5a7d8abc3d9f6f8399","license":"Unlicense"}},"version":1}',bytecode:"0x608060405234801561001057600080fd5b506103a2806100206000396000f3fe608060405234801561001057600080fd5b50600436106100365760003560e01c8063032439371461003b578063d05cb54514610057575b600080fd5b6100556004803603810190610050919061023a565b610088565b005b610071600480360381019061006c91906101fe565b6101a3565b60405161007f9291906102d9565b60405180910390f35b60008060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600084815260200190815260200160002060010154146100e757600080fd5b6040518060400160405280428152602001828152506000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600084815260200190815260200160002060008201518160000155602082015181600101559050507faa58599838af2e5e0f3251cfbb4eac5d5d447ded49f6b0ac28d6b44098224e63338342846040516101979493929190610294565b60405180910390a15050565b6000602052816000526040600020602052806000526040600020600091509150508060000154908060010154905082565b6000813590506101e38161033e565b92915050565b6000813590506101f881610355565b92915050565b6000806040838503121561021157600080fd5b600061021f858286016101d4565b9250506020610230858286016101e9565b9150509250929050565b6000806040838503121561024d57600080fd5b600061025b858286016101e9565b925050602061026c858286016101e9565b9150509250929050565b61027f81610302565b82525050565b61028e81610334565b82525050565b60006080820190506102a96000830187610276565b6102b66020830186610285565b6102c36040830185610285565b6102d06060830184610285565b95945050505050565b60006040820190506102ee6000830185610285565b6102fb6020830184610285565b9392505050565b600061030d82610314565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b61034781610302565b811461035257600080fd5b50565b61035e81610334565b811461036957600080fd5b5056fea26469706673582212204fd0fc653fb487221da9a14a4ca5d5499f9e9bc7b27ac8ab0f8d397fd6e3148564736f6c63430008040033",deployedBytecode:"0x608060405234801561001057600080fd5b50600436106100365760003560e01c8063032439371461003b578063d05cb54514610057575b600080fd5b6100556004803603810190610050919061023a565b610088565b005b610071600480360381019061006c91906101fe565b6101a3565b60405161007f9291906102d9565b60405180910390f35b60008060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600084815260200190815260200160002060010154146100e757600080fd5b6040518060400160405280428152602001828152506000803373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600084815260200190815260200160002060008201518160000155602082015181600101559050507faa58599838af2e5e0f3251cfbb4eac5d5d447ded49f6b0ac28d6b44098224e63338342846040516101979493929190610294565b60405180910390a15050565b6000602052816000526040600020602052806000526040600020600091509150508060000154908060010154905082565b6000813590506101e38161033e565b92915050565b6000813590506101f881610355565b92915050565b6000806040838503121561021157600080fd5b600061021f858286016101d4565b9250506020610230858286016101e9565b9150509250929050565b6000806040838503121561024d57600080fd5b600061025b858286016101e9565b925050602061026c858286016101e9565b9150509250929050565b61027f81610302565b82525050565b61028e81610334565b82525050565b60006080820190506102a96000830187610276565b6102b66020830186610285565b6102c36040830185610285565b6102d06060830184610285565b95945050505050565b60006040820190506102ee6000830185610285565b6102fb6020830184610285565b9392505050565b600061030d82610314565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b61034781610302565b811461035257600080fd5b50565b61035e81610334565b811461036957600080fd5b5056fea26469706673582212204fd0fc653fb487221da9a14a4ca5d5499f9e9bc7b27ac8ab0f8d397fd6e3148564736f6c63430008040033",devdoc:{kind:"dev",methods:{},version:1},userdoc:{kind:"user",methods:{},version:1},storageLayout:{storage:[{astId:13,contract:"contracts/NonRepudiation.sol:NonRepudiation",label:"registry",offset:0,slot:"0",type:"t_mapping(t_address,t_mapping(t_uint256,t_struct(Proof)6_storage))"}],types:{t_address:{encoding:"inplace",label:"address",numberOfBytes:"20"},"t_mapping(t_address,t_mapping(t_uint256,t_struct(Proof)6_storage))":{encoding:"mapping",key:"t_address",label:"mapping(address => mapping(uint256 => struct NonRepudiation.Proof))",numberOfBytes:"32",value:"t_mapping(t_uint256,t_struct(Proof)6_storage)"},"t_mapping(t_uint256,t_struct(Proof)6_storage)":{encoding:"mapping",key:"t_uint256",label:"mapping(uint256 => struct NonRepudiation.Proof)",numberOfBytes:"32",value:"t_struct(Proof)6_storage"},"t_struct(Proof)6_storage":{encoding:"inplace",label:"struct NonRepudiation.Proof",members:[{astId:3,contract:"contracts/NonRepudiation.sol:NonRepudiation",label:"timestamp",offset:0,slot:"0",type:"t_uint256"},{astId:5,contract:"contracts/NonRepudiation.sol:NonRepudiation",label:"secret",offset:0,slot:"1",type:"t_uint256"}],numberOfBytes:"64"},t_uint256:{encoding:"inplace",label:"uint256",numberOfBytes:"32"}}}}};let Oi=!1,Bi=!1;const Fi={debug:1,default:2,info:2,warning:3,error:4,off:5};let Di=Fi.default,Ui=null;const Li=function(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach((e=>{try{if("test"!=="test".normalize(e))throw new Error("bad normalize")}catch(r){t.push(e)}})),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();var Hi,zi;!function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"}(Hi||(Hi={})),function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED"}(zi||(zi={}));const ji="0123456789abcdef";class Ki{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,e){const r=t.toLowerCase();null==Fi[r]&&this.throwArgumentError("invalid log level name","logLevel",t),Di>Fi[r]||console.log.apply(console,e)}debug(...t){this._log(Ki.levels.DEBUG,t)}info(...t){this._log(Ki.levels.INFO,t)}warn(...t){this._log(Ki.levels.WARNING,t)}makeError(t,e,r){if(Bi)return this.makeError("censored error",e,{});e||(e=Ki.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach((t=>{const e=r[t];try{if(e instanceof Uint8Array){let r="";for(let t=0;t<e.length;t++)r+=ji[e[t]>>4],r+=ji[15&e[t]];n.push(t+"=Uint8Array(0x"+r+")")}else n.push(t+"="+JSON.stringify(e))}catch(e){n.push(t+"="+JSON.stringify(r[t].toString()))}})),n.push(`code=${e}`),n.push(`version=${this.version}`);const i=t;n.length&&(t+=" ("+n.join(", ")+")");const o=new Error(t);return o.reason=i,o.code=e,Object.keys(r).forEach((function(t){o[t]=r[t]})),o}throwError(t,e,r){throw this.makeError(t,e,r)}throwArgumentError(t,e,r){return this.throwError(t,Ki.errors.INVALID_ARGUMENT,{argument:e,value:r})}assert(t,e,r,n){t||this.throwError(e,r,n)}assertArgument(t,e,r,n){t||this.throwArgumentError(e,r,n)}checkNormalize(t){Li&&this.throwError("platform missing String.prototype.normalize",Ki.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Li})}checkSafeUint53(t,e){"number"==typeof t&&(null==e&&(e="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(e,Ki.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(e,Ki.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,e,r){r=r?": "+r:"",t<e&&this.throwError("missing argument"+r,Ki.errors.MISSING_ARGUMENT,{count:t,expectedCount:e}),t>e&&this.throwError("too many arguments"+r,Ki.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:e})}checkNew(t,e){t!==Object&&null!=t||this.throwError("missing new",Ki.errors.MISSING_NEW,{name:e.name})}checkAbstract(t,e){t===e?this.throwError("cannot instantiate abstract class "+JSON.stringify(e.name)+" directly; use a sub-class",Ki.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",Ki.errors.MISSING_NEW,{name:e.name})}static globalLogger(){return Ui||(Ui=new Ki("logger/5.5.0")),Ui}static setCensorship(t,e){if(!t&&e&&this.globalLogger().throwError("cannot permanently disable censorship",Ki.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Oi){if(!t)return;this.globalLogger().throwError("error censorship permanent",Ki.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Bi=!!t,Oi=!!e}static setLogLevel(t){const e=Fi[t.toLowerCase()];null!=e?Di=e:Ki.globalLogger().warn("invalid log level - "+t)}static from(t){return new Ki(t)}}Ki.errors=zi,Ki.levels=Hi;const Wi=new Ki("bytes/5.5.0");function Ji(t){return!!t.toHexString}function qi(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return qi(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function Gi(t){return Qi(t)&&!(t.length%2)||$i(t)}function Vi(t){return"number"==typeof t&&t==t&&t%1==0}function $i(t){if(null==t)return!1;if(t.constructor===Uint8Array)return!0;if("string"==typeof t)return!1;if(!Vi(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!Vi(r)||r<0||r>=256)return!1}return!0}function Xi(t,e){if(e||(e={}),"number"==typeof t){Wi.checkSafeUint53(t,"invalid arrayify value");const e=[];for(;t;)e.unshift(255&t),t=parseInt(String(t/256));return 0===e.length&&e.push(0),qi(new Uint8Array(e))}if(e.allowMissingPrefix&&"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),Ji(t)&&(t=t.toHexString()),Qi(t)){let r=t.substring(2);r.length%2&&("left"===e.hexPad?r="0x0"+r.substring(2):"right"===e.hexPad?r+="0":Wi.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let t=0;t<r.length;t+=2)n.push(parseInt(r.substring(t,t+2),16));return qi(new Uint8Array(n))}return $i(t)?qi(new Uint8Array(t)):Wi.throwArgumentError("invalid arrayify value","value",t)}function Zi(t){const e=t.map((t=>Xi(t))),r=e.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(r);return e.reduce(((t,e)=>(n.set(e,t),t+e.length)),0),qi(n)}function Yi(t){let e=Xi(t);if(0===e.length)return e;let r=0;for(;r<e.length&&0===e[r];)r++;return r&&(e=e.slice(r)),e}function Qi(t,e){return!("string"!=typeof t||!t.match(/^0x[0-9A-Fa-f]*$/))&&(!e||t.length===2+2*e)}function to(t,e){if(e||(e={}),"number"==typeof t){Wi.checkSafeUint53(t,"invalid hexlify value");let e="";for(;t;)e="0123456789abcdef"[15&t]+e,t=Math.floor(t/16);return e.length?(e.length%2&&(e="0"+e),"0x"+e):"0x00"}if("bigint"==typeof t)return(t=t.toString(16)).length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),Ji(t))return t.toHexString();if(Qi(t))return t.length%2&&("left"===e.hexPad?t="0x0"+t.substring(2):"right"===e.hexPad?t+="0":Wi.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if($i(t)){let e="0x";for(let r=0;r<t.length;r++){let n=t[r];e+="0123456789abcdef"[(240&n)>>4]+"0123456789abcdef"[15&n]}return e}return Wi.throwArgumentError("invalid hexlify value","value",t)}function eo(t){if("string"!=typeof t)t=to(t);else if(!Qi(t)||t.length%2)return null;return(t.length-2)/2}function ro(t,e,r){return"string"!=typeof t?t=to(t):(!Qi(t)||t.length%2)&&Wi.throwArgumentError("invalid hexData","value",t),e=2+2*e,null!=r?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function no(t){let e="0x";return t.forEach((t=>{e+=to(t).substring(2)})),e}function io(t){const e=function(t){"string"!=typeof t&&(t=to(t));Qi(t)||Wi.throwArgumentError("invalid hex string","value",t);t=t.substring(2);let e=0;for(;e<t.length&&"0"===t[e];)e++;return"0x"+t.substring(e)}(to(t,{hexPad:"left"}));return"0x"===e?"0x0":e}function oo(t,e){for("string"!=typeof t?t=to(t):Qi(t)||Wi.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&Wi.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function so(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0};if(Gi(t)){const r=Xi(t);65!==r.length&&Wi.throwArgumentError("invalid signature string; must be 65 bytes","signature",t),e.r=to(r.slice(0,32)),e.s=to(r.slice(32,64)),e.v=r[64],e.v<27&&(0===e.v||1===e.v?e.v+=27:Wi.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=to(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,null!=e._vs){const r=function(t,e){(t=Xi(t)).length>e&&Wi.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),qi(r)}(Xi(e._vs),32);e._vs=to(r);const n=r[0]>=128?1:0;null==e.recoveryParam?e.recoveryParam=n:e.recoveryParam!==n&&Wi.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),r[0]&=127;const i=to(r);null==e.s?e.s=i:e.s!==i&&Wi.throwArgumentError("signature v mismatch _vs","signature",t)}if(null==e.recoveryParam)null==e.v?Wi.throwArgumentError("signature missing v and recoveryParam","signature",t):0===e.v||1===e.v?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(null==e.v)e.v=27+e.recoveryParam;else{const r=0===e.v||1===e.v?e.v:1-e.v%2;e.recoveryParam!==r&&Wi.throwArgumentError("signature recoveryParam mismatch v","signature",t)}null!=e.r&&Qi(e.r)?e.r=oo(e.r,32):Wi.throwArgumentError("signature missing or invalid r","signature",t),null!=e.s&&Qi(e.s)?e.s=oo(e.s,32):Wi.throwArgumentError("signature missing or invalid s","signature",t);const r=Xi(e.s);r[0]>=128&&Wi.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=to(r);e._vs&&(Qi(e._vs)||Wi.throwArgumentError("signature invalid _vs","signature",t),e._vs=oo(e._vs,32)),null==e._vs?e._vs=n:e._vs!==n&&Wi.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e}function ao(t){return to(Zi([(t=so(t)).r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}var ho=c.BN;const uo=new Ki("bignumber/5.5.0"),co={};let fo=!1;class lo{constructor(t,e){uo.checkNew(new.target,lo),t!==co&&uo.throwError("cannot call constructor directly; use BigNumber.from",Ki.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=e,this._isBigNumber=!0,Object.freeze(this)}fromTwos(t){return mo(go(this).fromTwos(t))}toTwos(t){return mo(go(this).toTwos(t))}abs(){return"-"===this._hex[0]?lo.from(this._hex.substring(1)):this}add(t){return mo(go(this).add(go(t)))}sub(t){return mo(go(this).sub(go(t)))}div(t){return lo.from(t).isZero()&&yo("division by zero","div"),mo(go(this).div(go(t)))}mul(t){return mo(go(this).mul(go(t)))}mod(t){const e=go(t);return e.isNeg()&&yo("cannot modulo negative values","mod"),mo(go(this).umod(e))}pow(t){const e=go(t);return e.isNeg()&&yo("cannot raise to negative values","pow"),mo(go(this).pow(e))}and(t){const e=go(t);return(this.isNegative()||e.isNeg())&&yo("cannot 'and' negative values","and"),mo(go(this).and(e))}or(t){const e=go(t);return(this.isNegative()||e.isNeg())&&yo("cannot 'or' negative values","or"),mo(go(this).or(e))}xor(t){const e=go(t);return(this.isNegative()||e.isNeg())&&yo("cannot 'xor' negative values","xor"),mo(go(this).xor(e))}mask(t){return(this.isNegative()||t<0)&&yo("cannot mask negative values","mask"),mo(go(this).maskn(t))}shl(t){return(this.isNegative()||t<0)&&yo("cannot shift negative values","shl"),mo(go(this).shln(t))}shr(t){return(this.isNegative()||t<0)&&yo("cannot shift negative values","shr"),mo(go(this).shrn(t))}eq(t){return go(this).eq(go(t))}lt(t){return go(this).lt(go(t))}lte(t){return go(this).lte(go(t))}gt(t){return go(this).gt(go(t))}gte(t){return go(this).gte(go(t))}isNegative(){return"-"===this._hex[0]}isZero(){return go(this).isZero()}toNumber(){try{return go(this).toNumber()}catch(t){yo("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(t){}return uo.throwError("this platform does not support BigInt",Ki.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?fo||(fo=!0,uo.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?uo.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Ki.errors.UNEXPECTED_ARGUMENT,{}):uo.throwError("BigNumber.toString does not accept parameters",Ki.errors.UNEXPECTED_ARGUMENT,{})),go(this).toString(10)}toHexString(){return this._hex}toJSON(t){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof lo)return t;if("string"==typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new lo(co,po(t)):t.match(/^-?[0-9]+$/)?new lo(co,po(new ho(t))):uo.throwArgumentError("invalid BigNumber string","value",t);if("number"==typeof t)return t%1&&yo("underflow","BigNumber.from",t),(t>=9007199254740991||t<=-9007199254740991)&&yo("overflow","BigNumber.from",t),lo.from(String(t));const e=t;if("bigint"==typeof e)return lo.from(e.toString());if($i(e))return lo.from(to(e));if(e)if(e.toHexString){const t=e.toHexString();if("string"==typeof t)return lo.from(t)}else{let t=e._hex;if(null==t&&"BigNumber"===e.type&&(t=e.hex),"string"==typeof t&&(Qi(t)||"-"===t[0]&&Qi(t.substring(1))))return lo.from(t)}return uo.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(t){return!(!t||!t._isBigNumber)}}function po(t){if("string"!=typeof t)return po(t.toString(16));if("-"===t[0])return"-"===(t=t.substring(1))[0]&&uo.throwArgumentError("invalid hex","value",t),"0x00"===(t=po(t))?t:"-"+t;if("0x"!==t.substring(0,2)&&(t="0x"+t),"0x"===t)return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&"0x00"===t.substring(0,4);)t="0x"+t.substring(4);return t}function mo(t){return lo.from(po(t))}function go(t){const e=lo.from(t).toHexString();return"-"===e[0]?new ho("-"+e.substring(3),16):new ho(e.substring(2),16)}function yo(t,e,r){const n={fault:t,operation:e};return null!=r&&(n.value=r),uo.throwError(t,Ki.errors.NUMERIC_FAULT,n)}var vo=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function a(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}h((n=n.apply(t,e||[])).next())}))};const wo=new Ki("properties/5.5.0");function bo(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function Eo(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||"object"!=typeof t.prototype)break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function Ao(t){return vo(this,void 0,void 0,(function*(){const e=Object.keys(t).map((e=>{const r=t[e];return Promise.resolve(r).then((t=>({key:e,value:t})))}));return(yield Promise.all(e)).reduce(((t,e)=>(t[e.key]=e.value,t)),{})}))}function So(t,e){t&&"object"==typeof t||wo.throwArgumentError("invalid object","object",t),Object.keys(t).forEach((r=>{e[r]||wo.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)}))}function _o(t){const e={};for(const r in t)e[r]=t[r];return e}const ko={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Po(t){if(null==t||ko[typeof t])return!0;if(Array.isArray(t)||"object"==typeof t){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch(t){continue}if(!Po(n))return!1}return!0}return wo.throwArgumentError("Cannot deepCopy "+typeof t,"object",t)}function xo(t){if(Po(t))return t;if(Array.isArray(t))return Object.freeze(t.map((t=>Mo(t))));if("object"==typeof t){const e={};for(const r in t){const n=t[r];void 0!==n&&bo(e,r,Mo(n))}return e}return wo.throwArgumentError("Cannot deepCopy "+typeof t,"object",t)}function Mo(t){return xo(t)}class Io{constructor(t){for(const e in t)this[e]=Mo(t[e])}}const Ro=new Ki("abi/5.5.0"),No={};let Co={calldata:!0,memory:!0,storage:!0},To={calldata:!0,memory:!0};function Oo(t,e){if("bytes"===t||"string"===t){if(Co[e])return!0}else if("address"===t){if("payable"===e)return!0}else if((t.indexOf("[")>=0||"tuple"===t)&&To[e])return!0;return(Co[e]||"payable"===e)&&Ro.throwArgumentError("invalid modifier","name",e),!1}function Bo(t,e){for(let r in e)bo(t,r,e[r])}const Fo=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),Do=new RegExp(/^(.*)\[([0-9]*)\]$/);class Uo{constructor(t,e){t!==No&&Ro.throwError("use fromString",Ki.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),Bo(this,e);let r=this.type.match(Do);Bo(this,r?{arrayLength:parseInt(r[2]||"-1"),arrayChildren:Uo.fromObject({type:r[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(t){if(t||(t=Fo.sighash),Fo[t]||Ro.throwArgumentError("invalid format type","format",t),t===Fo.json){let e={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(e.indexed=this.indexed),this.components&&(e.components=this.components.map((e=>JSON.parse(e.format(t))))),JSON.stringify(e)}let e="";return"array"===this.baseType?(e+=this.arrayChildren.format(t),e+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(t!==Fo.sighash&&(e+=this.type),e+="("+this.components.map((e=>e.format(t))).join(t===Fo.full?", ":",")+")"):e+=this.type,t!==Fo.sighash&&(!0===this.indexed&&(e+=" indexed"),t===Fo.full&&this.name&&(e+=" "+this.name)),e}static from(t,e){return"string"==typeof t?Uo.fromString(t,e):Uo.fromObject(t)}static fromObject(t){return Uo.isParamType(t)?t:new Uo(No,{name:t.name||null,type:$o(t.type),indexed:null==t.indexed?null:!!t.indexed,components:t.components?t.components.map(Uo.fromObject):null})}static fromString(t,e){return r=function(t,e){let r=t;function n(e){Ro.throwArgumentError(`unexpected character at position ${e}`,"param",t)}function i(t){let r={type:"",name:"",parent:t,state:{allowType:!0}};return e&&(r.indexed=!1),r}t=t.replace(/\s/g," ");let o={type:"",name:"",state:{allowType:!0}},s=o;for(let r=0;r<t.length;r++){let o=t[r];switch(o){case"(":s.state.allowType&&""===s.type?s.type="tuple":s.state.allowParams||n(r),s.state.allowType=!1,s.type=$o(s.type),s.components=[i(s)],s=s.components[0];break;case")":delete s.state,"indexed"===s.name&&(e||n(r),s.indexed=!0,s.name=""),Oo(s.type,s.name)&&(s.name=""),s.type=$o(s.type);let t=s;s=s.parent,s||n(r),delete t.parent,s.state.allowParams=!1,s.state.allowName=!0,s.state.allowArray=!0;break;case",":delete s.state,"indexed"===s.name&&(e||n(r),s.indexed=!0,s.name=""),Oo(s.type,s.name)&&(s.name=""),s.type=$o(s.type);let a=i(s.parent);s.parent.components.push(a),delete s.parent,s=a;break;case" ":s.state.allowType&&""!==s.type&&(s.type=$o(s.type),delete s.state.allowType,s.state.allowName=!0,s.state.allowParams=!0),s.state.allowName&&""!==s.name&&("indexed"===s.name?(e||n(r),s.indexed&&n(r),s.indexed=!0,s.name=""):Oo(s.type,s.name)?s.name="":s.state.allowName=!1);break;case"[":s.state.allowArray||n(r),s.type+=o,s.state.allowArray=!1,s.state.allowName=!1,s.state.readArray=!0;break;case"]":s.state.readArray||n(r),s.type+=o,s.state.readArray=!1,s.state.allowArray=!0,s.state.allowName=!0;break;default:s.state.allowType?(s.type+=o,s.state.allowParams=!0,s.state.allowArray=!0):s.state.allowName?(s.name+=o,delete s.state.allowArray):s.state.readArray?s.type+=o:n(r)}}return s.parent&&Ro.throwArgumentError("unexpected eof","param",t),delete o.state,"indexed"===s.name?(e||n(r.length-7),s.indexed&&n(r.length-7),s.indexed=!0,s.name=""):Oo(s.type,s.name)&&(s.name=""),o.type=$o(o.type),o}(t,!!e),Uo.fromObject({name:r.name,type:r.type,indexed:r.indexed,components:r.components});var r}static isParamType(t){return!(null==t||!t._isParamType)}}function Lo(t,e){return function(t){t=t.trim();let e=[],r="",n=0;for(let i=0;i<t.length;i++){let o=t[i];","===o&&0===n?(e.push(r),r=""):(r+=o,"("===o?n++:")"===o&&(n--,-1===n&&Ro.throwArgumentError("unbalanced parenthesis","value",t)))}r&&e.push(r);return e}(t).map((t=>Uo.fromString(t,e)))}class Ho{constructor(t,e){t!==No&&Ro.throwError("use a static from method",Ki.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),Bo(this,e),this._isFragment=!0,Object.freeze(this)}static from(t){return Ho.isFragment(t)?t:"string"==typeof t?Ho.fromString(t):Ho.fromObject(t)}static fromObject(t){if(Ho.isFragment(t))return t;switch(t.type){case"function":return qo.fromObject(t);case"event":return zo.fromObject(t);case"constructor":return Jo.fromObject(t);case"error":return Vo.fromObject(t);case"fallback":case"receive":return null}return Ro.throwArgumentError("invalid fragment object","value",t)}static fromString(t){return"event"===(t=(t=(t=t.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?zo.fromString(t.substring(5).trim()):"function"===t.split(" ")[0]?qo.fromString(t.substring(8).trim()):"constructor"===t.split("(")[0].trim()?Jo.fromString(t.trim()):"error"===t.split(" ")[0]?Vo.fromString(t.substring(5).trim()):Ro.throwArgumentError("unsupported fragment","value",t)}static isFragment(t){return!(!t||!t._isFragment)}}class zo extends Ho{format(t){if(t||(t=Fo.sighash),Fo[t]||Ro.throwArgumentError("invalid format type","format",t),t===Fo.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==Fo.sighash&&(e+="event "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===Fo.full?", ":",")+") ",t!==Fo.sighash&&this.anonymous&&(e+="anonymous "),e.trim()}static from(t){return"string"==typeof t?zo.fromString(t):zo.fromObject(t)}static fromObject(t){if(zo.isEventFragment(t))return t;"event"!==t.type&&Ro.throwArgumentError("invalid event object","value",t);const e={name:Zo(t.name),anonymous:t.anonymous,inputs:t.inputs?t.inputs.map(Uo.fromObject):[],type:"event"};return new zo(No,e)}static fromString(t){let e=t.match(Yo);e||Ro.throwArgumentError("invalid event string","value",t);let r=!1;return e[3].split(" ").forEach((t=>{switch(t.trim()){case"anonymous":r=!0;break;case"":break;default:Ro.warn("unknown modifier: "+t)}})),zo.fromObject({name:e[1].trim(),anonymous:r,inputs:Lo(e[2],!0),type:"event"})}static isEventFragment(t){return t&&t._isFragment&&"event"===t.type}}function jo(t,e){e.gas=null;let r=t.split("@");return 1!==r.length?(r.length>2&&Ro.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||Ro.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=lo.from(r[1]),r[0]):t}function Ko(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach((t=>{switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}}))}function Wo(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return null!=t.stateMutability?(e.stateMutability=t.stateMutability,e.constant="view"===e.stateMutability||"pure"===e.stateMutability,null!=t.constant&&!!t.constant!==e.constant&&Ro.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable="payable"===e.stateMutability,null!=t.payable&&!!t.payable!==e.payable&&Ro.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):null!=t.payable?(e.payable=!!t.payable,null!=t.constant||e.payable||"constructor"===t.type||Ro.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&Ro.throwArgumentError("cannot have constant payable function","value",t)):null!=t.constant?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):"constructor"!==t.type&&Ro.throwArgumentError("unable to determine stateMutability","value",t),e}class Jo extends Ho{format(t){if(t||(t=Fo.sighash),Fo[t]||Ro.throwArgumentError("invalid format type","format",t),t===Fo.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});t===Fo.sighash&&Ro.throwError("cannot format a constructor for sighash",Ki.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let e="constructor("+this.inputs.map((e=>e.format(t))).join(t===Fo.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "),e.trim()}static from(t){return"string"==typeof t?Jo.fromString(t):Jo.fromObject(t)}static fromObject(t){if(Jo.isConstructorFragment(t))return t;"constructor"!==t.type&&Ro.throwArgumentError("invalid constructor object","value",t);let e=Wo(t);e.constant&&Ro.throwArgumentError("constructor cannot be constant","value",t);const r={name:null,type:t.type,inputs:t.inputs?t.inputs.map(Uo.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?lo.from(t.gas):null};return new Jo(No,r)}static fromString(t){let e={type:"constructor"},r=(t=jo(t,e)).match(Yo);return r&&"constructor"===r[1].trim()||Ro.throwArgumentError("invalid constructor string","value",t),e.inputs=Lo(r[2].trim(),!1),Ko(r[3].trim(),e),Jo.fromObject(e)}static isConstructorFragment(t){return t&&t._isFragment&&"constructor"===t.type}}class qo extends Jo{format(t){if(t||(t=Fo.sighash),Fo[t]||Ro.throwArgumentError("invalid format type","format",t),t===Fo.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t)))),outputs:this.outputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==Fo.sighash&&(e+="function "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===Fo.full?", ":",")+") ",t!==Fo.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "):this.constant&&(e+="view "),this.outputs&&this.outputs.length&&(e+="returns ("+this.outputs.map((e=>e.format(t))).join(", ")+") "),null!=this.gas&&(e+="@"+this.gas.toString()+" ")),e.trim()}static from(t){return"string"==typeof t?qo.fromString(t):qo.fromObject(t)}static fromObject(t){if(qo.isFunctionFragment(t))return t;"function"!==t.type&&Ro.throwArgumentError("invalid function object","value",t);let e=Wo(t);const r={type:t.type,name:Zo(t.name),constant:e.constant,inputs:t.inputs?t.inputs.map(Uo.fromObject):[],outputs:t.outputs?t.outputs.map(Uo.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?lo.from(t.gas):null};return new qo(No,r)}static fromString(t){let e={type:"function"},r=(t=jo(t,e)).split(" returns ");r.length>2&&Ro.throwArgumentError("invalid function string","value",t);let n=r[0].match(Yo);if(n||Ro.throwArgumentError("invalid function signature","value",t),e.name=n[1].trim(),e.name&&Zo(e.name),e.inputs=Lo(n[2],!1),Ko(n[3].trim(),e),r.length>1){let n=r[1].match(Yo);""==n[1].trim()&&""==n[3].trim()||Ro.throwArgumentError("unexpected tokens","value",t),e.outputs=Lo(n[2],!1)}else e.outputs=[];return qo.fromObject(e)}static isFunctionFragment(t){return t&&t._isFragment&&"function"===t.type}}function Go(t){const e=t.format();return"Error(string)"!==e&&"Panic(uint256)"!==e||Ro.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class Vo extends Ho{format(t){if(t||(t=Fo.sighash),Fo[t]||Ro.throwArgumentError("invalid format type","format",t),t===Fo.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});let e="";return t!==Fo.sighash&&(e+="error "),e+=this.name+"("+this.inputs.map((e=>e.format(t))).join(t===Fo.full?", ":",")+") ",e.trim()}static from(t){return"string"==typeof t?Vo.fromString(t):Vo.fromObject(t)}static fromObject(t){if(Vo.isErrorFragment(t))return t;"error"!==t.type&&Ro.throwArgumentError("invalid error object","value",t);const e={type:t.type,name:Zo(t.name),inputs:t.inputs?t.inputs.map(Uo.fromObject):[]};return Go(new Vo(No,e))}static fromString(t){let e={type:"error"},r=t.match(Yo);return r||Ro.throwArgumentError("invalid error signature","value",t),e.name=r[1].trim(),e.name&&Zo(e.name),e.inputs=Lo(r[2],!1),Go(Vo.fromObject(e))}static isErrorFragment(t){return t&&t._isFragment&&"error"===t.type}}function $o(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const Xo=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Zo(t){return t&&t.match(Xo)||Ro.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const Yo=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");const Qo=new Ki("abi/5.5.0");class ts{constructor(t,e,r,n){this.name=t,this.type=e,this.localName=r,this.dynamic=n}_throwError(t,e){Qo.throwArgumentError(t,this.localName,e)}}class es{constructor(t){bo(this,"wordSize",t||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(t)}get data(){return no(this._data)}get length(){return this._dataLength}_writeData(t){return this._data.push(t),this._dataLength+=t.length,t.length}appendWriter(t){return this._writeData(Zi(t._data))}writeBytes(t){let e=Xi(t);const r=e.length%this.wordSize;return r&&(e=Zi([e,this._padding.slice(r)])),this._writeData(e)}_getValue(t){let e=Xi(lo.from(t));return e.length>this.wordSize&&Qo.throwError("value out-of-bounds",Ki.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:e.length}),e.length%this.wordSize&&(e=Zi([this._padding.slice(e.length%this.wordSize),e])),e}writeValue(t){return this._writeData(this._getValue(t))}writeUpdatableValue(){const t=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,e=>{this._data[t]=this._getValue(e)}}}class rs{constructor(t,e,r,n){bo(this,"_data",Xi(t)),bo(this,"wordSize",e||32),bo(this,"_coerceFunc",r),bo(this,"allowLoose",n),this._offset=0}get data(){return to(this._data)}get consumed(){return this._offset}static coerce(t,e){let r=t.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(e=e.toNumber()),e}coerce(t,e){return this._coerceFunc?this._coerceFunc(t,e):rs.coerce(t,e)}_peekBytes(t,e,r){let n=Math.ceil(e/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+e<=this._data.length?n=e:Qo.throwError("data out-of-bounds",Ki.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}subReader(t){return new rs(this._data.slice(this._offset+t),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(t,e){let r=this._peekBytes(0,t,!!e);return this._offset+=r.length,r.slice(0,t)}readValue(){return lo.from(this.readBytes(this.wordSize))}}var ns,is={exports:{}};
/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */ns=is,function(){var t="input is invalid type",e="object"==typeof window,r=e?window:{};r.JS_SHA3_NO_WINDOW&&(e=!1);var n=!e&&"object"==typeof self;!r.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?r=o:n&&(r=self);var i=!r.JS_SHA3_NO_COMMON_JS&&ns.exports,s=!r.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),h=[4,1024,262144,67108864],u=[0,8,16,24],c=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],f=[224,256,384,512],l=[128,256],d=["hex","buffer","arrayBuffer","array","digest"],p={128:168,256:136};!r.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!s||!r.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});for(var m=function(t,e,r){return function(n){return new R(t,e,t).update(n)[r]()}},g=function(t,e,r){return function(n,i){return new R(t,e,i).update(n)[r]()}},y=function(t,e,r){return function(e,n,i,o){return A["cshake"+t].update(e,n,i,o)[r]()}},v=function(t,e,r){return function(e,n,i,o){return A["kmac"+t].update(e,n,i,o)[r]()}},w=function(t,e,r,n){for(var i=0;i<d.length;++i){var o=d[i];t[o]=e(r,n,o)}return t},b=function(t,e){var r=m(t,e,"hex");return r.create=function(){return new R(t,e,t)},r.update=function(t){return r.create().update(t)},w(r,m,t,e)},E=[{name:"keccak",padding:[1,256,65536,16777216],bits:f,createMethod:b},{name:"sha3",padding:[6,1536,393216,100663296],bits:f,createMethod:b},{name:"shake",padding:[31,7936,2031616,520093696],bits:l,createMethod:function(t,e){var r=g(t,e,"hex");return r.create=function(r){return new R(t,e,r)},r.update=function(t,e){return r.create(e).update(t)},w(r,g,t,e)}},{name:"cshake",padding:h,bits:l,createMethod:function(t,e){var r=p[t],n=y(t,0,"hex");return n.create=function(n,i,o){return i||o?new R(t,e,n).bytepad([i,o],r):A["shake"+t].create(n)},n.update=function(t,e,r,i){return n.create(e,r,i).update(t)},w(n,y,t,e)}},{name:"kmac",padding:h,bits:l,createMethod:function(t,e){var r=p[t],n=v(t,0,"hex");return n.create=function(n,i,o){return new N(t,e,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(t,e,r,i){return n.create(t,r,i).update(e)},w(n,v,t,e)}}],A={},S=[],_=0;_<E.length;++_)for(var k=E[_],P=k.bits,x=0;x<P.length;++x){var M=k.name+"_"+P[x];if(S.push(M),A[M]=k.createMethod(P[x],k.padding),"sha3"!==k.name){var I=k.name+P[x];S.push(I),A[I]=A[M]}}function R(t,e,r){this.blocks=[],this.s=[],this.padding=e,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function N(t,e,r){R.call(this,t,e,r)}R.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var i,o,a=this.blocks,h=this.byteCount,c=e.length,f=this.blockCount,l=0,d=this.s;l<c;){if(this.reset)for(this.reset=!1,a[0]=this.block,i=1;i<f+1;++i)a[i]=0;if(r)for(i=this.start;l<c&&i<h;++l)a[i>>2]|=e[l]<<u[3&i++];else for(i=this.start;l<c&&i<h;++l)(o=e.charCodeAt(l))<128?a[i>>2]|=o<<u[3&i++]:o<2048?(a[i>>2]|=(192|o>>6)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):o<55296||o>=57344?(a[i>>2]|=(224|o>>12)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++l)),a[i>>2]|=(240|o>>18)<<u[3&i++],a[i>>2]|=(128|o>>12&63)<<u[3&i++],a[i>>2]|=(128|o>>6&63)<<u[3&i++],a[i>>2]|=(128|63&o)<<u[3&i++]);if(this.lastByteIndex=i,i>=h){for(this.start=i-h,this.block=a[f],i=0;i<f;++i)d[i]^=a[i];C(d),this.reset=!0}else this.start=i}return this},R.prototype.encode=function(t,e){var r=255&t,n=1,i=[r];for(r=255&(t>>=8);r>0;)i.unshift(r),r=255&(t>>=8),++n;return e?i.push(n):i.unshift(n),this.update(i),i.length},R.prototype.encodeString=function(e){var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}var i=0,o=e.length;if(r)i=o;else for(var a=0;a<e.length;++a){var h=e.charCodeAt(a);h<128?i+=1:h<2048?i+=2:h<55296||h>=57344?i+=3:(h=65536+((1023&h)<<10|1023&e.charCodeAt(++a)),i+=4)}return i+=this.encode(8*i),this.update(e),i},R.prototype.bytepad=function(t,e){for(var r=this.encode(e),n=0;n<t.length;++n)r+=this.encodeString(t[n]);var i=e-r%e,o=[];return o.length=i,this.update(o),this},R.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex,r=this.blockCount,n=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[r],e=1;e<r+1;++e)t[e]=0;for(t[r-1]|=2147483648,e=0;e<r;++e)n[e]^=t[e];C(n)}},R.prototype.toString=R.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,h="";s<n;){for(o=0;o<e&&s<n;++o,++s)t=r[o],h+=a[t>>4&15]+a[15&t]+a[t>>12&15]+a[t>>8&15]+a[t>>20&15]+a[t>>16&15]+a[t>>28&15]+a[t>>24&15];s%e==0&&(C(r),o=0)}return i&&(t=r[o],h+=a[t>>4&15]+a[15&t],i>1&&(h+=a[t>>12&15]+a[t>>8&15]),i>2&&(h+=a[t>>20&15]+a[t>>16&15])),h},R.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;t=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var h=new Uint32Array(t);s<n;){for(o=0;o<e&&s<n;++o,++s)h[s]=r[o];s%e==0&&C(r)}return i&&(h[o]=r[o],t=t.slice(0,a)),t},R.prototype.buffer=R.prototype.arrayBuffer,R.prototype.digest=R.prototype.array=function(){this.finalize();for(var t,e,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,h=[];a<i;){for(s=0;s<r&&a<i;++s,++a)t=a<<2,e=n[s],h[t]=255&e,h[t+1]=e>>8&255,h[t+2]=e>>16&255,h[t+3]=e>>24&255;a%r==0&&C(n)}return o&&(t=a<<2,e=n[s],h[t]=255&e,o>1&&(h[t+1]=e>>8&255),o>2&&(h[t+2]=e>>16&255)),h},N.prototype=new R,N.prototype.finalize=function(){return this.encode(this.outputBits,!0),R.prototype.finalize.call(this)};var C=function(t){var e,r,n,i,o,s,a,h,u,f,l,d,p,m,g,y,v,w,b,E,A,S,_,k,P,x,M,I,R,N,C,T,O,B,F,D,U,L,H,z,j,K,W,J,q,G,V,$,X,Z,Y,Q,tt,et,rt,nt,it,ot,st,at,ht,ut,ct;for(n=0;n<48;n+=2)i=t[0]^t[10]^t[20]^t[30]^t[40],o=t[1]^t[11]^t[21]^t[31]^t[41],s=t[2]^t[12]^t[22]^t[32]^t[42],a=t[3]^t[13]^t[23]^t[33]^t[43],h=t[4]^t[14]^t[24]^t[34]^t[44],u=t[5]^t[15]^t[25]^t[35]^t[45],f=t[6]^t[16]^t[26]^t[36]^t[46],l=t[7]^t[17]^t[27]^t[37]^t[47],e=(d=t[8]^t[18]^t[28]^t[38]^t[48])^(s<<1|a>>>31),r=(p=t[9]^t[19]^t[29]^t[39]^t[49])^(a<<1|s>>>31),t[0]^=e,t[1]^=r,t[10]^=e,t[11]^=r,t[20]^=e,t[21]^=r,t[30]^=e,t[31]^=r,t[40]^=e,t[41]^=r,e=i^(h<<1|u>>>31),r=o^(u<<1|h>>>31),t[2]^=e,t[3]^=r,t[12]^=e,t[13]^=r,t[22]^=e,t[23]^=r,t[32]^=e,t[33]^=r,t[42]^=e,t[43]^=r,e=s^(f<<1|l>>>31),r=a^(l<<1|f>>>31),t[4]^=e,t[5]^=r,t[14]^=e,t[15]^=r,t[24]^=e,t[25]^=r,t[34]^=e,t[35]^=r,t[44]^=e,t[45]^=r,e=h^(d<<1|p>>>31),r=u^(p<<1|d>>>31),t[6]^=e,t[7]^=r,t[16]^=e,t[17]^=r,t[26]^=e,t[27]^=r,t[36]^=e,t[37]^=r,t[46]^=e,t[47]^=r,e=f^(i<<1|o>>>31),r=l^(o<<1|i>>>31),t[8]^=e,t[9]^=r,t[18]^=e,t[19]^=r,t[28]^=e,t[29]^=r,t[38]^=e,t[39]^=r,t[48]^=e,t[49]^=r,m=t[0],g=t[1],G=t[11]<<4|t[10]>>>28,V=t[10]<<4|t[11]>>>28,I=t[20]<<3|t[21]>>>29,R=t[21]<<3|t[20]>>>29,at=t[31]<<9|t[30]>>>23,ht=t[30]<<9|t[31]>>>23,K=t[40]<<18|t[41]>>>14,W=t[41]<<18|t[40]>>>14,B=t[2]<<1|t[3]>>>31,F=t[3]<<1|t[2]>>>31,y=t[13]<<12|t[12]>>>20,v=t[12]<<12|t[13]>>>20,$=t[22]<<10|t[23]>>>22,X=t[23]<<10|t[22]>>>22,N=t[33]<<13|t[32]>>>19,C=t[32]<<13|t[33]>>>19,ut=t[42]<<2|t[43]>>>30,ct=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,rt=t[4]<<30|t[5]>>>2,D=t[14]<<6|t[15]>>>26,U=t[15]<<6|t[14]>>>26,w=t[25]<<11|t[24]>>>21,b=t[24]<<11|t[25]>>>21,Z=t[34]<<15|t[35]>>>17,Y=t[35]<<15|t[34]>>>17,T=t[45]<<29|t[44]>>>3,O=t[44]<<29|t[45]>>>3,k=t[6]<<28|t[7]>>>4,P=t[7]<<28|t[6]>>>4,nt=t[17]<<23|t[16]>>>9,it=t[16]<<23|t[17]>>>9,L=t[26]<<25|t[27]>>>7,H=t[27]<<25|t[26]>>>7,E=t[36]<<21|t[37]>>>11,A=t[37]<<21|t[36]>>>11,Q=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,J=t[8]<<27|t[9]>>>5,q=t[9]<<27|t[8]>>>5,x=t[18]<<20|t[19]>>>12,M=t[19]<<20|t[18]>>>12,ot=t[29]<<7|t[28]>>>25,st=t[28]<<7|t[29]>>>25,z=t[38]<<8|t[39]>>>24,j=t[39]<<8|t[38]>>>24,S=t[48]<<14|t[49]>>>18,_=t[49]<<14|t[48]>>>18,t[0]=m^~y&w,t[1]=g^~v&b,t[10]=k^~x&I,t[11]=P^~M&R,t[20]=B^~D&L,t[21]=F^~U&H,t[30]=J^~G&$,t[31]=q^~V&X,t[40]=et^~nt&ot,t[41]=rt^~it&st,t[2]=y^~w&E,t[3]=v^~b&A,t[12]=x^~I&N,t[13]=M^~R&C,t[22]=D^~L&z,t[23]=U^~H&j,t[32]=G^~$&Z,t[33]=V^~X&Y,t[42]=nt^~ot&at,t[43]=it^~st&ht,t[4]=w^~E&S,t[5]=b^~A&_,t[14]=I^~N&T,t[15]=R^~C&O,t[24]=L^~z&K,t[25]=H^~j&W,t[34]=$^~Z&Q,t[35]=X^~Y&tt,t[44]=ot^~at&ut,t[45]=st^~ht&ct,t[6]=E^~S&m,t[7]=A^~_&g,t[16]=N^~T&k,t[17]=C^~O&P,t[26]=z^~K&B,t[27]=j^~W&F,t[36]=Z^~Q&J,t[37]=Y^~tt&q,t[46]=at^~ut&et,t[47]=ht^~ct&rt,t[8]=S^~m&y,t[9]=_^~g&v,t[18]=T^~k&x,t[19]=O^~P&M,t[28]=K^~B&D,t[29]=W^~F&U,t[38]=Q^~J&G,t[39]=tt^~q&V,t[48]=ut^~et&nt,t[49]=ct^~rt&it,t[0]^=c[n],t[1]^=c[n+1]};if(i)ns.exports=A;else for(_=0;_<S.length;++_)r[S[_]]=A[S[_]]}();var os=is.exports;function ss(t){return"0x"+os.keccak_256(Xi(t))}const as=new Ki("rlp/5.5.0");function hs(t){const e=[];for(;t;)e.unshift(255&t),t>>=8;return e}function us(t,e,r){let n=0;for(let i=0;i<r;i++)n=256*n+t[e+i];return n}function cs(t){if(Array.isArray(t)){let e=[];if(t.forEach((function(t){e=e.concat(cs(t))})),e.length<=55)return e.unshift(192+e.length),e;const r=hs(e.length);return r.unshift(247+r.length),r.concat(e)}Gi(t)||as.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(Xi(t));if(1===e.length&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=hs(e.length);return r.unshift(183+r.length),r.concat(e)}function fs(t){return to(cs(t))}function ls(t,e,r,n){const i=[];for(;r<e+1+n;){const o=ds(t,r);i.push(o.result),(r+=o.consumed)>e+1+n&&as.throwError("child data too short",Ki.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function ds(t,e){if(0===t.length&&as.throwError("data too short",Ki.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&as.throwError("data short segment too short",Ki.errors.BUFFER_OVERRUN,{});const n=us(t,e+1,r);return e+1+r+n>t.length&&as.throwError("data long segment too short",Ki.errors.BUFFER_OVERRUN,{}),ls(t,e,e+1+r,r+n)}if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&as.throwError("data array too short",Ki.errors.BUFFER_OVERRUN,{}),ls(t,e,e+1,r)}if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&as.throwError("data array too short",Ki.errors.BUFFER_OVERRUN,{});const n=us(t,e+1,r);e+1+r+n>t.length&&as.throwError("data array too short",Ki.errors.BUFFER_OVERRUN,{});return{consumed:1+r+n,result:to(t.slice(e+1+r,e+1+r+n))}}if(t[e]>=128){const r=t[e]-128;e+1+r>t.length&&as.throwError("data too short",Ki.errors.BUFFER_OVERRUN,{});return{consumed:1+r,result:to(t.slice(e+1,e+1+r))}}return{consumed:1,result:to(t[e])}}function ps(t){const e=Xi(t),r=ds(e,0);return r.consumed!==e.length&&as.throwArgumentError("invalid rlp data","data",t),r.result}const ms=new Ki("address/5.5.0");function gs(t){Qi(t,20)||ms.throwArgumentError("invalid address","address",t);const e=(t=t.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let t=0;t<40;t++)r[t]=e[t].charCodeAt(0);const n=Xi(ss(r));for(let t=0;t<40;t+=2)n[t>>1]>>4>=8&&(e[t]=e[t].toUpperCase()),(15&n[t>>1])>=8&&(e[t+1]=e[t+1].toUpperCase());return"0x"+e.join("")}const ys={};for(let t=0;t<10;t++)ys[String(t)]=String(t);for(let t=0;t<26;t++)ys[String.fromCharCode(65+t)]=String(10+t);const vs=Math.floor(function(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}(9007199254740991));function ws(t){let e=null;if("string"!=typeof t&&ms.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==t.substring(0,2)&&(t="0x"+t),e=gs(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&ms.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==function(t){let e=(t=(t=t.toUpperCase()).substring(4)+t.substring(0,2)+"00").split("").map((t=>ys[t])).join("");for(;e.length>=vs;){let t=e.substring(0,vs);e=parseInt(t,10)%97+e.substring(t.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}(t)&&ms.throwArgumentError("bad icap checksum","address",t),r=t.substring(4),e=new ho(r,36).toString(16);e.length<40;)e="0"+e;e=gs("0x"+e)}else ms.throwArgumentError("invalid address","address",t);var r;return e}function bs(t){let e=null;try{e=ws(t.from)}catch(e){ms.throwArgumentError("missing from address","transaction",t)}return ws(ro(ss(fs([e,Yi(Xi(lo.from(t.nonce).toHexString()))])),12))}class Es extends ts{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){try{e=ws(e)}catch(t){this._throwError(t.message,e)}return t.writeValue(e)}decode(t){return ws(oo(t.readValue().toHexString(),20))}}class As extends ts{constructor(t){super(t.name,t.type,void 0,t.dynamic),this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,e){return this.coder.encode(t,e)}decode(t){return this.coder.decode(t)}}const Ss=new Ki("abi/5.5.0");function _s(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let t={};n=e.map((e=>{const n=e.localName;return n||Ss.throwError("cannot encode object for signature with missing names",Ki.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),t[n]&&Ss.throwError("cannot encode object for signature with duplicate names",Ki.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),t[n]=!0,r[n]}))}else Ss.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&Ss.throwArgumentError("types/value length mismatch","tuple",r);let i=new es(t.wordSize),o=new es(t.wordSize),s=[];e.forEach(((t,e)=>{let r=n[e];if(t.dynamic){let e=o.length;t.encode(o,r);let n=i.writeUpdatableValue();s.push((t=>{n(t+e)}))}else t.encode(i,r)})),s.forEach((t=>{t(i.length)}));let a=t.appendWriter(i);return a+=t.appendWriter(o),a}function ks(t,e){let r=[],n=t.subReader(0);e.forEach((e=>{let i=null;if(e.dynamic){let r=t.readValue(),o=n.subReader(r.toNumber());try{i=e.decode(o)}catch(t){if(t.code===Ki.errors.BUFFER_OVERRUN)throw t;i=t,i.baseType=e.name,i.name=e.localName,i.type=e.type}}else try{i=e.decode(t)}catch(t){if(t.code===Ki.errors.BUFFER_OVERRUN)throw t;i=t,i.baseType=e.name,i.name=e.localName,i.type=e.type}null!=i&&r.push(i)}));const i=e.reduce(((t,e)=>{const r=e.localName;return r&&(t[r]||(t[r]=0),t[r]++),t}),{});e.forEach(((t,e)=>{let n=t.localName;if(!n||1!==i[n])return;if("length"===n&&(n="_length"),null!=r[n])return;const o=r[e];o instanceof Error?Object.defineProperty(r,n,{enumerable:!0,get:()=>{throw o}}):r[n]=o}));for(let t=0;t<r.length;t++){const e=r[t];e instanceof Error&&Object.defineProperty(r,t,{enumerable:!0,get:()=>{throw e}})}return Object.freeze(r)}class Ps extends ts{constructor(t,e,r){super("array",t.type+"["+(e>=0?e:"")+"]",r,-1===e||t.dynamic),this.coder=t,this.length=e}defaultValue(){const t=this.coder.defaultValue(),e=[];for(let r=0;r<this.length;r++)e.push(t);return e}encode(t,e){Array.isArray(e)||this._throwError("expected array value",e);let r=this.length;-1===r&&(r=e.length,t.writeValue(e.length)),Ss.checkArgumentCount(e.length,r,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let t=0;t<e.length;t++)n.push(this.coder);return _s(t,n,e)}decode(t){let e=this.length;-1===e&&(e=t.readValue().toNumber(),32*e>t._data.length&&Ss.throwError("insufficient data length",Ki.errors.BUFFER_OVERRUN,{length:t._data.length,count:e}));let r=[];for(let t=0;t<e;t++)r.push(new As(this.coder));return t.coerce(this.name,ks(t,r))}}class xs extends ts{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){return t.writeValue(e?1:0)}decode(t){return t.coerce(this.type,!t.readValue().isZero())}}class Ms extends ts{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=Xi(e);let r=t.writeValue(e.length);return r+=t.writeBytes(e),r}decode(t){return t.readBytes(t.readValue().toNumber(),!0)}}class Is extends Ms{constructor(t){super("bytes",t)}decode(t){return t.coerce(this.name,to(super.decode(t)))}}class Rs extends ts{constructor(t,e){let r="bytes"+String(t);super(r,r,e,!1),this.size=t}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(t,e){let r=Xi(e);return r.length!==this.size&&this._throwError("incorrect data length",e),t.writeBytes(r)}decode(t){return t.coerce(this.name,to(t.readBytes(this.size)))}}class Ns extends ts{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return null!=e&&this._throwError("not null",e),t.writeBytes([])}decode(t){return t.readBytes(0),t.coerce(this.name,null)}}const Cs=lo.from(-1),Ts=lo.from(0),Os=lo.from(1),Bs=lo.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Fs extends ts{constructor(t,e,r){const n=(e?"int":"uint")+8*t;super(n,n,r,!1),this.size=t,this.signed=e}defaultValue(){return 0}encode(t,e){let r=lo.from(e),n=Bs.mask(8*t.wordSize);if(this.signed){let t=n.mask(8*this.size-1);(r.gt(t)||r.lt(t.add(Os).mul(Cs)))&&this._throwError("value out-of-bounds",e)}else(r.lt(Ts)||r.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",e);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*t.wordSize)),t.writeValue(r)}decode(t){let e=t.readValue().mask(8*this.size);return this.signed&&(e=e.fromTwos(8*this.size)),t.coerce(this.name,e)}}const Ds=new Ki("strings/5.5.0");var Us,Ls;function Hs(t,e,r,n,i){if(t===Ls.BAD_PREFIX||t===Ls.UNEXPECTED_CONTINUE){let t=0;for(let n=e+1;n<r.length&&r[n]>>6==2;n++)t++;return t}return t===Ls.OVERRUN?r.length-e-1:0}!function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"}(Us||(Us={})),function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"}(Ls||(Ls={}));const zs=Object.freeze({error:function(t,e,r,n,i){return Ds.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)},ignore:Hs,replace:function(t,e,r,n,i){return t===Ls.OVERLONG?(n.push(i),0):(n.push(65533),Hs(t,e,r))}});function js(t,e){null==e&&(e=zs.error),t=Xi(t);const r=[];let n=0;for(;n<t.length;){const i=t[n++];if(i>>7==0){r.push(i);continue}let o=null,s=null;if(192==(224&i))o=1,s=127;else if(224==(240&i))o=2,s=2047;else{if(240!=(248&i)){n+=e(128==(192&i)?Ls.UNEXPECTED_CONTINUE:Ls.BAD_PREFIX,n-1,t,r);continue}o=3,s=65535}if(n-1+o>=t.length){n+=e(Ls.OVERRUN,n-1,t,r);continue}let a=i&(1<<8-o-1)-1;for(let i=0;i<o;i++){let i=t[n];if(128!=(192&i)){n+=e(Ls.MISSING_CONTINUE,n,t,r),a=null;break}a=a<<6|63&i,n++}null!==a&&(a>1114111?n+=e(Ls.OUT_OF_RANGE,n-1-o,t,r,a):a>=55296&&a<=57343?n+=e(Ls.UTF16_SURROGATE,n-1-o,t,r,a):a<=s?n+=e(Ls.OVERLONG,n-1-o,t,r,a):r.push(a))}return r}function Ks(t,e=Us.current){e!=Us.current&&(Ds.checkNormalize(),t=t.normalize(e));let r=[];for(let e=0;e<t.length;e++){const n=t.charCodeAt(e);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){e++;const i=t.charCodeAt(e);if(e>=t.length||56320!=(64512&i))throw new Error("invalid utf-8 string");const o=65536+((1023&n)<<10)+(1023&i);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(63&o|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return Xi(r)}function Ws(t){return t.map((t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10&1023),56320+(1023&t))))).join("")}function Js(t,e){return Ws(js(t,e))}function qs(t,e=Us.current){return js(Ks(t,e))}function Gs(t,e){e||(e=function(t){return[parseInt(t,16)]});let r=0,n={};return t.split(",").forEach((t=>{let i=t.split(":");r+=parseInt(i[0],16),n[r]=e(i[1])})),n}function Vs(t){let e=0;return t.split(",").map((t=>{let r=t.split("-");1===r.length?r[1]="0":""===r[1]&&(r[1]="1");let n=e+parseInt(r[0],16);return e=parseInt(r[1],16),{l:n,h:e}}))}function $s(t,e){let r=0;for(let n=0;n<e.length;n++){let i=e[n];if(r+=i.l,t>=r&&t<=r+i.h&&(t-r)%(i.d||1)==0){if(i.e&&-1!==i.e.indexOf(t-r))continue;return i}}return null}const Xs=Vs("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),Zs="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map((t=>parseInt(t,16))),Ys=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],Qs=Gs("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),ta=Gs("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),ea=Gs("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",(function(t){if(t.length%4!=0)throw new Error("bad data");let e=[];for(let r=0;r<t.length;r+=4)e.push(parseInt(t.substring(r,r+4),16));return e})),ra=Vs("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function na(t){if(t.match(/^[a-z0-9-]*$/i)&&t.length<=59)return t.toLowerCase();let e=qs(t);var r;r=e.map((t=>{if(Zs.indexOf(t)>=0)return[];if(t>=65024&&t<=65039)return[];let e=function(t){let e=$s(t,Ys);if(e)return[t+e.s];let r=Qs[t];if(r)return r;let n=ta[t];return n?[t+n[0]]:ea[t]||null}(t);return e||[t]})),e=r.reduce(((t,e)=>(e.forEach((e=>{t.push(e)})),t)),[]),e=qs(Ws(e),Us.NFKC),e.forEach((t=>{if($s(t,ra))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")})),e.forEach((t=>{if($s(t,Xs))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")}));let n=Ws(e);if("-"===n.substring(0,1)||"--"===n.substring(2,4)||"-"===n.substring(n.length-1))throw new Error("invalid hyphen");if(n.length>63)throw new Error("too long");return n}class ia extends Ms{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,Ks(e))}decode(t){return Js(super.decode(t))}}class oa extends ts{constructor(t,e){let r=!1;const n=[];t.forEach((t=>{t.dynamic&&(r=!0),n.push(t.type)}));super("tuple","tuple("+n.join(",")+")",e,r),this.coders=t}defaultValue(){const t=[];this.coders.forEach((e=>{t.push(e.defaultValue())}));const e=this.coders.reduce(((t,e)=>{const r=e.localName;return r&&(t[r]||(t[r]=0),t[r]++),t}),{});return this.coders.forEach(((r,n)=>{let i=r.localName;i&&1===e[i]&&("length"===i&&(i="_length"),null==t[i]&&(t[i]=t[n]))})),Object.freeze(t)}encode(t,e){return _s(t,this.coders,e)}decode(t){return t.coerce(this.name,ks(t,this.coders))}}const sa=new Ki("abi/5.5.0"),aa=new RegExp(/^bytes([0-9]*)$/),ha=new RegExp(/^(u?int)([0-9]*)$/);class ua{constructor(t){sa.checkNew(new.target,ua),bo(this,"coerceFunc",t||null)}_getCoder(t){switch(t.baseType){case"address":return new Es(t.name);case"bool":return new xs(t.name);case"string":return new ia(t.name);case"bytes":return new Is(t.name);case"array":return new Ps(this._getCoder(t.arrayChildren),t.arrayLength,t.name);case"tuple":return new oa((t.components||[]).map((t=>this._getCoder(t))),t.name);case"":return new Ns(t.name)}let e=t.type.match(ha);if(e){let r=parseInt(e[2]||"256");return(0===r||r>256||r%8!=0)&&sa.throwArgumentError("invalid "+e[1]+" bit length","param",t),new Fs(r/8,"int"===e[1],t.name)}if(e=t.type.match(aa),e){let r=parseInt(e[1]);return(0===r||r>32)&&sa.throwArgumentError("invalid bytes length","param",t),new Rs(r,t.name)}return sa.throwArgumentError("invalid type","type",t.type)}_getWordSize(){return 32}_getReader(t,e){return new rs(t,this._getWordSize(),this.coerceFunc,e)}_getWriter(){return new es(this._getWordSize())}getDefaultValue(t){const e=t.map((t=>this._getCoder(Uo.from(t))));return new oa(e,"_").defaultValue()}encode(t,e){t.length!==e.length&&sa.throwError("types/values length mismatch",Ki.errors.INVALID_ARGUMENT,{count:{types:t.length,values:e.length},value:{types:t,values:e}});const r=t.map((t=>this._getCoder(Uo.from(t)))),n=new oa(r,"_"),i=this._getWriter();return n.encode(i,e),i.data}decode(t,e,r){const n=t.map((t=>this._getCoder(Uo.from(t))));return new oa(n,"_").decode(this._getReader(Xi(e),r))}}const ca=new ua;function fa(t){return ss(Ks(t))}const la=new Ki("hash/5.5.0"),da=new Uint8Array(32);da.fill(0);const pa=new RegExp("^((.*)\\.)?([^.]+)$");function ma(t){"string"!=typeof t&&la.throwArgumentError("invalid ENS name; not a string","name",t);let e=t,r=da;for(;e.length;){const n=e.match(pa);null!=n&&""!==n[2]||la.throwArgumentError("invalid ENS address; missing component","name",t);r=ss(Zi([r,ss(Ks(na(n[3])))])),e=n[2]||""}return to(r)}var ga=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function a(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}h((n=n.apply(t,e||[])).next())}))};const ya=new Ki("hash/5.5.0"),va=new Uint8Array(32);va.fill(0);const wa=lo.from(-1),ba=lo.from(0),Ea=lo.from(1),Aa=lo.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const Sa=oo(Ea.toHexString(),32),_a=oo(ba.toHexString(),32),ka={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Pa=["name","version","chainId","verifyingContract","salt"];function xa(t){return function(e){return"string"!=typeof e&&ya.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const Ma={name:xa("name"),version:xa("version"),chainId:function(t){try{return lo.from(t).toString()}catch(t){}return ya.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return ws(t).toLowerCase()}catch(t){}return ya.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=Xi(t);if(32!==e.length)throw new Error("bad length");return to(e)}catch(t){}return ya.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function Ia(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=""===e[1],n=parseInt(e[2]||"256");(n%8!=0||n>256||e[2]&&e[2]!==String(n))&&ya.throwArgumentError("invalid numeric width","type",t);const i=Aa.mask(r?n-1:n),o=r?i.add(Ea).mul(wa):ba;return function(e){const r=lo.from(e);return(r.lt(o)||r.gt(i))&&ya.throwArgumentError(`value out-of-bounds for ${t}`,"value",e),oo(r.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(0===r||r>32||e[1]!==String(r))&&ya.throwArgumentError("invalid bytes width","type",t),function(e){return Xi(e).length!==r&&ya.throwArgumentError(`invalid length for ${t}`,"value",e),function(t){const e=Xi(t),r=e.length%32;return r?no([e,va.slice(r)]):to(e)}(e)}}}switch(t){case"address":return function(t){return oo(ws(t),32)};case"bool":return function(t){return t?Sa:_a};case"bytes":return function(t){return ss(t)};case"string":return function(t){return fa(t)}}return null}function Ra(t,e){return`${t}(${e.map((({name:t,type:e})=>e+" "+t)).join(",")})`}class Na{constructor(t){bo(this,"types",Object.freeze(Mo(t))),bo(this,"_encoderCache",{}),bo(this,"_types",{});const e={},r={},n={};Object.keys(t).forEach((t=>{e[t]={},r[t]=[],n[t]={}}));for(const n in t){const i={};t[n].forEach((o=>{i[o.name]&&ya.throwArgumentError(`duplicate variable name ${JSON.stringify(o.name)} in ${JSON.stringify(n)}`,"types",t),i[o.name]=!0;const s=o.type.match(/^([^\x5b]*)(\x5b|$)/)[1];s===n&&ya.throwArgumentError(`circular type reference to ${JSON.stringify(s)}`,"types",t);Ia(s)||(r[s]||ya.throwArgumentError(`unknown type ${JSON.stringify(s)}`,"types",t),r[s].push(n),e[n][s]=!0)}))}const i=Object.keys(r).filter((t=>0===r[t].length));0===i.length?ya.throwArgumentError("missing primary type","types",t):i.length>1&&ya.throwArgumentError(`ambiguous primary types or unused types: ${i.map((t=>JSON.stringify(t))).join(", ")}`,"types",t),bo(this,"primaryType",i[0]),function i(o,s){s[o]&&ya.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",t),s[o]=!0,Object.keys(e[o]).forEach((t=>{r[t]&&(i(t,s),Object.keys(s).forEach((e=>{n[e][t]=!0})))})),delete s[o]}(this.primaryType,{});for(const e in n){const r=Object.keys(n[e]);r.sort(),this._types[e]=Ra(e,t[e])+r.map((e=>Ra(e,t[e]))).join("")}}getEncoder(t){let e=this._encoderCache[t];return e||(e=this._encoderCache[t]=this._getEncoder(t)),e}_getEncoder(t){{const e=Ia(t);if(e)return e}const e=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(e){const t=e[1],r=this.getEncoder(t),n=parseInt(e[3]);return e=>{n>=0&&e.length!==n&&ya.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e);let i=e.map(r);return this._types[t]&&(i=i.map(ss)),ss(no(i))}}const r=this.types[t];if(r){const e=fa(this._types[t]);return t=>{const n=r.map((({name:e,type:r})=>{const n=this.getEncoder(r)(t[e]);return this._types[r]?ss(n):n}));return n.unshift(e),no(n)}}return ya.throwArgumentError(`unknown type: ${t}`,"type",t)}encodeType(t){const e=this._types[t];return e||ya.throwArgumentError(`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return ss(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,r){if(Ia(t))return r(t,e);const n=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const t=n[1],i=parseInt(n[3]);return i>=0&&e.length!==i&&ya.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e),e.map((e=>this._visit(t,e,r)))}const i=this.types[t];return i?i.reduce(((t,{name:n,type:i})=>(t[n]=this._visit(i,e[n],r),t)),{}):ya.throwArgumentError(`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new Na(t)}static getPrimaryType(t){return Na.from(t).primaryType}static hashStruct(t,e,r){return Na.from(e).hashStruct(t,r)}static hashDomain(t){const e=[];for(const r in t){const n=ka[r];n||ya.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",t),e.push({name:r,type:n})}return e.sort(((t,e)=>Pa.indexOf(t.name)-Pa.indexOf(e.name))),Na.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,r){return no(["0x1901",Na.hashDomain(t),Na.from(e).hash(r)])}static hash(t,e,r){return ss(Na.encode(t,e,r))}static resolveNames(t,e,r,n){return ga(this,void 0,void 0,(function*(){t=_o(t);const i={};t.verifyingContract&&!Qi(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");const o=Na.from(e);o.visit(r,((t,e)=>("address"!==t||Qi(e,20)||(i[e]="0x"),e)));for(const t in i)i[t]=yield n(t);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),r=o.visit(r,((t,e)=>"address"===t&&i[e]?i[e]:e)),{domain:t,value:r}}))}static getPayload(t,e,r){Na.hashDomain(t);const n={},i=[];Pa.forEach((e=>{const r=t[e];null!=r&&(n[e]=Ma[e](r),i.push({name:e,type:ka[e]}))}));const o=Na.from(e),s=_o(e);return s.EIP712Domain?ya.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",e):s.EIP712Domain=i,o.encode(r),{types:s,domain:n,primaryType:o.primaryType,message:o.visit(r,((t,e)=>{if(t.match(/^bytes(\d*)/))return to(Xi(e));if(t.match(/^u?int/))return lo.from(e).toString();switch(t){case"address":return e.toLowerCase();case"bool":return!!e;case"string":return"string"!=typeof e&&ya.throwArgumentError("invalid string","value",e),e}return ya.throwArgumentError("unsupported type","type",t)}))}}}const Ca=new Ki("abi/5.5.0");class Ta extends Io{}class Oa extends Io{}class Ba extends Io{}class Fa extends Io{static isIndexed(t){return!(!t||!t._isIndexed)}}const Da={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function Ua(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class La{constructor(t){Ca.checkNew(new.target,La);let e=[];e="string"==typeof t?JSON.parse(t):t,bo(this,"fragments",e.map((t=>Ho.from(t))).filter((t=>null!=t))),bo(this,"_abiCoder",Eo(new.target,"getAbiCoder")()),bo(this,"functions",{}),bo(this,"errors",{}),bo(this,"events",{}),bo(this,"structs",{}),this.fragments.forEach((t=>{let e=null;switch(t.type){case"constructor":return this.deploy?void Ca.warn("duplicate definition - constructor"):void bo(this,"deploy",t);case"function":e=this.functions;break;case"event":e=this.events;break;case"error":e=this.errors;break;default:return}let r=t.format();e[r]?Ca.warn("duplicate definition - "+r):e[r]=t})),this.deploy||bo(this,"deploy",Jo.from({payable:!1,type:"constructor"})),bo(this,"_isInterface",!0)}format(t){t||(t=Fo.full),t===Fo.sighash&&Ca.throwArgumentError("interface does not support formatting sighash","format",t);const e=this.fragments.map((e=>e.format(t)));return t===Fo.json?JSON.stringify(e.map((t=>JSON.parse(t)))):e}static getAbiCoder(){return ca}static getAddress(t){return ws(t)}static getSighash(t){return ro(fa(t.format()),0,4)}static getEventTopic(t){return fa(t.format())}getFunction(t){if(Qi(t)){for(const e in this.functions)if(t===this.getSighash(e))return this.functions[e];Ca.throwArgumentError("no matching function","sighash",t)}if(-1===t.indexOf("(")){const e=t.trim(),r=Object.keys(this.functions).filter((t=>t.split("(")[0]===e));return 0===r.length?Ca.throwArgumentError("no matching function","name",e):r.length>1&&Ca.throwArgumentError("multiple matching functions","name",e),this.functions[r[0]]}const e=this.functions[qo.fromString(t).format()];return e||Ca.throwArgumentError("no matching function","signature",t),e}getEvent(t){if(Qi(t)){const e=t.toLowerCase();for(const t in this.events)if(e===this.getEventTopic(t))return this.events[t];Ca.throwArgumentError("no matching event","topichash",e)}if(-1===t.indexOf("(")){const e=t.trim(),r=Object.keys(this.events).filter((t=>t.split("(")[0]===e));return 0===r.length?Ca.throwArgumentError("no matching event","name",e):r.length>1&&Ca.throwArgumentError("multiple matching events","name",e),this.events[r[0]]}const e=this.events[zo.fromString(t).format()];return e||Ca.throwArgumentError("no matching event","signature",t),e}getError(t){if(Qi(t)){const e=Eo(this.constructor,"getSighash");for(const r in this.errors){if(t===e(this.errors[r]))return this.errors[r]}Ca.throwArgumentError("no matching error","sighash",t)}if(-1===t.indexOf("(")){const e=t.trim(),r=Object.keys(this.errors).filter((t=>t.split("(")[0]===e));return 0===r.length?Ca.throwArgumentError("no matching error","name",e):r.length>1&&Ca.throwArgumentError("multiple matching errors","name",e),this.errors[r[0]]}const e=this.errors[qo.fromString(t).format()];return e||Ca.throwArgumentError("no matching error","signature",t),e}getSighash(t){if("string"==typeof t)try{t=this.getFunction(t)}catch(e){try{t=this.getError(t)}catch(t){throw e}}return Eo(this.constructor,"getSighash")(t)}getEventTopic(t){return"string"==typeof t&&(t=this.getEvent(t)),Eo(this.constructor,"getEventTopic")(t)}_decodeParams(t,e){return this._abiCoder.decode(t,e)}_encodeParams(t,e){return this._abiCoder.encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){"string"==typeof t&&(t=this.getError(t));const r=Xi(e);return to(r.slice(0,4))!==this.getSighash(t)&&Ca.throwArgumentError(`data signature does not match error ${t.name}.`,"data",to(r)),this._decodeParams(t.inputs,r.slice(4))}encodeErrorResult(t,e){return"string"==typeof t&&(t=this.getError(t)),to(Zi([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}decodeFunctionData(t,e){"string"==typeof t&&(t=this.getFunction(t));const r=Xi(e);return to(r.slice(0,4))!==this.getSighash(t)&&Ca.throwArgumentError(`data signature does not match function ${t.name}.`,"data",to(r)),this._decodeParams(t.inputs,r.slice(4))}encodeFunctionData(t,e){return"string"==typeof t&&(t=this.getFunction(t)),to(Zi([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}decodeFunctionResult(t,e){"string"==typeof t&&(t=this.getFunction(t));let r=Xi(e),n=null,i=null,o=null,s=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(t.outputs,r)}catch(t){}break;case 4:{const t=to(r.slice(0,4)),e=Da[t];if(e)i=this._abiCoder.decode(e.inputs,r.slice(4)),o=e.name,s=e.signature,e.reason&&(n=i[0]);else try{const e=this.getError(t);i=this._abiCoder.decode(e.inputs,r.slice(4)),o=e.name,s=e.format()}catch(t){console.log(t)}break}}return Ca.throwError("call revert exception",Ki.errors.CALL_EXCEPTION,{method:t.format(),errorArgs:i,errorName:o,errorSignature:s,reason:n})}encodeFunctionResult(t,e){return"string"==typeof t&&(t=this.getFunction(t)),to(this._abiCoder.encode(t.outputs,e||[]))}encodeFilterTopics(t,e){"string"==typeof t&&(t=this.getEvent(t)),e.length>t.inputs.length&&Ca.throwError("too many arguments for "+t.format(),Ki.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:e});let r=[];t.anonymous||r.push(this.getEventTopic(t));const n=(t,e)=>"string"===t.type?fa(e):"bytes"===t.type?ss(to(e)):("address"===t.type&&this._abiCoder.encode(["address"],[e]),oo(to(e),32));for(e.forEach(((e,i)=>{let o=t.inputs[i];o.indexed?null==e?r.push(null):"array"===o.baseType||"tuple"===o.baseType?Ca.throwArgumentError("filtering with tuples or arrays not supported","contract."+o.name,e):Array.isArray(e)?r.push(e.map((t=>n(o,t)))):r.push(n(o,e)):null!=e&&Ca.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+o.name,e)}));r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(t,e){"string"==typeof t&&(t=this.getEvent(t));const r=[],n=[],i=[];return t.anonymous||r.push(this.getEventTopic(t)),e.length!==t.inputs.length&&Ca.throwArgumentError("event arguments/values mismatch","values",e),t.inputs.forEach(((t,o)=>{const s=e[o];if(t.indexed)if("string"===t.type)r.push(fa(s));else if("bytes"===t.type)r.push(ss(s));else{if("tuple"===t.baseType||"array"===t.baseType)throw new Error("not implemented");r.push(this._abiCoder.encode([t.type],[s]))}else n.push(t),i.push(s)})),{data:this._abiCoder.encode(n,i),topics:r}}decodeEventLog(t,e,r){if("string"==typeof t&&(t=this.getEvent(t)),null!=r&&!t.anonymous){let e=this.getEventTopic(t);Qi(r[0],32)&&r[0].toLowerCase()===e||Ca.throwError("fragment/topic mismatch",Ki.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:e,value:r[0]}),r=r.slice(1)}let n=[],i=[],o=[];t.inputs.forEach(((t,e)=>{t.indexed?"string"===t.type||"bytes"===t.type||"tuple"===t.baseType||"array"===t.baseType?(n.push(Uo.fromObject({type:"bytes32",name:t.name})),o.push(!0)):(n.push(t),o.push(!1)):(i.push(t),o.push(!1))}));let s=null!=r?this._abiCoder.decode(n,Zi(r)):null,a=this._abiCoder.decode(i,e,!0),h=[],u=0,c=0;t.inputs.forEach(((t,e)=>{if(t.indexed)if(null==s)h[e]=new Fa({_isIndexed:!0,hash:null});else if(o[e])h[e]=new Fa({_isIndexed:!0,hash:s[c++]});else try{h[e]=s[c++]}catch(t){h[e]=t}else try{h[e]=a[u++]}catch(t){h[e]=t}if(t.name&&null==h[t.name]){const r=h[e];r instanceof Error?Object.defineProperty(h,t.name,{enumerable:!0,get:()=>{throw Ua(`property ${JSON.stringify(t.name)}`,r)}}):h[t.name]=r}}));for(let t=0;t<h.length;t++){const e=h[t];e instanceof Error&&Object.defineProperty(h,t,{enumerable:!0,get:()=>{throw Ua(`index ${t}`,e)}})}return Object.freeze(h)}parseTransaction(t){let e=this.getFunction(t.data.substring(0,10).toLowerCase());return e?new Oa({args:this._abiCoder.decode(e.inputs,"0x"+t.data.substring(10)),functionFragment:e,name:e.name,signature:e.format(),sighash:this.getSighash(e),value:lo.from(t.value||"0")}):null}parseLog(t){let e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new Ta({eventFragment:e,name:e.name,signature:e.format(),topic:this.getEventTopic(e),args:this.decodeEventLog(e,t.data,t.topics)})}parseError(t){const e=to(t);let r=this.getError(e.substring(0,10).toLowerCase());return r?new Ba({args:this._abiCoder.decode(r.inputs,"0x"+e.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(t){return!(!t||!t._isInterface)}}var Ha=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function a(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}h((n=n.apply(t,e||[])).next())}))};const za=new Ki("abstract-provider/5.5.1");class ja extends Io{static isForkEvent(t){return!(!t||!t._isForkEvent)}}class Ka{constructor(){za.checkAbstract(new.target,Ka),bo(this,"_isProvider",!0)}getFeeData(){return Ha(this,void 0,void 0,(function*(){const{block:t,gasPrice:e}=yield Ao({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((t=>null))});let r=null,n=null;return t&&t.baseFeePerGas&&(n=lo.from("2500000000"),r=t.baseFeePerGas.mul(2).add(n)),{maxFeePerGas:r,maxPriorityFeePerGas:n,gasPrice:e}}))}addListener(t,e){return this.on(t,e)}removeListener(t,e){return this.off(t,e)}static isProvider(t){return!(!t||!t._isProvider)}}var Wa=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function a(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}h((n=n.apply(t,e||[])).next())}))};const Ja=new Ki("abstract-signer/5.5.0"),qa=["accessList","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],Ga=[Ki.errors.INSUFFICIENT_FUNDS,Ki.errors.NONCE_EXPIRED,Ki.errors.REPLACEMENT_UNDERPRICED];class Va{constructor(){Ja.checkAbstract(new.target,Va),bo(this,"_isSigner",!0)}getBalance(t){return Wa(this,void 0,void 0,(function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),t)}))}getTransactionCount(t){return Wa(this,void 0,void 0,(function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),t)}))}estimateGas(t){return Wa(this,void 0,void 0,(function*(){this._checkProvider("estimateGas");const e=yield Ao(this.checkTransaction(t));return yield this.provider.estimateGas(e)}))}call(t,e){return Wa(this,void 0,void 0,(function*(){this._checkProvider("call");const r=yield Ao(this.checkTransaction(t));return yield this.provider.call(r,e)}))}sendTransaction(t){return Wa(this,void 0,void 0,(function*(){this._checkProvider("sendTransaction");const e=yield this.populateTransaction(t),r=yield this.signTransaction(e);return yield this.provider.sendTransaction(r)}))}getChainId(){return Wa(this,void 0,void 0,(function*(){this._checkProvider("getChainId");return(yield this.provider.getNetwork()).chainId}))}getGasPrice(){return Wa(this,void 0,void 0,(function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()}))}getFeeData(){return Wa(this,void 0,void 0,(function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()}))}resolveName(t){return Wa(this,void 0,void 0,(function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(t)}))}checkTransaction(t){for(const e in t)-1===qa.indexOf(e)&&Ja.throwArgumentError("invalid transaction key: "+e,"transaction",t);const e=_o(t);return null==e.from?e.from=this.getAddress():e.from=Promise.all([Promise.resolve(e.from),this.getAddress()]).then((e=>(e[0].toLowerCase()!==e[1].toLowerCase()&&Ja.throwArgumentError("from address mismatch","transaction",t),e[0]))),e}populateTransaction(t){return Wa(this,void 0,void 0,(function*(){const e=yield Ao(this.checkTransaction(t));null!=e.to&&(e.to=Promise.resolve(e.to).then((t=>Wa(this,void 0,void 0,(function*(){if(null==t)return null;const e=yield this.resolveName(t);return null==e&&Ja.throwArgumentError("provided ENS name resolves to null","tx.to",t),e})))),e.to.catch((t=>{})));const r=null!=e.maxFeePerGas||null!=e.maxPriorityFeePerGas;if(null==e.gasPrice||2!==e.type&&!r?0!==e.type&&1!==e.type||!r||Ja.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",t):Ja.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",t),2!==e.type&&null!=e.type||null==e.maxFeePerGas||null==e.maxPriorityFeePerGas)if(0===e.type||1===e.type)null==e.gasPrice&&(e.gasPrice=this.getGasPrice());else{const t=yield this.getFeeData();if(null==e.type)if(null!=t.maxFeePerGas&&null!=t.maxPriorityFeePerGas)if(e.type=2,null!=e.gasPrice){const t=e.gasPrice;delete e.gasPrice,e.maxFeePerGas=t,e.maxPriorityFeePerGas=t}else null==e.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null==e.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas);else null!=t.gasPrice?(r&&Ja.throwError("network does not support EIP-1559",Ki.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==e.gasPrice&&(e.gasPrice=t.gasPrice),e.type=0):Ja.throwError("failed to get consistent fee data",Ki.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else 2===e.type&&(null==e.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null==e.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas))}else e.type=2;return null==e.nonce&&(e.nonce=this.getTransactionCount("pending")),null==e.gasLimit&&(e.gasLimit=this.estimateGas(e).catch((t=>{if(Ga.indexOf(t.code)>=0)throw t;return Ja.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Ki.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,tx:e})}))),null==e.chainId?e.chainId=this.getChainId():e.chainId=Promise.all([Promise.resolve(e.chainId),this.getChainId()]).then((e=>(0!==e[1]&&e[0]!==e[1]&&Ja.throwArgumentError("chainId address mismatch","transaction",t),e[0]))),yield Ao(e)}))}_checkProvider(t){this.provider||Ja.throwError("missing provider",Ki.errors.UNSUPPORTED_OPERATION,{operation:t||"_checkProvider"})}static isSigner(t){return!(!t||!t._isSigner)}}class $a extends Va{constructor(t,e){Ja.checkNew(new.target,$a),super(),bo(this,"address",t),bo(this,"provider",e||null)}getAddress(){return Promise.resolve(this.address)}_fail(t,e){return Promise.resolve().then((()=>{Ja.throwError(t,Ki.errors.UNSUPPORTED_OPERATION,{operation:e})}))}signMessage(t){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(t){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(t,e,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(t){return new $a(this.address,t)}}function Xa(t,e,r){return r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},t(r,r.exports),r.exports}var Za=Ya;function Ya(t,e){if(!t)throw new Error(e||"Assertion failed")}Ya.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)};var Qa=Xa((function(t,e){var r=e;function n(t){return 1===t.length?"0"+t:t}function i(t){for(var e="",r=0;r<t.length;r++)e+=n(t[r].toString(16));return e}r.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"!=typeof t){for(var n=0;n<t.length;n++)r[n]=0|t[n];return r}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t);for(n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(n=0;n<t.length;n++){var i=t.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r},r.zero2=n,r.toHex=i,r.encode=function(t,e){return"hex"===e?i(t):t}})),th=Xa((function(t,e){var r=e;r.assert=Za,r.toArray=Qa.toArray,r.zero2=Qa.zero2,r.toHex=Qa.toHex,r.encode=Qa.encode,r.getNAF=function(t,e,r){var n=new Array(Math.max(t.bitLength(),r)+1);n.fill(0);for(var i=1<<e+1,o=t.clone(),s=0;s<n.length;s++){var a,h=o.andln(i-1);o.isOdd()?(a=h>(i>>1)-1?(i>>1)-h:h,o.isubn(a)):a=0,n[s]=a,o.iushrn(1)}return n},r.getJSF=function(t,e){var r=[[],[]];t=t.clone(),e=e.clone();for(var n,i=0,o=0;t.cmpn(-i)>0||e.cmpn(-o)>0;){var s,a,h=t.andln(3)+i&3,u=e.andln(3)+o&3;3===h&&(h=-1),3===u&&(u=-1),s=0==(1&h)?0:3!==(n=t.andln(7)+i&7)&&5!==n||2!==u?h:-h,r[0].push(s),a=0==(1&u)?0:3!==(n=e.andln(7)+o&7)&&5!==n||2!==h?u:-u,r[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),t.iushrn(1),e.iushrn(1)}return r},r.cachedProperty=function(t,e,r){var n="_"+e;t.prototype[e]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(t){return"string"==typeof t?r.toArray(t,"hex"):t},r.intFromLE=function(t){return new c(t,"hex","le")}})),eh=th.getNAF,rh=th.getJSF,nh=th.assert;function ih(t,e){this.type=t,this.p=new c(e.p,16),this.red=e.prime?c.red(e.prime):c.mont(this.p),this.zero=new c(0).toRed(this.red),this.one=new c(1).toRed(this.red),this.two=new c(2).toRed(this.red),this.n=e.n&&new c(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var oh=ih;function sh(t,e){this.curve=t,this.type=e,this.precomputed=null}ih.prototype.point=function(){throw new Error("Not implemented")},ih.prototype.validate=function(){throw new Error("Not implemented")},ih.prototype._fixedNafMul=function(t,e){nh(t.precomputed);var r=t._getDoubles(),n=eh(e,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var o,s,a=[];for(o=0;o<n.length;o+=r.step){s=0;for(var h=o+r.step-1;h>=o;h--)s=(s<<1)+n[h];a.push(s)}for(var u=this.jpoint(null,null,null),c=this.jpoint(null,null,null),f=i;f>0;f--){for(o=0;o<a.length;o++)(s=a[o])===f?c=c.mixedAdd(r.points[o]):s===-f&&(c=c.mixedAdd(r.points[o].neg()));u=u.add(c)}return u.toP()},ih.prototype._wnafMul=function(t,e){var r=4,n=t._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=eh(e,r,this._bitLength),s=this.jpoint(null,null,null),a=o.length-1;a>=0;a--){for(var h=0;a>=0&&0===o[a];a--)h++;if(a>=0&&h++,s=s.dblp(h),a<0)break;var u=o[a];nh(0!==u),s="affine"===t.type?u>0?s.mixedAdd(i[u-1>>1]):s.mixedAdd(i[-u-1>>1].neg()):u>0?s.add(i[u-1>>1]):s.add(i[-u-1>>1].neg())}return"affine"===t.type?s.toP():s},ih.prototype._wnafMulAdd=function(t,e,r,n,i){var o,s,a,h=this._wnafT1,u=this._wnafT2,c=this._wnafT3,f=0;for(o=0;o<n;o++){var l=(a=e[o])._getNAFPoints(t);h[o]=l.wnd,u[o]=l.points}for(o=n-1;o>=1;o-=2){var d=o-1,p=o;if(1===h[d]&&1===h[p]){var m=[e[d],null,null,e[p]];0===e[d].y.cmp(e[p].y)?(m[1]=e[d].add(e[p]),m[2]=e[d].toJ().mixedAdd(e[p].neg())):0===e[d].y.cmp(e[p].y.redNeg())?(m[1]=e[d].toJ().mixedAdd(e[p]),m[2]=e[d].add(e[p].neg())):(m[1]=e[d].toJ().mixedAdd(e[p]),m[2]=e[d].toJ().mixedAdd(e[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],y=rh(r[d],r[p]);for(f=Math.max(y[0].length,f),c[d]=new Array(f),c[p]=new Array(f),s=0;s<f;s++){var v=0|y[0][s],w=0|y[1][s];c[d][s]=g[3*(v+1)+(w+1)],c[p][s]=0,u[d]=m}}else c[d]=eh(r[d],h[d],this._bitLength),c[p]=eh(r[p],h[p],this._bitLength),f=Math.max(c[d].length,f),f=Math.max(c[p].length,f)}var b=this.jpoint(null,null,null),E=this._wnafT4;for(o=f;o>=0;o--){for(var A=0;o>=0;){var S=!0;for(s=0;s<n;s++)E[s]=0|c[s][o],0!==E[s]&&(S=!1);if(!S)break;A++,o--}if(o>=0&&A++,b=b.dblp(A),o<0)break;for(s=0;s<n;s++){var _=E[s];0!==_&&(_>0?a=u[s][_-1>>1]:_<0&&(a=u[s][-_-1>>1].neg()),b="affine"===a.type?b.mixedAdd(a):b.add(a))}}for(o=0;o<n;o++)u[o]=null;return i?b:b.toP()},ih.BasePoint=sh,sh.prototype.eq=function(){throw new Error("Not implemented")},sh.prototype.validate=function(){return this.curve.validate(this)},ih.prototype.decodePoint=function(t,e){t=th.toArray(t,e);var r=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*r)return 6===t[0]?nh(t[t.length-1]%2==0):7===t[0]&&nh(t[t.length-1]%2==1),this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));if((2===t[0]||3===t[0])&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),3===t[0]);throw new Error("Unknown point format")},sh.prototype.encodeCompressed=function(t){return this.encode(t,!0)},sh.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))},sh.prototype.encode=function(t,e){return th.encode(this._encode(e),t)},sh.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},sh.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},sh.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)n=n.dbl();r.push(n)}return{step:t,points:r}},sh.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)e[i]=e[i-1].add(n);return{wnd:t,points:e}},sh.prototype._getBeta=function(){return null},sh.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e};var ah=Xa((function(t){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}})),hh=th.assert;function uh(t){oh.call(this,"short",t),this.a=new c(t.a,16).toRed(this.red),this.b=new c(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}ah(uh,oh);var ch=uh;function fh(t,e,r,n){oh.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new c(e,16),this.y=new c(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function lh(t,e,r,n){oh.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new c(0)):(this.x=new c(e,16),this.y=new c(r,16),this.z=new c(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}uh.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,r;if(t.beta)e=new c(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);e=(e=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(t.lambda)r=new c(t.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(e))?r=i[0]:(r=i[1],hh(0===this.g.mul(r).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:r,basis:t.basis?t.basis.map((function(t){return{a:new c(t.a,16),b:new c(t.b,16)}})):this._getEndoBasis(r)}}},uh.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:c.mont(t),r=new c(2).toRed(e).redInvm(),n=r.redNeg(),i=new c(3).toRed(e).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},uh.prototype._getEndoBasis=function(t){for(var e,r,n,i,o,s,a,h,u,f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=t,d=this.n.clone(),p=new c(1),m=new c(0),g=new c(0),y=new c(1),v=0;0!==l.cmpn(0);){var w=d.div(l);h=d.sub(w.mul(l)),u=g.sub(w.mul(p));var b=y.sub(w.mul(m));if(!n&&h.cmp(f)<0)e=a.neg(),r=p,n=h.neg(),i=u;else if(n&&2==++v)break;a=h,d=l,l=h,g=p,p=u,y=m,m=b}o=h.neg(),s=u;var E=n.sqr().add(i.sqr());return o.sqr().add(s.sqr()).cmp(E)>=0&&(o=e,s=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:n,b:i},{a:o,b:s}]},uh.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],n=e[1],i=n.b.mul(t).divRound(this.n),o=r.b.neg().mul(t).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),h=i.mul(r.b),u=o.mul(n.b);return{k1:t.sub(s).sub(a),k2:h.add(u).neg()}},uh.prototype.pointFromX=function(t,e){(t=new c(t,16)).red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(e&&!i||!e&&i)&&(n=n.redNeg()),this.point(t,n)},uh.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,n=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},uh.prototype._endoWnafMulAdd=function(t,e,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<t.length;o++){var s=this._endoSplit(e[o]),a=t[o],h=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),h=h.neg(!0)),n[2*o]=a,n[2*o+1]=h,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var u=this._wnafMulAdd(1,n,i,2*o,r),c=0;c<2*o;c++)n[c]=null,i[c]=null;return u},ah(fh,oh.BasePoint),uh.prototype.point=function(t,e,r){return new fh(this,t,e,r)},uh.prototype.pointFromJSON=function(t,e){return fh.fromJSON(this,t,e)},fh.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,n=function(t){return r.point(t.x.redMul(r.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return e}},fh.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},fh.fromJSON=function(t,e,r){"string"==typeof e&&(e=JSON.parse(e));var n=t.point(e[0],e[1],r);if(!e[2])return n;function i(e){return t.point(e[0],e[1],r)}var o=e[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},fh.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},fh.prototype.isInfinity=function(){return this.inf},fh.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},fh.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),n=t.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},fh.prototype.getX=function(){return this.x.fromRed()},fh.prototype.getY=function(){return this.y.fromRed()},fh.prototype.mul=function(t){return t=new c(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},fh.prototype.mulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},fh.prototype.jmulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},fh.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},fh.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,n=function(t){return t.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return e},fh.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},ah(lh,oh.BasePoint),uh.prototype.jpoint=function(t,e,r){return new lh(this,t,e,r)},lh.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(r,n)},lh.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},lh.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(e),i=t.x.redMul(r),o=this.y.redMul(e.redMul(t.z)),s=t.y.redMul(r.redMul(this.z)),a=n.redSub(i),h=o.redSub(s);if(0===a.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),c=u.redMul(a),f=n.redMul(u),l=h.redSqr().redIAdd(c).redISub(f).redISub(f),d=h.redMul(f.redISub(l)).redISub(o.redMul(c)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(l,d,p)},lh.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,n=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=s.redSqr(),u=h.redMul(s),c=r.redMul(h),f=a.redSqr().redIAdd(u).redISub(c).redISub(c),l=a.redMul(c.redISub(f)).redISub(i.redMul(u)),d=this.z.redMul(s);return this.curve.jpoint(f,l,d)},lh.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var r=this;for(e=0;e<t;e++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,h=a.redSqr().redSqr(),u=s.redAdd(s);for(e=0;e<t;e++){var c=o.redSqr(),f=u.redSqr(),l=f.redSqr(),d=c.redAdd(c).redIAdd(c).redIAdd(n.redMul(h)),p=o.redMul(f),m=d.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),y=d.redMul(g);y=y.redIAdd(y).redISub(l);var v=u.redMul(a);e+1<t&&(h=h.redMul(l)),o=m,a=v,u=y}return this.curve.jpoint(o,u.redMul(i),a)},lh.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},lh.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),h=a.redSqr().redISub(s).redISub(s),u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),t=h,e=a.redMul(s.redISub(h)).redISub(u),r=this.y.redAdd(this.y)}else{var c=this.x.redSqr(),f=this.y.redSqr(),l=f.redSqr(),d=this.x.redAdd(f).redSqr().redISub(c).redISub(l);d=d.redIAdd(d);var p=c.redAdd(c).redIAdd(c),m=p.redSqr(),g=l.redIAdd(l);g=(g=g.redIAdd(g)).redIAdd(g),t=m.redISub(d).redISub(d),e=p.redMul(d.redISub(t)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(t,e,r)},lh.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),h=a.redSqr().redISub(s).redISub(s);t=h;var u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),e=a.redMul(s.redISub(h)).redISub(u),r=this.y.redAdd(this.y)}else{var c=this.z.redSqr(),f=this.y.redSqr(),l=this.x.redMul(f),d=this.x.redSub(c).redMul(this.x.redAdd(c));d=d.redAdd(d).redIAdd(d);var p=l.redIAdd(l),m=(p=p.redIAdd(p)).redAdd(p);t=d.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(f).redISub(c);var g=f.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),e=d.redMul(p.redISub(t)).redISub(g)}return this.curve.jpoint(t,e,r)},lh.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=e.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),h=e.redAdd(e),u=(h=h.redIAdd(h)).redMul(s),c=a.redSqr().redISub(u.redAdd(u)),f=u.redISub(c),l=s.redSqr();l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var d=a.redMul(f).redISub(l),p=r.redAdd(r).redMul(n);return this.curve.jpoint(c,d,p)},lh.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),n=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),s=this.x.redAdd(e).redSqr().redISub(t).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),h=n.redIAdd(n);h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var u=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(h),c=e.redMul(u);c=(c=c.redIAdd(c)).redIAdd(c);var f=this.x.redMul(a).redISub(c);f=(f=f.redIAdd(f)).redIAdd(f);var l=this.y.redMul(u.redMul(h.redISub(u)).redISub(s.redMul(a)));l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var d=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(f,l,d)},lh.prototype.mul=function(t,e){return t=new c(t,e),this.curve._wnafMul(this,t)},lh.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(0!==this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0))return!1;var n=e.redMul(this.z),i=r.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(n)).cmpn(0)},lh.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(r))return!0;for(var n=t.clone(),i=this.curve.redN.redMul(e);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},lh.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},lh.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var dh=Xa((function(t,e){var r=e;r.base=oh,r.short=ch,r.mont=null,r.edwards=null})),ph=Xa((function(t,e){var r,n=e,i=th.assert;function o(t){"short"===t.type?this.curve=new dh.short(t):"edwards"===t.type?this.curve=new dh.edwards(t):this.curve=new dh.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function s(t,e){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){var r=new o(e);return Object.defineProperty(n,t,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:et.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:et.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:et.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:et.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:et.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:et.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:et.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(t){r=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:et.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}));function mh(t){if(!(this instanceof mh))return new mh(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Qa.toArray(t.entropy,t.entropyEnc||"hex"),r=Qa.toArray(t.nonce,t.nonceEnc||"hex"),n=Qa.toArray(t.pers,t.persEnc||"hex");Za(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var gh=mh;mh.prototype._init=function(t,e,r){var n=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},mh.prototype._hmac=function(){return new et.hmac(this.hash,this.K)},mh.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},mh.prototype.reseed=function(t,e,r,n){"string"!=typeof e&&(n=r,r=e,e=null),t=Qa.toArray(t,e),r=Qa.toArray(r,n),Za(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1},mh.prototype.generate=function(t,e,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(n=r,r=e,e=null),r&&(r=Qa.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<t;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,t);return this._update(r),this._reseed++,Qa.encode(o,e)};var yh=th.assert;function vh(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var wh=vh;vh.fromPublic=function(t,e,r){return e instanceof vh?e:new vh(t,{pub:e,pubEnc:r})},vh.fromPrivate=function(t,e,r){return e instanceof vh?e:new vh(t,{priv:e,privEnc:r})},vh.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},vh.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},vh.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},vh.prototype._importPrivate=function(t,e){this.priv=new c(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},vh.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?yh(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||yh(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},vh.prototype.derive=function(t){return t.validate()||yh(t.validate(),"public point not validated"),t.mul(this.priv).getX()},vh.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)},vh.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},vh.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var bh=th.assert;function Eh(t,e){if(t instanceof Eh)return t;this._importDER(t,e)||(bh(t.r&&t.s,"Signature without r or s"),this.r=new c(t.r,16),this.s=new c(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var Ah=Eh;function Sh(){this.place=0}function _h(t,e){var r=t[e.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,s=e.place;o<n;o++,s++)i<<=8,i|=t[s],i>>>=0;return!(i<=127)&&(e.place=s,i)}function kh(t){for(var e=0,r=t.length-1;!t[e]&&!(128&t[e+1])&&e<r;)e++;return 0===e?t:t.slice(e)}function Ph(t,e){if(e<128)t.push(e);else{var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|r);--r;)t.push(e>>>(r<<3)&255);t.push(e)}}Eh.prototype._importDER=function(t,e){t=th.toArray(t,e);var r=new Sh;if(48!==t[r.place++])return!1;var n=_h(t,r);if(!1===n)return!1;if(n+r.place!==t.length)return!1;if(2!==t[r.place++])return!1;var i=_h(t,r);if(!1===i)return!1;var o=t.slice(r.place,i+r.place);if(r.place+=i,2!==t[r.place++])return!1;var s=_h(t,r);if(!1===s)return!1;if(t.length!==s+r.place)return!1;var a=t.slice(r.place,s+r.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new c(o),this.s=new c(a),this.recoveryParam=null,!0},Eh.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&r[0]&&(r=[0].concat(r)),e=kh(e),r=kh(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];Ph(n,e.length),(n=n.concat(e)).push(2),Ph(n,r.length);var i=n.concat(r),o=[48];return Ph(o,i.length),o=o.concat(i),th.encode(o,t)};var xh=function(){throw new Error("unsupported")},Mh=th.assert;function Ih(t){if(!(this instanceof Ih))return new Ih(t);"string"==typeof t&&(Mh(Object.prototype.hasOwnProperty.call(ph,t),"Unknown curve "+t),t=ph[t]),t instanceof ph.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var Rh=Ih;Ih.prototype.keyPair=function(t){return new wh(this,t)},Ih.prototype.keyFromPrivate=function(t,e){return wh.fromPrivate(this,t,e)},Ih.prototype.keyFromPublic=function(t,e){return wh.fromPublic(this,t,e)},Ih.prototype.genKeyPair=function(t){t||(t={});for(var e=new gh({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||xh(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new c(2));;){var i=new c(e.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},Ih.prototype._truncateToN=function(t,e){var r=8*t.byteLength()-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},Ih.prototype.sign=function(t,e,r,n){"object"==typeof r&&(n=r,r=null),n||(n={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new c(t,16));for(var i=this.n.byteLength(),o=e.getPrivate().toArray("be",i),s=t.toArray("be",i),a=new gh({hash:this.hash,entropy:o,nonce:s,pers:n.pers,persEnc:n.persEnc||"utf8"}),h=this.n.sub(new c(1)),u=0;;u++){var f=n.k?n.k(u):new c(a.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(h)>=0)){var l=this.g.mul(f);if(!l.isInfinity()){var d=l.getX(),p=d.umod(this.n);if(0!==p.cmpn(0)){var m=f.invm(this.n).mul(p.mul(e.getPrivate()).iadd(t));if(0!==(m=m.umod(this.n)).cmpn(0)){var g=(l.getY().isOdd()?1:0)|(0!==d.cmp(p)?2:0);return n.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),g^=1),new Ah({r:p,s:m,recoveryParam:g})}}}}}},Ih.prototype.verify=function(t,e,r,n){t=this._truncateToN(new c(t,16)),r=this.keyFromPublic(r,n);var i=(e=new Ah(e,"hex")).r,o=e.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s,a=o.invm(this.n),h=a.mul(t).umod(this.n),u=a.mul(i).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(h,r.getPublic(),u)).isInfinity()&&s.eqXToP(i):!(s=this.g.mulAdd(h,r.getPublic(),u)).isInfinity()&&0===s.getX().umod(this.n).cmp(i)},Ih.prototype.recoverPubKey=function(t,e,r,n){Mh((3&r)===r,"The recovery param is more than two bits"),e=new Ah(e,n);var i=this.n,o=new c(t),s=e.r,a=e.s,h=1&r,u=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");s=u?this.curve.pointFromX(s.add(this.curve.n),h):this.curve.pointFromX(s,h);var f=e.r.invm(i),l=i.sub(o).mul(f).umod(i),d=a.mul(f).umod(i);return this.g.mulAdd(l,s,d)},Ih.prototype.getKeyRecoveryParam=function(t,e,r,n){if(null!==(e=new Ah(e,n)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch(t){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Nh=Xa((function(t,e){var r=e;r.version="6.5.4",r.utils=th,r.rand=function(){throw new Error("unsupported")},r.curve=dh,r.curves=ph,r.ec=Rh,r.eddsa=null})),Ch=Nh.ec;const Th=new Ki("signing-key/5.5.0");let Oh=null;function Bh(){return Oh||(Oh=new Ch("secp256k1")),Oh}class Fh{constructor(t){bo(this,"curve","secp256k1"),bo(this,"privateKey",to(t));const e=Bh().keyFromPrivate(Xi(this.privateKey));bo(this,"publicKey","0x"+e.getPublic(!1,"hex")),bo(this,"compressedPublicKey","0x"+e.getPublic(!0,"hex")),bo(this,"_isSigningKey",!0)}_addPoint(t){const e=Bh().keyFromPublic(Xi(this.publicKey)),r=Bh().keyFromPublic(Xi(t));return"0x"+e.pub.add(r.pub).encodeCompressed("hex")}signDigest(t){const e=Bh().keyFromPrivate(Xi(this.privateKey)),r=Xi(t);32!==r.length&&Th.throwArgumentError("bad digest length","digest",t);const n=e.sign(r,{canonical:!0});return so({recoveryParam:n.recoveryParam,r:oo("0x"+n.r.toString(16),32),s:oo("0x"+n.s.toString(16),32)})}computeSharedSecret(t){const e=Bh().keyFromPrivate(Xi(this.privateKey)),r=Bh().keyFromPublic(Xi(Dh(t)));return oo("0x"+e.derive(r.getPublic()).toString(16),32)}static isSigningKey(t){return!(!t||!t._isSigningKey)}}function Dh(t,e){const r=Xi(t);if(32===r.length){const t=new Fh(r);return e?"0x"+Bh().keyFromPrivate(r).getPublic(!0,"hex"):t.publicKey}return 33===r.length?e?to(r):"0x"+Bh().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?e?"0x"+Bh().keyFromPublic(r).getPublic(!0,"hex"):to(r):Th.throwArgumentError("invalid public or private key","key","[REDACTED]")}const Uh=new Ki("transactions/5.5.0");var Lh;function Hh(t){return"0x"===t?null:ws(t)}function zh(t){return"0x"===t?Ts:lo.from(t)}!function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"}(Lh||(Lh={}));const jh=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],Kh={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Wh(t){return ws(ro(ss(ro(Dh(t),1)),12))}function Jh(t,e){return Wh(function(t,e){const r=so(e),n={r:Xi(r.r),s:Xi(r.s)};return"0x"+Bh().recoverPubKey(Xi(t),n,r.recoveryParam).encode("hex",!1)}(Xi(t),e))}function qh(t,e){const r=Yi(lo.from(t).toHexString());return r.length>32&&Uh.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function Gh(t,e){return{address:ws(t),storageKeys:(e||[]).map(((e,r)=>(32!==eo(e)&&Uh.throwArgumentError("invalid access list storageKey",`accessList[${t}:${r}]`,e),e.toLowerCase())))}}function Vh(t){if(Array.isArray(t))return t.map(((t,e)=>Array.isArray(t)?(t.length>2&&Uh.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${e}]`,t),Gh(t[0],t[1])):Gh(t.address,t.storageKeys)));const e=Object.keys(t).map((e=>{const r=t[e].reduce(((t,e)=>(t[e]=!0,t)),{});return Gh(e,Object.keys(r).sort())}));return e.sort(((t,e)=>t.address.localeCompare(e.address))),e}function $h(t){return Vh(t).map((t=>[t.address,t.storageKeys]))}function Xh(t,e){if(null!=t.gasPrice){const e=lo.from(t.gasPrice),r=lo.from(t.maxFeePerGas||0);e.eq(r)||Uh.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:e,maxFeePerGas:r})}const r=[qh(t.chainId||0,"chainId"),qh(t.nonce||0,"nonce"),qh(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),qh(t.maxFeePerGas||0,"maxFeePerGas"),qh(t.gasLimit||0,"gasLimit"),null!=t.to?ws(t.to):"0x",qh(t.value||0,"value"),t.data||"0x",$h(t.accessList||[])];if(e){const t=so(e);r.push(qh(t.recoveryParam,"recoveryParam")),r.push(Yi(t.r)),r.push(Yi(t.s))}return no(["0x02",fs(r)])}function Zh(t,e){const r=[qh(t.chainId||0,"chainId"),qh(t.nonce||0,"nonce"),qh(t.gasPrice||0,"gasPrice"),qh(t.gasLimit||0,"gasLimit"),null!=t.to?ws(t.to):"0x",qh(t.value||0,"value"),t.data||"0x",$h(t.accessList||[])];if(e){const t=so(e);r.push(qh(t.recoveryParam,"recoveryParam")),r.push(Yi(t.r)),r.push(Yi(t.s))}return no(["0x01",fs(r)])}function Yh(t,e){if(null==t.type||0===t.type)return null!=t.accessList&&Uh.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),function(t,e){So(t,Kh);const r=[];jh.forEach((function(e){let n=t[e.name]||[];const i={};e.numeric&&(i.hexPad="left"),n=Xi(to(n,i)),e.length&&n.length!==e.length&&n.length>0&&Uh.throwArgumentError("invalid length for "+e.name,"transaction:"+e.name,n),e.maxLength&&(n=Yi(n),n.length>e.maxLength&&Uh.throwArgumentError("invalid length for "+e.name,"transaction:"+e.name,n)),r.push(to(n))}));let n=0;if(null!=t.chainId?(n=t.chainId,"number"!=typeof n&&Uh.throwArgumentError("invalid transaction.chainId","transaction",t)):e&&!Gi(e)&&e.v>28&&(n=Math.floor((e.v-35)/2)),0!==n&&(r.push(to(n)),r.push("0x"),r.push("0x")),!e)return fs(r);const i=so(e);let o=27+i.recoveryParam;return 0!==n?(r.pop(),r.pop(),r.pop(),o+=2*n+8,i.v>28&&i.v!==o&&Uh.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):i.v!==o&&Uh.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),r.push(to(o)),r.push(Yi(Xi(i.r))),r.push(Yi(Xi(i.s))),fs(r)}(t,e);switch(t.type){case 1:return Zh(t,e);case 2:return Xh(t,e)}return Uh.throwError(`unsupported transaction type: ${t.type}`,Ki.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}function Qh(t,e,r){try{const r=zh(e[0]).toNumber();if(0!==r&&1!==r)throw new Error("bad recid");t.v=r}catch(t){Uh.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=oo(e[1],32),t.s=oo(e[2],32);try{const e=ss(r(t));t.from=Jh(e,{r:t.r,s:t.s,recoveryParam:t.v})}catch(t){console.log(t)}}function tu(t){const e=Xi(t);if(e[0]>127)return function(t){const e=ps(t);9!==e.length&&6!==e.length&&Uh.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:zh(e[0]).toNumber(),gasPrice:zh(e[1]),gasLimit:zh(e[2]),to:Hh(e[3]),value:zh(e[4]),data:e[5],chainId:0};if(6===e.length)return r;try{r.v=lo.from(e[6]).toNumber()}catch(t){return console.log(t),r}if(r.r=oo(e[7],32),r.s=oo(e[8],32),lo.from(r.r).isZero()&&lo.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=e.slice(0,6);0!==r.chainId&&(i.push(to(r.chainId)),i.push("0x"),i.push("0x"),n-=2*r.chainId+8);const o=ss(fs(i));try{r.from=Jh(o,{r:to(r.r),s:to(r.s),recoveryParam:n})}catch(t){console.log(t)}r.hash=ss(t)}return r.type=null,r}(e);switch(e[0]){case 1:return function(t){const e=ps(t.slice(1));8!==e.length&&11!==e.length&&Uh.throwArgumentError("invalid component count for transaction type: 1","payload",to(t));const r={type:1,chainId:zh(e[0]).toNumber(),nonce:zh(e[1]).toNumber(),gasPrice:zh(e[2]),gasLimit:zh(e[3]),to:Hh(e[4]),value:zh(e[5]),data:e[6],accessList:Vh(e[7])};return 8===e.length||(r.hash=ss(t),Qh(r,e.slice(8),Zh)),r}(e);case 2:return function(t){const e=ps(t.slice(1));9!==e.length&&12!==e.length&&Uh.throwArgumentError("invalid component count for transaction type: 2","payload",to(t));const r=zh(e[2]),n=zh(e[3]),i={type:2,chainId:zh(e[0]).toNumber(),nonce:zh(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:zh(e[4]),to:Hh(e[5]),value:zh(e[6]),data:e[7],accessList:Vh(e[8])};return 9===e.length||(i.hash=ss(t),Qh(i,e.slice(9),Xh)),i}(e)}return Uh.throwError(`unsupported transaction type: ${e[0]}`,Ki.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}var eu=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function a(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}h((n=n.apply(t,e||[])).next())}))};const ru=new Ki("contracts/5.5.0");function nu(t,e){return eu(this,void 0,void 0,(function*(){const r=yield e;"string"!=typeof r&&ru.throwArgumentError("invalid address or ENS name","name",r);try{return ws(r)}catch(t){}t||ru.throwError("a provider or signer is needed to resolve ENS names",Ki.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield t.resolveName(r);return null==n&&ru.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n}))}function iu(t,e,r){return eu(this,void 0,void 0,(function*(){return Array.isArray(r)?yield Promise.all(r.map(((r,n)=>iu(t,Array.isArray(e)?e[n]:e[r.name],r)))):"address"===r.type?yield nu(t,e):"tuple"===r.type?yield iu(t,e,r.components):"array"===r.baseType?Array.isArray(e)?yield Promise.all(e.map((e=>iu(t,e,r.arrayChildren)))):Promise.reject(ru.makeError("invalid value for array",Ki.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e}))}function ou(t,e,r){return eu(this,void 0,void 0,(function*(){let n={};r.length===e.inputs.length+1&&"object"==typeof r[r.length-1]&&(n=_o(r.pop())),ru.checkArgumentCount(r.length,e.inputs.length,"passed to contract"),t.signer?n.from?n.from=Ao({override:nu(t.signer,n.from),signer:t.signer.getAddress()}).then((t=>eu(this,void 0,void 0,(function*(){return ws(t.signer)!==t.override&&ru.throwError("Contract with a Signer cannot override from",Ki.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),t.override})))):n.from=t.signer.getAddress():n.from&&(n.from=nu(t.provider,n.from));const i=yield Ao({args:iu(t.signer||t.provider,r,e.inputs),address:t.resolvedAddress,overrides:Ao(n)||{}}),o=t.interface.encodeFunctionData(e,i.args),s={data:o,to:i.address},a=i.overrides;if(null!=a.nonce&&(s.nonce=lo.from(a.nonce).toNumber()),null!=a.gasLimit&&(s.gasLimit=lo.from(a.gasLimit)),null!=a.gasPrice&&(s.gasPrice=lo.from(a.gasPrice)),null!=a.maxFeePerGas&&(s.maxFeePerGas=lo.from(a.maxFeePerGas)),null!=a.maxPriorityFeePerGas&&(s.maxPriorityFeePerGas=lo.from(a.maxPriorityFeePerGas)),null!=a.from&&(s.from=a.from),null!=a.type&&(s.type=a.type),null!=a.accessList&&(s.accessList=Vh(a.accessList)),null==s.gasLimit&&null!=e.gas){let t=21e3;const r=Xi(o);for(let e=0;e<r.length;e++)t+=4,r[e]&&(t+=64);s.gasLimit=lo.from(e.gas).add(t)}if(a.value){const t=lo.from(a.value);t.isZero()||e.payable||ru.throwError("non-payable method cannot override value",Ki.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),s.value=t}a.customData&&(s.customData=_o(a.customData)),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData;const h=Object.keys(n).filter((t=>null!=n[t]));return h.length&&ru.throwError(`cannot override ${h.map((t=>JSON.stringify(t))).join(",")}`,Ki.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:h}),s}))}function su(t,e,r){const n=t.signer||t.provider;return function(...i){return eu(this,void 0,void 0,(function*(){let o;if(i.length===e.inputs.length+1&&"object"==typeof i[i.length-1]){const t=_o(i.pop());null!=t.blockTag&&(o=yield t.blockTag),delete t.blockTag,i.push(t)}null!=t.deployTransaction&&(yield t._deployed(o));const s=yield ou(t,e,i),a=yield n.call(s,o);try{let n=t.interface.decodeFunctionResult(e,a);return r&&1===e.outputs.length&&(n=n[0]),n}catch(e){throw e.code===Ki.errors.CALL_EXCEPTION&&(e.address=t.address,e.args=i,e.transaction=s),e}}))}}function au(t,e){return function(...r){return eu(this,void 0,void 0,(function*(){t.signer||ru.throwError("sending a transaction requires a signer",Ki.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null!=t.deployTransaction&&(yield t._deployed());const n=yield ou(t,e,r),i=yield t.signer.sendTransaction(n);return function(t,e){const r=e.wait.bind(e);e.wait=e=>r(e).then((e=>(e.events=e.logs.map((r=>{let n=Mo(r),i=null;try{i=t.interface.parseLog(r)}catch(t){}return i&&(n.args=i.args,n.decode=(e,r)=>t.interface.decodeEventLog(i.eventFragment,e,r),n.event=i.name,n.eventSignature=i.signature),n.removeListener=()=>t.provider,n.getBlock=()=>t.provider.getBlock(e.blockHash),n.getTransaction=()=>t.provider.getTransaction(e.transactionHash),n.getTransactionReceipt=()=>Promise.resolve(e),n})),e)))}(t,i),i}))}}function hu(t,e,r){return e.constant?su(t,e,r):au(t,e)}function uu(t){return!t.address||null!=t.topics&&0!==t.topics.length?(t.address||"*")+"@"+(t.topics?t.topics.map((t=>Array.isArray(t)?t.join("|"):t)).join(":"):""):"*"}class cu{constructor(t,e){bo(this,"tag",t),bo(this,"filter",e),this._listeners=[]}addListener(t,e){this._listeners.push({listener:t,once:e})}removeListener(t){let e=!1;this._listeners=this._listeners.filter((r=>!(!e&&r.listener===t)||(e=!0,!1)))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map((t=>t.listener))}listenerCount(){return this._listeners.length}run(t){const e=this.listenerCount();return this._listeners=this._listeners.filter((e=>{const r=t.slice();return setTimeout((()=>{e.listener.apply(this,r)}),0),!e.once})),e}prepareEvent(t){}getEmit(t){return[t]}}class fu extends cu{constructor(){super("error",null)}}class lu extends cu{constructor(t,e,r,n){const i={address:t};let o=e.getEventTopic(r);n?(o!==n[0]&&ru.throwArgumentError("topic mismatch","topics",n),i.topics=n.slice()):i.topics=[o],super(uu(i),i),bo(this,"address",t),bo(this,"interface",e),bo(this,"fragment",r)}prepareEvent(t){super.prepareEvent(t),t.event=this.fragment.name,t.eventSignature=this.fragment.format(),t.decode=(t,e)=>this.interface.decodeEventLog(this.fragment,t,e);try{t.args=this.interface.decodeEventLog(this.fragment,t.data,t.topics)}catch(e){t.args=null,t.decodeError=e}}getEmit(t){const e=function(t){const e=[],r=function(t,n){if(Array.isArray(n))for(let i in n){const o=t.slice();o.push(i);try{r(o,n[i])}catch(t){e.push({path:o,error:t})}}};return r([],t),e}(t.args);if(e.length)throw e[0].error;const r=(t.args||[]).slice();return r.push(t),r}}class du extends cu{constructor(t,e){super("*",{address:t}),bo(this,"address",t),bo(this,"interface",e)}prepareEvent(t){super.prepareEvent(t);try{const e=this.interface.parseLog(t);t.event=e.name,t.eventSignature=e.signature,t.decode=(t,r)=>this.interface.decodeEventLog(e.eventFragment,t,r),t.args=e.args}catch(t){}}}class pu extends class{constructor(t,e,r){ru.checkNew(new.target,pu),bo(this,"interface",Eo(new.target,"getInterface")(e)),null==r?(bo(this,"provider",null),bo(this,"signer",null)):Va.isSigner(r)?(bo(this,"provider",r.provider||null),bo(this,"signer",r)):Ka.isProvider(r)?(bo(this,"provider",r),bo(this,"signer",null)):ru.throwArgumentError("invalid signer or provider","signerOrProvider",r),bo(this,"callStatic",{}),bo(this,"estimateGas",{}),bo(this,"functions",{}),bo(this,"populateTransaction",{}),bo(this,"filters",{});{const t={};Object.keys(this.interface.events).forEach((e=>{const r=this.interface.events[e];bo(this.filters,e,((...t)=>({address:this.address,topics:this.interface.encodeFilterTopics(r,t)}))),t[r.name]||(t[r.name]=[]),t[r.name].push(e)})),Object.keys(t).forEach((e=>{const r=t[e];1===r.length?bo(this.filters,e,this.filters[r[0]]):ru.warn(`Duplicate definition of ${e} (${r.join(", ")})`)}))}if(bo(this,"_runningEvents",{}),bo(this,"_wrappedEmits",{}),null==t&&ru.throwArgumentError("invalid contract address or ENS name","addressOrName",t),bo(this,"address",t),this.provider)bo(this,"resolvedAddress",nu(this.provider,t));else try{bo(this,"resolvedAddress",Promise.resolve(ws(t)))}catch(t){ru.throwError("provider is required to use ENS name as contract address",Ki.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}const n={},i={};Object.keys(this.interface.functions).forEach((t=>{const e=this.interface.functions[t];if(i[t])ru.warn(`Duplicate ABI entry for ${JSON.stringify(t)}`);else{i[t]=!0;{const r=e.name;n[`%${r}`]||(n[`%${r}`]=[]),n[`%${r}`].push(t)}null==this[t]&&bo(this,t,hu(this,e,!0)),null==this.functions[t]&&bo(this.functions,t,hu(this,e,!1)),null==this.callStatic[t]&&bo(this.callStatic,t,su(this,e,!0)),null==this.populateTransaction[t]&&bo(this.populateTransaction,t,function(t,e){return function(...r){return ou(t,e,r)}}(this,e)),null==this.estimateGas[t]&&bo(this.estimateGas,t,function(t,e){const r=t.signer||t.provider;return function(...n){return eu(this,void 0,void 0,(function*(){r||ru.throwError("estimate require a provider or signer",Ki.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield ou(t,e,n);return yield r.estimateGas(i)}))}}(this,e))}})),Object.keys(n).forEach((t=>{const e=n[t];if(e.length>1)return;t=t.substring(1);const r=e[0];try{null==this[t]&&bo(this,t,this[r])}catch(t){}null==this.functions[t]&&bo(this.functions,t,this.functions[r]),null==this.callStatic[t]&&bo(this.callStatic,t,this.callStatic[r]),null==this.populateTransaction[t]&&bo(this.populateTransaction,t,this.populateTransaction[r]),null==this.estimateGas[t]&&bo(this.estimateGas,t,this.estimateGas[r])}))}static getContractAddress(t){return bs(t)}static getInterface(t){return La.isInterface(t)?t:new La(t)}deployed(){return this._deployed()}_deployed(t){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then((()=>this)):this._deployedPromise=this.provider.getCode(this.address,t).then((t=>("0x"===t&&ru.throwError("contract not deployed",Ki.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this)))),this._deployedPromise}fallback(t){this.signer||ru.throwError("sending a transactions require a signer",Ki.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const e=_o(t||{});return["from","to"].forEach((function(t){null!=e[t]&&ru.throwError("cannot override "+t,Ki.errors.UNSUPPORTED_OPERATION,{operation:t})})),e.to=this.resolvedAddress,this.deployed().then((()=>this.signer.sendTransaction(e)))}connect(t){"string"==typeof t&&(t=new $a(t,this.provider));const e=new this.constructor(this.address,this.interface,t);return this.deployTransaction&&bo(e,"deployTransaction",this.deployTransaction),e}attach(t){return new this.constructor(t,this.interface,this.signer||this.provider)}static isIndexed(t){return Fa.isIndexed(t)}_normalizeRunningEvent(t){return this._runningEvents[t.tag]?this._runningEvents[t.tag]:t}_getRunningEvent(t){if("string"==typeof t){if("error"===t)return this._normalizeRunningEvent(new fu);if("event"===t)return this._normalizeRunningEvent(new cu("event",null));if("*"===t)return this._normalizeRunningEvent(new du(this.address,this.interface));const e=this.interface.getEvent(t);return this._normalizeRunningEvent(new lu(this.address,this.interface,e))}if(t.topics&&t.topics.length>0){try{const e=t.topics[0];if("string"!=typeof e)throw new Error("invalid topic");const r=this.interface.getEvent(e);return this._normalizeRunningEvent(new lu(this.address,this.interface,r,t.topics))}catch(t){}const e={address:this.address,topics:t.topics};return this._normalizeRunningEvent(new cu(uu(e),e))}return this._normalizeRunningEvent(new du(this.address,this.interface))}_checkRunningEvents(t){if(0===t.listenerCount()){delete this._runningEvents[t.tag];const e=this._wrappedEmits[t.tag];e&&t.filter&&(this.provider.off(t.filter,e),delete this._wrappedEmits[t.tag])}}_wrapEvent(t,e,r){const n=Mo(e);return n.removeListener=()=>{r&&(t.removeListener(r),this._checkRunningEvents(t))},n.getBlock=()=>this.provider.getBlock(e.blockHash),n.getTransaction=()=>this.provider.getTransaction(e.transactionHash),n.getTransactionReceipt=()=>this.provider.getTransactionReceipt(e.transactionHash),t.prepareEvent(n),n}_addEventListener(t,e,r){if(this.provider||ru.throwError("events require a provider or a signer with a provider",Ki.errors.UNSUPPORTED_OPERATION,{operation:"once"}),t.addListener(e,r),this._runningEvents[t.tag]=t,!this._wrappedEmits[t.tag]){const r=r=>{let n=this._wrapEvent(t,r,e);if(null==n.decodeError)try{const e=t.getEmit(n);this.emit(t.filter,...e)}catch(t){n.decodeError=t.error}null!=t.filter&&this.emit("event",n),null!=n.decodeError&&this.emit("error",n.decodeError,n)};this._wrappedEmits[t.tag]=r,null!=t.filter&&this.provider.on(t.filter,r)}}queryFilter(t,e,r){const n=this._getRunningEvent(t),i=_o(n.filter);return"string"==typeof e&&Qi(e,32)?(null!=r&&ru.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),i.blockHash=e):(i.fromBlock=null!=e?e:0,i.toBlock=null!=r?r:"latest"),this.provider.getLogs(i).then((t=>t.map((t=>this._wrapEvent(n,t,null)))))}on(t,e){return this._addEventListener(this._getRunningEvent(t),e,!1),this}once(t,e){return this._addEventListener(this._getRunningEvent(t),e,!0),this}emit(t,...e){if(!this.provider)return!1;const r=this._getRunningEvent(t),n=r.run(e)>0;return this._checkRunningEvents(r),n}listenerCount(t){return this.provider?null==t?Object.keys(this._runningEvents).reduce(((t,e)=>t+this._runningEvents[e].listenerCount()),0):this._getRunningEvent(t).listenerCount():0}listeners(t){if(!this.provider)return[];if(null==t){const t=[];for(let e in this._runningEvents)this._runningEvents[e].listeners().forEach((e=>{t.push(e)}));return t}return this._getRunningEvent(t).listeners()}removeAllListeners(t){if(!this.provider)return this;if(null==t){for(const t in this._runningEvents){const e=this._runningEvents[t];e.removeAllListeners(),this._checkRunningEvents(e)}return this}const e=this._getRunningEvent(t);return e.removeAllListeners(),this._checkRunningEvents(e),this}off(t,e){if(!this.provider)return this;const r=this._getRunningEvent(t);return r.removeListener(e),this._checkRunningEvents(r),this}removeListener(t,e){return this.off(t,e)}}{}class mu{constructor(t){bo(this,"alphabet",t),bo(this,"base",t.length),bo(this,"_alphabetMap",{}),bo(this,"_leader",t.charAt(0));for(let e=0;e<t.length;e++)this._alphabetMap[t.charAt(e)]=e}encode(t){let e=Xi(t);if(0===e.length)return"";let r=[0];for(let t=0;t<e.length;++t){let n=e[t];for(let t=0;t<r.length;++t)n+=r[t]<<8,r[t]=n%this.base,n=n/this.base|0;for(;n>0;)r.push(n%this.base),n=n/this.base|0}let n="";for(let t=0;0===e[t]&&t<e.length-1;++t)n+=this._leader;for(let t=r.length-1;t>=0;--t)n+=this.alphabet[r[t]];return n}decode(t){if("string"!=typeof t)throw new TypeError("Expected String");let e=[];if(0===t.length)return new Uint8Array(e);e.push(0);for(let r=0;r<t.length;r++){let n=this._alphabetMap[t[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");let i=n;for(let t=0;t<e.length;++t)i+=e[t]*this.base,e[t]=255&i,i>>=8;for(;i>0;)e.push(255&i),i>>=8}for(let r=0;t[r]===this._leader&&r<t.length-1;++r)e.push(0);return Xi(new Uint8Array(e.reverse()))}}new mu("abcdefghijklmnopqrstuvwxyz234567");const gu=new mu("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var yu;!function(t){t.sha256="sha256",t.sha512="sha512"}(yu||(yu={}));const vu=new Ki("sha2/5.5.0");function wu(t){return"0x"+et.sha256().update(Xi(t)).digest("hex")}function bu(t,e,r){return yu[t]||vu.throwError("unsupported algorithm "+t,Ki.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+et.hmac(et[t],Xi(e)).update(Xi(r)).digest("hex")}function Eu(t,e,r,n,i){let o;t=Xi(t),e=Xi(e);let s=1;const a=new Uint8Array(n),h=new Uint8Array(e.length+4);let u,c;h.set(e);for(let f=1;f<=s;f++){h[e.length]=f>>24&255,h[e.length+1]=f>>16&255,h[e.length+2]=f>>8&255,h[e.length+3]=255&f;let l=Xi(bu(i,t,h));o||(o=l.length,c=new Uint8Array(o),s=Math.ceil(n/o),u=n-(s-1)*o),c.set(l);for(let e=1;e<r;e++){l=Xi(bu(i,t,l));for(let t=0;t<o;t++)c[t]^=l[t]}const d=(f-1)*o,p=f===s?u:o;a.set(Xi(c).slice(0,p),d)}return to(a)}const Au=new Ki("wordlists/5.5.0");class Su{constructor(t){Au.checkAbstract(new.target,Su),bo(this,"locale",t)}split(t){return t.toLowerCase().split(/ +/g)}join(t){return t.join(" ")}static check(t){const e=[];for(let r=0;r<2048;r++){const n=t.getWord(r);if(r!==t.getWordIndex(n))return"0x";e.push(n)}return fa(e.join("\n")+"\n")}static register(t,e){}}let _u=null;function ku(t){if(null==_u&&(_u="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==Su.check(t)))throw _u=null,new Error("BIP39 Wordlist for en (English) FAILED")}const Pu=new class extends Su{constructor(){super("en")}getWord(t){return ku(this),_u[t]}getWordIndex(t){return ku(this),_u.indexOf(t)}};Su.register(Pu);const xu={en:Pu},Mu=new Ki("hdnode/5.5.0"),Iu=lo.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ru=Ks("Bitcoin seed");function Nu(t){return(1<<t)-1<<8-t}function Cu(t){return oo(to(t),32)}function Tu(t){return gu.encode(Zi([t,ro(wu(wu(t)),0,4)]))}function Ou(t){if(null==t)return xu.en;if("string"==typeof t){const e=xu[t];return null==e&&Mu.throwArgumentError("unknown locale","wordlist",t),e}return t}const Bu={},Fu="m/44'/60'/0'/0/0";class Du{constructor(t,e,r,n,i,o,s,a){if(Mu.checkNew(new.target,Du),t!==Bu)throw new Error("HDNode constructor cannot be called directly");if(e){const t=new Fh(e);bo(this,"privateKey",t.privateKey),bo(this,"publicKey",t.compressedPublicKey)}else bo(this,"privateKey",null),bo(this,"publicKey",to(r));var h;bo(this,"parentFingerprint",n),bo(this,"fingerprint",ro((h=wu(this.publicKey),"0x"+et.ripemd160().update(Xi(h)).digest("hex")),0,4)),bo(this,"address",Wh(this.publicKey)),bo(this,"chainCode",i),bo(this,"index",o),bo(this,"depth",s),null==a?(bo(this,"mnemonic",null),bo(this,"path",null)):"string"==typeof a?(bo(this,"mnemonic",null),bo(this,"path",a)):(bo(this,"mnemonic",a),bo(this,"path",a.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return Tu(Zi([null!=this.privateKey?"0x0488ADE4":"0x0488B21E",to(this.depth),this.parentFingerprint,oo(to(this.index),4),this.chainCode,null!=this.privateKey?Zi(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new Du(Bu,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(t){if(t>4294967295)throw new Error("invalid index - "+String(t));let e=this.path;e&&(e+="/"+(2147483647&t));const r=new Uint8Array(37);if(2147483648&t){if(!this.privateKey)throw new Error("cannot derive child of neutered node");r.set(Xi(this.privateKey),1),e&&(e+="'")}else r.set(Xi(this.publicKey));for(let e=24;e>=0;e-=8)r[33+(e>>3)]=t>>24-e&255;const n=Xi(bu(yu.sha512,this.chainCode,r)),i=n.slice(0,32),o=n.slice(32);let s=null,a=null;if(this.privateKey)s=Cu(lo.from(i).add(this.privateKey).mod(Iu));else{a=new Fh(to(i))._addPoint(this.publicKey)}let h=e;const u=this.mnemonic;return u&&(h=Object.freeze({phrase:u.phrase,path:e,locale:u.locale||"en"})),new Du(Bu,s,a,this.fingerprint,Cu(o),t,this.depth+1,h)}derivePath(t){const e=t.split("/");if(0===e.length||"m"===e[0]&&0!==this.depth)throw new Error("invalid path - "+t);"m"===e[0]&&e.shift();let r=this;for(let t=0;t<e.length;t++){const n=e[t];if(n.match(/^[0-9]+'$/)){const t=parseInt(n.substring(0,n.length-1));if(t>=2147483648)throw new Error("invalid path index - "+n);r=r._derive(2147483648+t)}else{if(!n.match(/^[0-9]+$/))throw new Error("invalid path component - "+n);{const t=parseInt(n);if(t>=2147483648)throw new Error("invalid path index - "+n);r=r._derive(t)}}}return r}static _fromSeed(t,e){const r=Xi(t);if(r.length<16||r.length>64)throw new Error("invalid seed");const n=Xi(bu(yu.sha512,Ru,r));return new Du(Bu,Cu(n.slice(0,32)),null,"0x00000000",Cu(n.slice(32)),0,0,e)}static fromMnemonic(t,e,r){return t=Lu(Uu(t,r=Ou(r)),r),Du._fromSeed(function(t,e){e||(e="");const r=Ks("mnemonic"+e,Us.NFKD);return Eu(Ks(t,Us.NFKD),r,2048,64,"sha512")}(t,e),{phrase:t,path:"m",locale:r.locale})}static fromSeed(t){return Du._fromSeed(t,null)}static fromExtendedKey(t){const e=gu.decode(t);82===e.length&&Tu(e.slice(0,78))===t||Mu.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const r=e[4],n=to(e.slice(5,9)),i=parseInt(to(e.slice(9,13)).substring(2),16),o=to(e.slice(13,45)),s=e.slice(45,78);switch(to(e.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new Du(Bu,null,to(s),n,o,i,r,null);case"0x0488ade4":case"0x04358394 ":if(0!==s[0])break;return new Du(Bu,to(s.slice(1)),null,n,o,i,r,null)}return Mu.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function Uu(t,e){e=Ou(e),Mu.checkNormalize();const r=e.split(t);if(r.length%3!=0)throw new Error("invalid mnemonic");const n=Xi(new Uint8Array(Math.ceil(11*r.length/8)));let i=0;for(let t=0;t<r.length;t++){let o=e.getWordIndex(r[t].normalize("NFKD"));if(-1===o)throw new Error("invalid mnemonic");for(let t=0;t<11;t++)o&1<<10-t&&(n[i>>3]|=1<<7-i%8),i++}const o=32*r.length/3,s=Nu(r.length/3);if((Xi(wu(n.slice(0,o/8)))[0]&s)!==(n[n.length-1]&s))throw new Error("invalid checksum");return to(n.slice(0,o/8))}function Lu(t,e){if(e=Ou(e),(t=Xi(t)).length%4!=0||t.length<16||t.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let e=0;e<t.length;e++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=t[e],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=t[e]>>8-n,r.push(t[e]&(1<<8-n)-1),n+=3);const i=t.length/4,o=Xi(wu(t))[0]&Nu(i);return r[r.length-1]<<=i,r[r.length-1]|=o>>8-i,e.join(r.map((t=>e.getWord(t))))}const Hu=new Ki("random/5.5.0");let zu=null;try{if(zu=window,null==zu)throw new Error("try next")}catch(t){try{if(zu=global,null==zu)throw new Error("try next")}catch(t){zu={}}}let ju=zu.crypto||zu.msCrypto;function Ku(t){(t<=0||t>1024||t%1||t!=t)&&Hu.throwArgumentError("invalid length","length",t);const e=new Uint8Array(t);return ju.getRandomValues(e),Xi(e)}ju&&ju.getRandomValues||(Hu.warn("WARNING: Missing strong random number source"),ju={getRandomValues:function(t){return Hu.throwError("no secure random source avaialble",Ki.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});var Wu={exports:{}};!function(t,e){!function(e){function r(t){return parseInt(t)===t}function n(t){if(!r(t.length))return!1;for(var e=0;e<t.length;e++)if(!r(t[e])||t[e]<0||t[e]>255)return!1;return!0}function i(t,e){if(t.buffer&&ArrayBuffer.isView(t)&&"Uint8Array"===t.name)return e&&(t=t.slice?t.slice():Array.prototype.slice.call(t)),t;if(Array.isArray(t)){if(!n(t))throw new Error("Array contains invalid value: "+t);return new Uint8Array(t)}if(r(t.length)&&n(t))return new Uint8Array(t);throw new Error("unsupported array-like object")}function o(t){return new Uint8Array(t)}function s(t,e,r,n,i){null==n&&null==i||(t=t.slice?t.slice(n,i):Array.prototype.slice.call(t,n,i)),e.set(t,r)}var a,h={toBytes:function(t){var e=[],r=0;for(t=encodeURI(t);r<t.length;){var n=t.charCodeAt(r++);37===n?(e.push(parseInt(t.substr(r,2),16)),r+=2):e.push(n)}return i(e)},fromBytes:function(t){for(var e=[],r=0;r<t.length;){var n=t[r];n<128?(e.push(String.fromCharCode(n)),r++):n>191&&n<224?(e.push(String.fromCharCode((31&n)<<6|63&t[r+1])),r+=2):(e.push(String.fromCharCode((15&n)<<12|(63&t[r+1])<<6|63&t[r+2])),r+=3)}return e.join("")}},u=(a="0123456789abcdef",{toBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},fromBytes:function(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];e.push(a[(240&n)>>4]+a[15&n])}return e.join("")}}),c={16:10,24:12,32:14},f=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],l=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],d=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],p=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],m=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],g=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],y=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],v=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],w=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],b=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],E=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],A=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],S=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],_=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],k=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function P(t){for(var e=[],r=0;r<t.length;r+=4)e.push(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]);return e}var x=function(t){if(!(this instanceof x))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:i(t,!0)}),this._prepare()};x.prototype._prepare=function(){var t=c[this.key.length];if(null==t)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var e=0;e<=t;e++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var r,n=4*(t+1),i=this.key.length/4,o=P(this.key);for(e=0;e<i;e++)r=e>>2,this._Ke[r][e%4]=o[e],this._Kd[t-r][e%4]=o[e];for(var s,a=0,h=i;h<n;){if(s=o[i-1],o[0]^=l[s>>16&255]<<24^l[s>>8&255]<<16^l[255&s]<<8^l[s>>24&255]^f[a]<<24,a+=1,8!=i)for(e=1;e<i;e++)o[e]^=o[e-1];else{for(e=1;e<i/2;e++)o[e]^=o[e-1];s=o[i/2-1],o[i/2]^=l[255&s]^l[s>>8&255]<<8^l[s>>16&255]<<16^l[s>>24&255]<<24;for(e=i/2+1;e<i;e++)o[e]^=o[e-1]}for(e=0;e<i&&h<n;)u=h>>2,d=h%4,this._Ke[u][d]=o[e],this._Kd[t-u][d]=o[e++],h++}for(var u=1;u<t;u++)for(var d=0;d<4;d++)s=this._Kd[u][d],this._Kd[u][d]=A[s>>24&255]^S[s>>16&255]^_[s>>8&255]^k[255&s]},x.prototype.encrypt=function(t){if(16!=t.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var e=this._Ke.length-1,r=[0,0,0,0],n=P(t),i=0;i<4;i++)n[i]^=this._Ke[0][i];for(var s=1;s<e;s++){for(i=0;i<4;i++)r[i]=p[n[i]>>24&255]^m[n[(i+1)%4]>>16&255]^g[n[(i+2)%4]>>8&255]^y[255&n[(i+3)%4]]^this._Ke[s][i];n=r.slice()}var a,h=o(16);for(i=0;i<4;i++)a=this._Ke[e][i],h[4*i]=255&(l[n[i]>>24&255]^a>>24),h[4*i+1]=255&(l[n[(i+1)%4]>>16&255]^a>>16),h[4*i+2]=255&(l[n[(i+2)%4]>>8&255]^a>>8),h[4*i+3]=255&(l[255&n[(i+3)%4]]^a);return h},x.prototype.decrypt=function(t){if(16!=t.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var e=this._Kd.length-1,r=[0,0,0,0],n=P(t),i=0;i<4;i++)n[i]^=this._Kd[0][i];for(var s=1;s<e;s++){for(i=0;i<4;i++)r[i]=v[n[i]>>24&255]^w[n[(i+3)%4]>>16&255]^b[n[(i+2)%4]>>8&255]^E[255&n[(i+1)%4]]^this._Kd[s][i];n=r.slice()}var a,h=o(16);for(i=0;i<4;i++)a=this._Kd[e][i],h[4*i]=255&(d[n[i]>>24&255]^a>>24),h[4*i+1]=255&(d[n[(i+3)%4]>>16&255]^a>>16),h[4*i+2]=255&(d[n[(i+2)%4]>>8&255]^a>>8),h[4*i+3]=255&(d[255&n[(i+1)%4]]^a);return h};var M=function(t){if(!(this instanceof M))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new x(t)};M.prototype.encrypt=function(t){if((t=i(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=o(t.length),r=o(16),n=0;n<t.length;n+=16)s(t,r,0,n,n+16),s(r=this._aes.encrypt(r),e,n);return e},M.prototype.decrypt=function(t){if((t=i(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=o(t.length),r=o(16),n=0;n<t.length;n+=16)s(t,r,0,n,n+16),s(r=this._aes.decrypt(r),e,n);return e};var I=function(t,e){if(!(this instanceof I))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=o(16);this._lastCipherblock=i(e,!0),this._aes=new x(t)};I.prototype.encrypt=function(t){if((t=i(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=o(t.length),r=o(16),n=0;n<t.length;n+=16){s(t,r,0,n,n+16);for(var a=0;a<16;a++)r[a]^=this._lastCipherblock[a];this._lastCipherblock=this._aes.encrypt(r),s(this._lastCipherblock,e,n)}return e},I.prototype.decrypt=function(t){if((t=i(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=o(t.length),r=o(16),n=0;n<t.length;n+=16){s(t,r,0,n,n+16),r=this._aes.decrypt(r);for(var a=0;a<16;a++)e[n+a]=r[a]^this._lastCipherblock[a];s(t,this._lastCipherblock,0,n,n+16)}return e};var R=function(t,e,r){if(!(this instanceof R))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 size)")}else e=o(16);r||(r=1),this.segmentSize=r,this._shiftRegister=i(e,!0),this._aes=new x(t)};R.prototype.encrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var e,r=i(t,!0),n=0;n<r.length;n+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)r[n+o]^=e[o];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(r,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r},R.prototype.decrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var e,r=i(t,!0),n=0;n<r.length;n+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)r[n+o]^=e[o];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(t,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r};var N=function(t,e){if(!(this instanceof N))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=o(16);this._lastPrecipher=i(e,!0),this._lastPrecipherIndex=16,this._aes=new x(t)};N.prototype.encrypt=function(t){for(var e=i(t,!0),r=0;r<e.length;r++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),e[r]^=this._lastPrecipher[this._lastPrecipherIndex++];return e},N.prototype.decrypt=N.prototype.encrypt;var C=function(t){if(!(this instanceof C))throw Error("Counter must be instanitated with `new`");0===t||t||(t=1),"number"==typeof t?(this._counter=o(16),this.setValue(t)):this.setBytes(t)};C.prototype.setValue=function(t){if("number"!=typeof t||parseInt(t)!=t)throw new Error("invalid counter value (must be an integer)");for(var e=15;e>=0;--e)this._counter[e]=t%256,t>>=8},C.prototype.setBytes=function(t){if(16!=(t=i(t,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=t},C.prototype.increment=function(){for(var t=15;t>=0;t--){if(255!==this._counter[t]){this._counter[t]++;break}this._counter[t]=0}};var T=function(t,e){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",e instanceof C||(e=new C(e)),this._counter=e,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new x(t)};T.prototype.encrypt=function(t){for(var e=i(t,!0),r=0;r<e.length;r++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),e[r]^=this._remainingCounter[this._remainingCounterIndex++];return e},T.prototype.decrypt=T.prototype.encrypt;var O={AES:x,Counter:C,ModeOfOperation:{ecb:M,cbc:I,cfb:R,ofb:N,ctr:T},utils:{hex:u,utf8:h},padding:{pkcs7:{pad:function(t){var e=16-(t=i(t,!0)).length%16,r=o(t.length+e);s(t,r);for(var n=t.length;n<r.length;n++)r[n]=e;return r},strip:function(t){if((t=i(t,!0)).length<16)throw new Error("PKCS#7 invalid length");var e=t[t.length-1];if(e>16)throw new Error("PKCS#7 padding byte out of range");for(var r=t.length-e,n=0;n<e;n++)if(t[r+n]!==e)throw new Error("PKCS#7 invalid padding byte");var a=o(r);return s(t,a,0,0,r),a}}},_arrayTest:{coerceArray:i,createArray:o,copyArray:s}};t.exports=O}()}(Wu);var Ju=Wu.exports;function qu(t){return"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),Xi(t)}function Gu(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function Vu(t){return"string"==typeof t?Ks(t,Us.NFKC):Xi(t)}function $u(t,e){let r=t;const n=e.toLowerCase().split("/");for(let t=0;t<n.length;t++){let e=null;for(const i in r)if(i.toLowerCase()===n[t]){e=r[i];break}if(null===e)return null;r=e}return r}function Xu(t){const e=Xi(t);e[6]=15&e[6]|64,e[8]=63&e[8]|128;const r=to(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const Zu=new Ki("json-wallets/5.5.0");class Yu extends Io{isCrowdsaleAccount(t){return!(!t||!t._isCrowdsaleAccount)}}function Qu(t,e){const r=JSON.parse(t);e=Vu(e);const n=ws($u(r,"ethaddr")),i=qu($u(r,"encseed"));i&&i.length%16==0||Zu.throwArgumentError("invalid encseed","json",t);const o=Xi(Eu(e,e,2e3,32,"sha256")).slice(0,16),s=i.slice(0,16),a=i.slice(16),h=new Ju.ModeOfOperation.cbc(o,s),u=Ju.padding.pkcs7.strip(Xi(h.decrypt(a)));let c="";for(let t=0;t<u.length;t++)c+=String.fromCharCode(u[t]);const f=ss(Ks(c));return new Yu({_isCrowdsaleAccount:!0,address:n,privateKey:f})}function tc(t){let e=null;try{e=JSON.parse(t)}catch(t){return!1}return e.encseed&&e.ethaddr}function ec(t){let e=null;try{e=JSON.parse(t)}catch(t){return!1}return!(!e.version||parseInt(e.version)!==e.version||3!==parseInt(e.version))}var rc={exports:{}};!function(t,e){!function(e){const r=2147483647;function n(t){const e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let r=1779033703,n=3144134277,i=1013904242,o=2773480762,s=1359893119,a=2600822924,h=528734635,u=1541459225;const c=new Uint32Array(64);function f(t){let f=0,l=t.length;for(;l>=64;){let d,p,m,g,y,v=r,w=n,b=i,E=o,A=s,S=a,_=h,k=u;for(p=0;p<16;p++)m=f+4*p,c[p]=(255&t[m])<<24|(255&t[m+1])<<16|(255&t[m+2])<<8|255&t[m+3];for(p=16;p<64;p++)d=c[p-2],g=(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,d=c[p-15],y=(d>>>7|d<<25)^(d>>>18|d<<14)^d>>>3,c[p]=(g+c[p-7]|0)+(y+c[p-16]|0)|0;for(p=0;p<64;p++)g=(((A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7))+(A&S^~A&_)|0)+(k+(e[p]+c[p]|0)|0)|0,y=((v>>>2|v<<30)^(v>>>13|v<<19)^(v>>>22|v<<10))+(v&w^v&b^w&b)|0,k=_,_=S,S=A,A=E+g|0,E=b,b=w,w=v,v=g+y|0;r=r+v|0,n=n+w|0,i=i+b|0,o=o+E|0,s=s+A|0,a=a+S|0,h=h+_|0,u=u+k|0,f+=64,l-=64}}f(t);let l,d=t.length%64,p=t.length/536870912|0,m=t.length<<3,g=d<56?56:120,y=t.slice(t.length-d,t.length);for(y.push(128),l=d+1;l<g;l++)y.push(0);return y.push(p>>>24&255),y.push(p>>>16&255),y.push(p>>>8&255),y.push(p>>>0&255),y.push(m>>>24&255),y.push(m>>>16&255),y.push(m>>>8&255),y.push(m>>>0&255),f(y),[r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,h>>>24&255,h>>>16&255,h>>>8&255,h>>>0&255,u>>>24&255,u>>>16&255,u>>>8&255,u>>>0&255]}function i(t,e,r){t=t.length<=64?t:n(t);const i=64+e.length+4,o=new Array(i),s=new Array(64);let a,h=[];for(a=0;a<64;a++)o[a]=54;for(a=0;a<t.length;a++)o[a]^=t[a];for(a=0;a<e.length;a++)o[64+a]=e[a];for(a=i-4;a<i;a++)o[a]=0;for(a=0;a<64;a++)s[a]=92;for(a=0;a<t.length;a++)s[a]^=t[a];function u(){for(let t=i-1;t>=i-4;t--){if(o[t]++,o[t]<=255)return;o[t]=0}}for(;r>=32;)u(),h=h.concat(n(s.concat(n(o)))),r-=32;return r>0&&(u(),h=h.concat(n(s.concat(n(o))).slice(0,r))),h}function o(t,e,r,n,i){let o;for(u(t,16*(2*r-1),i,0,16),o=0;o<2*r;o++)h(t,16*o,i,16),a(i,n),u(i,0,t,e+16*o,16);for(o=0;o<r;o++)u(t,e+2*o*16,t,16*o,16);for(o=0;o<r;o++)u(t,e+16*(2*o+1),t,16*(o+r),16)}function s(t,e){return t<<e|t>>>32-e}function a(t,e){u(t,0,e,0,16);for(let t=8;t>0;t-=2)e[4]^=s(e[0]+e[12],7),e[8]^=s(e[4]+e[0],9),e[12]^=s(e[8]+e[4],13),e[0]^=s(e[12]+e[8],18),e[9]^=s(e[5]+e[1],7),e[13]^=s(e[9]+e[5],9),e[1]^=s(e[13]+e[9],13),e[5]^=s(e[1]+e[13],18),e[14]^=s(e[10]+e[6],7),e[2]^=s(e[14]+e[10],9),e[6]^=s(e[2]+e[14],13),e[10]^=s(e[6]+e[2],18),e[3]^=s(e[15]+e[11],7),e[7]^=s(e[3]+e[15],9),e[11]^=s(e[7]+e[3],13),e[15]^=s(e[11]+e[7],18),e[1]^=s(e[0]+e[3],7),e[2]^=s(e[1]+e[0],9),e[3]^=s(e[2]+e[1],13),e[0]^=s(e[3]+e[2],18),e[6]^=s(e[5]+e[4],7),e[7]^=s(e[6]+e[5],9),e[4]^=s(e[7]+e[6],13),e[5]^=s(e[4]+e[7],18),e[11]^=s(e[10]+e[9],7),e[8]^=s(e[11]+e[10],9),e[9]^=s(e[8]+e[11],13),e[10]^=s(e[9]+e[8],18),e[12]^=s(e[15]+e[14],7),e[13]^=s(e[12]+e[15],9),e[14]^=s(e[13]+e[12],13),e[15]^=s(e[14]+e[13],18);for(let r=0;r<16;++r)t[r]+=e[r]}function h(t,e,r,n){for(let i=0;i<n;i++)r[i]^=t[e+i]}function u(t,e,r,n,i){for(;i--;)r[n++]=t[e++]}function c(t){if(!t||"number"!=typeof t.length)return!1;for(let e=0;e<t.length;e++){const r=t[e];if("number"!=typeof r||r%1||r<0||r>=256)return!1}return!0}function f(t,e){if("number"!=typeof t||t%1)throw new Error("invalid "+e);return t}function l(t,e,n,s,a,l,d){if(n=f(n,"N"),s=f(s,"r"),a=f(a,"p"),l=f(l,"dkLen"),0===n||0!=(n&n-1))throw new Error("N must be power of 2");if(n>r/128/s)throw new Error("N too large");if(s>r/128/a)throw new Error("r too large");if(!c(t))throw new Error("password must be an array or buffer");if(t=Array.prototype.slice.call(t),!c(e))throw new Error("salt must be an array or buffer");e=Array.prototype.slice.call(e);let p=i(t,e,128*a*s);const m=new Uint32Array(32*a*s);for(let t=0;t<m.length;t++){const e=4*t;m[t]=(255&p[e+3])<<24|(255&p[e+2])<<16|(255&p[e+1])<<8|(255&p[e+0])<<0}const g=new Uint32Array(64*s),y=new Uint32Array(32*s*n),v=32*s,w=new Uint32Array(16),b=new Uint32Array(16),E=a*n*2;let A,S,_=0,k=null,P=!1,x=0,M=0;const I=d?parseInt(1e3/s):4294967295,R="undefined"!=typeof setImmediate?setImmediate:setTimeout,N=function(){if(P)return d(new Error("cancelled"),_/E);let e;switch(x){case 0:S=32*M*s,u(m,S,g,0,v),x=1,A=0;case 1:e=n-A,e>I&&(e=I);for(let t=0;t<e;t++)u(g,0,y,(A+t)*v,v),o(g,v,s,w,b);if(A+=e,_+=e,d){const t=parseInt(1e3*_/E);if(t!==k){if(P=d(null,_/E),P)break;k=t}}if(A<n)break;A=0,x=2;case 2:e=n-A,e>I&&(e=I);for(let t=0;t<e;t++){const t=g[16*(2*s-1)]&n-1;h(y,t*v,g,v),o(g,v,s,w,b)}if(A+=e,_+=e,d){const t=parseInt(1e3*_/E);if(t!==k){if(P=d(null,_/E),P)break;k=t}}if(A<n)break;if(u(g,0,m,S,v),M++,M<a){x=0;break}p=[];for(let t=0;t<m.length;t++)p.push(m[t]>>0&255),p.push(m[t]>>8&255),p.push(m[t]>>16&255),p.push(m[t]>>24&255);const r=i(t,p,l);return d&&d(null,1,r),r}d&&R(N)};if(!d)for(;;){const t=N();if(null!=t)return t}N()}const d={scrypt:function(t,e,r,n,i,o,s){return new Promise((function(a,h){let u=0;s&&s(0),l(t,e,r,n,i,o,(function(t,e,r){if(t)h(t);else if(r)s&&1!==u&&s(1),a(new Uint8Array(r));else if(s&&e!==u)return u=e,s(e)}))}))},syncScrypt:function(t,e,r,n,i,o){return new Uint8Array(l(t,e,r,n,i,o))}};t.exports=d}()}(rc);var nc=rc.exports,ic=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function a(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}h((n=n.apply(t,e||[])).next())}))};const oc=new Ki("json-wallets/5.5.0");function sc(t){return null!=t&&t.mnemonic&&t.mnemonic.phrase}class ac extends Io{isKeystoreAccount(t){return!(!t||!t._isKeystoreAccount)}}function hc(t,e){const r=qu($u(t,"crypto/ciphertext"));if(to(ss(Zi([e.slice(16,32),r]))).substring(2)!==$u(t,"crypto/mac").toLowerCase())throw new Error("invalid password");const n=function(t,e,r){if("aes-128-ctr"===$u(t,"crypto/cipher")){const n=qu($u(t,"crypto/cipherparams/iv")),i=new Ju.Counter(n);return Xi(new Ju.ModeOfOperation.ctr(e,i).decrypt(r))}return null}(t,e.slice(0,16),r);n||oc.throwError("unsupported cipher",Ki.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const i=e.slice(32,64),o=Wh(n);if(t.address){let e=t.address.toLowerCase();if("0x"!==e.substring(0,2)&&(e="0x"+e),ws(e)!==o)throw new Error("address mismatch")}const s={_isKeystoreAccount:!0,address:o,privateKey:to(n)};if("0.1"===$u(t,"x-ethers/version")){const e=qu($u(t,"x-ethers/mnemonicCiphertext")),r=qu($u(t,"x-ethers/mnemonicCounter")),n=new Ju.Counter(r),o=new Ju.ModeOfOperation.ctr(i,n),a=$u(t,"x-ethers/path")||Fu,h=$u(t,"x-ethers/locale")||"en",u=Xi(o.decrypt(e));try{const t=Lu(u,h),e=Du.fromMnemonic(t,null,h).derivePath(a);if(e.privateKey!=s.privateKey)throw new Error("mnemonic mismatch");s.mnemonic=e.mnemonic}catch(t){if(t.code!==Ki.errors.INVALID_ARGUMENT||"wordlist"!==t.argument)throw t}}return new ac(s)}function uc(t,e,r,n,i){return Xi(Eu(t,e,r,n,i))}function cc(t,e,r,n,i){return Promise.resolve(uc(t,e,r,n,i))}function fc(t,e,r,n,i){const o=Vu(e),s=$u(t,"crypto/kdf");if(s&&"string"==typeof s){const e=function(t,e){return oc.throwArgumentError("invalid key-derivation function parameters",t,e)};if("scrypt"===s.toLowerCase()){const r=qu($u(t,"crypto/kdfparams/salt")),a=parseInt($u(t,"crypto/kdfparams/n")),h=parseInt($u(t,"crypto/kdfparams/r")),u=parseInt($u(t,"crypto/kdfparams/p"));a&&h&&u||e("kdf",s),0!=(a&a-1)&&e("N",a);const c=parseInt($u(t,"crypto/kdfparams/dklen"));return 32!==c&&e("dklen",c),n(o,r,a,h,u,64,i)}if("pbkdf2"===s.toLowerCase()){const n=qu($u(t,"crypto/kdfparams/salt"));let i=null;const s=$u(t,"crypto/kdfparams/prf");"hmac-sha256"===s?i="sha256":"hmac-sha512"===s?i="sha512":e("prf",s);const a=parseInt($u(t,"crypto/kdfparams/c")),h=parseInt($u(t,"crypto/kdfparams/dklen"));return 32!==h&&e("dklen",h),r(o,n,a,h,i)}}return oc.throwArgumentError("unsupported key-derivation function","kdf",s)}function lc(t,e,r){if(tc(t)){r&&r(0);const n=Qu(t,e);return r&&r(1),Promise.resolve(n)}return ec(t)?function(t,e,r){return ic(this,void 0,void 0,(function*(){const n=JSON.parse(t);return hc(n,yield fc(n,e,cc,nc.scrypt,r))}))}(t,e,r):Promise.reject(new Error("invalid JSON wallet"))}function dc(t,e){if(tc(t))return Qu(t,e);if(ec(t))return function(t,e){const r=JSON.parse(t);return hc(r,fc(r,e,uc,nc.syncScrypt))}(t,e);throw new Error("invalid JSON wallet")}var pc=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function a(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}h((n=n.apply(t,e||[])).next())}))};const mc=new Ki("wallet/5.5.0");class gc extends Va{constructor(t,e){if(mc.checkNew(new.target,gc),super(),null!=(r=t)&&Qi(r.privateKey,32)&&null!=r.address){const e=new Fh(t.privateKey);if(bo(this,"_signingKey",(()=>e)),bo(this,"address",Wh(this.publicKey)),this.address!==ws(t.address)&&mc.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),function(t){const e=t.mnemonic;return e&&e.phrase}(t)){const e=t.mnemonic;bo(this,"_mnemonic",(()=>({phrase:e.phrase,path:e.path||Fu,locale:e.locale||"en"})));const r=this.mnemonic;Wh(Du.fromMnemonic(r.phrase,null,r.locale).derivePath(r.path).privateKey)!==this.address&&mc.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else bo(this,"_mnemonic",(()=>null))}else{if(Fh.isSigningKey(t))"secp256k1"!==t.curve&&mc.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),bo(this,"_signingKey",(()=>t));else{"string"==typeof t&&t.match(/^[0-9a-f]*$/i)&&64===t.length&&(t="0x"+t);const e=new Fh(t);bo(this,"_signingKey",(()=>e))}bo(this,"_mnemonic",(()=>null)),bo(this,"address",Wh(this.publicKey))}var r;e&&!Ka.isProvider(e)&&mc.throwArgumentError("invalid provider","provider",e),bo(this,"provider",e||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(t){return new gc(this,t)}signTransaction(t){return Ao(t).then((e=>{null!=e.from&&(ws(e.from)!==this.address&&mc.throwArgumentError("transaction from address mismatch","transaction.from",t.from),delete e.from);const r=this._signingKey().signDigest(ss(Yh(e)));return Yh(e,r)}))}signMessage(t){return pc(this,void 0,void 0,(function*(){return ao(this._signingKey().signDigest(function(t){return"string"==typeof t&&(t=Ks(t)),ss(Zi([Ks("Ethereum Signed Message:\n"),Ks(String(t.length)),t]))}(t)))}))}_signTypedData(t,e,r){return pc(this,void 0,void 0,(function*(){const n=yield Na.resolveNames(t,e,r,(t=>(null==this.provider&&mc.throwError("cannot resolve ENS names without a provider",Ki.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:t}),this.provider.resolveName(t))));return ao(this._signingKey().signDigest(Na.hash(n.domain,e,n.value)))}))}encrypt(t,e,r){if("function"!=typeof e||r||(r=e,e={}),r&&"function"!=typeof r)throw new Error("invalid callback");return e||(e={}),function(t,e,r,n){try{if(ws(t.address)!==Wh(t.privateKey))throw new Error("address/privateKey mismatch");if(sc(t)){const e=t.mnemonic;if(Du.fromMnemonic(e.phrase,null,e.locale).derivePath(e.path||Fu).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(t){return Promise.reject(t)}"function"!=typeof r||n||(n=r,r={}),r||(r={});const i=Xi(t.privateKey),o=Vu(e);let s=null,a=null,h=null;if(sc(t)){const e=t.mnemonic;s=Xi(Uu(e.phrase,e.locale||"en")),a=e.path||Fu,h=e.locale||"en"}let u=r.client;u||(u="ethers.js");let c=null;c=r.salt?Xi(r.salt):Ku(32);let f=null;if(r.iv){if(f=Xi(r.iv),16!==f.length)throw new Error("invalid iv")}else f=Ku(16);let l=null;if(r.uuid){if(l=Xi(r.uuid),16!==l.length)throw new Error("invalid uuid")}else l=Ku(16);let d=1<<17,p=8,m=1;return r.scrypt&&(r.scrypt.N&&(d=r.scrypt.N),r.scrypt.r&&(p=r.scrypt.r),r.scrypt.p&&(m=r.scrypt.p)),nc.scrypt(o,c,d,p,m,64,n).then((e=>{const r=(e=Xi(e)).slice(0,16),n=e.slice(16,32),o=e.slice(32,64),g=new Ju.Counter(f),y=Xi(new Ju.ModeOfOperation.ctr(r,g).encrypt(i)),v=ss(Zi([n,y])),w={address:t.address.substring(2).toLowerCase(),id:Xu(l),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:to(f).substring(2)},ciphertext:to(y).substring(2),kdf:"scrypt",kdfparams:{salt:to(c).substring(2),n:d,dklen:32,p:m,r:p},mac:v.substring(2)}};if(s){const t=Ku(16),e=new Ju.Counter(t),r=Xi(new Ju.ModeOfOperation.ctr(o,e).encrypt(s)),n=new Date,i=n.getUTCFullYear()+"-"+Gu(n.getUTCMonth()+1,2)+"-"+Gu(n.getUTCDate(),2)+"T"+Gu(n.getUTCHours(),2)+"-"+Gu(n.getUTCMinutes(),2)+"-"+Gu(n.getUTCSeconds(),2)+".0Z";w["x-ethers"]={client:u,gethFilename:"UTC--"+i+"--"+w.address,mnemonicCounter:to(t).substring(2),mnemonicCiphertext:to(r).substring(2),path:a,locale:h,version:"0.1"}}return JSON.stringify(w)}))}(this,t,e,r)}static createRandom(t){let e=Ku(16);t||(t={}),t.extraEntropy&&(e=Xi(ro(ss(Zi([e,t.extraEntropy])),0,16)));const r=Lu(e,t.locale);return gc.fromMnemonic(r,t.path,t.locale)}static fromEncryptedJson(t,e,r){return lc(t,e,r).then((t=>new gc(t)))}static fromEncryptedJsonSync(t,e){return new gc(dc(t,e))}static fromMnemonic(t,e,r){return e||(e=Fu),new gc(Du.fromMnemonic(t,null,r).derivePath(e))}}const yc=new Ki("networks/5.5.1");function vc(t){const e=function(e,r){null==r&&(r={});const n=[];if(e.InfuraProvider)try{n.push(new e.InfuraProvider(t,r.infura))}catch(t){}if(e.EtherscanProvider)try{n.push(new e.EtherscanProvider(t,r.etherscan))}catch(t){}if(e.AlchemyProvider)try{n.push(new e.AlchemyProvider(t,r.alchemy))}catch(t){}if(e.PocketProvider){const r=["goerli","ropsten","rinkeby"];try{const i=new e.PocketProvider(t);i.network&&-1===r.indexOf(i.network.name)&&n.push(i)}catch(t){}}if(e.CloudflareProvider)try{n.push(new e.CloudflareProvider(t))}catch(t){}if(0===n.length)return null;if(e.FallbackProvider){let i=1;return null!=r.quorum?i=r.quorum:"homestead"===t&&(i=2),new e.FallbackProvider(n,i)}return n[0]};return e.renetwork=function(t){return vc(t)},e}function wc(t,e){const r=function(r,n){return r.JsonRpcProvider?new r.JsonRpcProvider(t,e):null};return r.renetwork=function(e){return wc(t,e)},r}const bc={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:vc("homestead")},Ec={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:vc("ropsten")},Ac={chainId:63,name:"classicMordor",_defaultProvider:wc("https://www.ethercluster.com/mordor","classicMordor")},Sc={unspecified:{chainId:0,name:"unspecified"},homestead:bc,mainnet:bc,morden:{chainId:2,name:"morden"},ropsten:Ec,testnet:Ec,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:vc("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:vc("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:vc("goerli")},classic:{chainId:61,name:"classic",_defaultProvider:wc("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:Ac,classicTestnet:Ac,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:wc("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic"},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism"},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function _c(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return Xi(e)}function kc(t){t=Xi(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}var Pc=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function a(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}h((n=n.apply(t,e||[])).next())}))};function xc(t,e){return Pc(this,void 0,void 0,(function*(){null==e&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};!0!==e.skipFetchSetup&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client");const n=yield fetch(t,r),i=yield n.arrayBuffer(),o={};return n.headers.forEach?n.headers.forEach(((t,e)=>{o[e.toLowerCase()]=t})):n.headers.keys().forEach((t=>{o[t.toLowerCase()]=n.headers.get(t)})),{headers:o,statusCode:n.status,statusMessage:n.statusText,body:Xi(new Uint8Array(i))}}))}var Mc=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function a(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}h((n=n.apply(t,e||[])).next())}))};const Ic=new Ki("web/5.5.1");function Rc(t){return new Promise((e=>{setTimeout(e,t)}))}function Nc(t,e){if(null==t)return null;if("string"==typeof t)return t;if(Gi(t)){if(e&&("text"===e.split("/")[0]||"application/json"===e.split(";")[0].trim()))try{return Js(t)}catch(t){}return to(t)}return t}function Cc(t,e,r){let n=null;if(null!=e){n=Ks(e);const r="string"==typeof t?{url:t}:_o(t);if(r.headers){0!==Object.keys(r.headers).filter((t=>"content-type"===t.toLowerCase())).length||(r.headers=_o(r.headers),r.headers["content-type"]="application/json")}else r.headers={"content-type":"application/json"};t=r}return function(t,e,r){const n="object"==typeof t&&null!=t.throttleLimit?t.throttleLimit:12;Ic.assertArgument(n>0&&n%1==0,"invalid connection throttle limit","connection.throttleLimit",n);const i="object"==typeof t?t.throttleCallback:null,o="object"==typeof t&&"number"==typeof t.throttleSlotInterval?t.throttleSlotInterval:100;Ic.assertArgument(o>0&&o%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",o);const s={};let a=null;const h={method:"GET"};let u=!1,c=12e4;if("string"==typeof t)a=t;else if("object"==typeof t){if(null!=t&&null!=t.url||Ic.throwArgumentError("missing URL","connection.url",t),a=t.url,"number"==typeof t.timeout&&t.timeout>0&&(c=t.timeout),t.headers)for(const e in t.headers)s[e.toLowerCase()]={key:e,value:String(t.headers[e])},["if-none-match","if-modified-since"].indexOf(e.toLowerCase())>=0&&(u=!0);if(h.allowGzip=!!t.allowGzip,null!=t.user&&null!=t.password){"https:"!==a.substring(0,6)&&!0!==t.allowInsecureAuthentication&&Ic.throwError("basic authentication requires a secure https url",Ki.errors.INVALID_ARGUMENT,{argument:"url",url:a,user:t.user,password:"[REDACTED]"});const e=t.user+":"+t.password;s.authorization={key:"Authorization",value:"Basic "+kc(Ks(e))}}}const f=new RegExp("^data:([a-z0-9-]+/[a-z0-9-]+);base64,(.*)$","i"),l=a?a.match(f):null;if(l)try{const t={statusCode:200,statusMessage:"OK",headers:{"content-type":l[1]},body:_c(l[2])};let e=t.body;return r&&(e=r(t.body,t)),Promise.resolve(e)}catch(t){Ic.throwError("processing response error",Ki.errors.SERVER_ERROR,{body:Nc(l[1],l[2]),error:t,requestBody:null,requestMethod:"GET",url:a})}e&&(h.method="POST",h.body=e,null==s["content-type"]&&(s["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==s["content-length"]&&(s["content-length"]={key:"Content-Length",value:String(e.length)}));const d={};Object.keys(s).forEach((t=>{const e=s[t];d[e.key]=e.value})),h.headers=d;const p=function(){let t=null;return{promise:new Promise((function(e,r){c&&(t=setTimeout((()=>{null!=t&&(t=null,r(Ic.makeError("timeout",Ki.errors.TIMEOUT,{requestBody:Nc(h.body,d["content-type"]),requestMethod:h.method,timeout:c,url:a})))}),c))})),cancel:function(){null!=t&&(clearTimeout(t),t=null)}}}(),m=function(){return Mc(this,void 0,void 0,(function*(){for(let t=0;t<n;t++){let e=null;try{if(e=yield xc(a,h),t<n)if(301===e.statusCode||302===e.statusCode){const t=e.headers.location||"";if("GET"===h.method&&t.match(/^https:/)){a=e.headers.location;continue}}else if(429===e.statusCode){let r=!0;if(i&&(r=yield i(t,a)),r){let r=0;const n=e.headers["retry-after"];r="string"==typeof n&&n.match(/^[1-9][0-9]*$/)?1e3*parseInt(n):o*parseInt(String(Math.random()*Math.pow(2,t))),yield Rc(r);continue}}}catch(t){e=t.response,null==e&&(p.cancel(),Ic.throwError("missing response",Ki.errors.SERVER_ERROR,{requestBody:Nc(h.body,d["content-type"]),requestMethod:h.method,serverError:t,url:a}))}let s=e.body;if(u&&304===e.statusCode?s=null:(e.statusCode<200||e.statusCode>=300)&&(p.cancel(),Ic.throwError("bad response",Ki.errors.SERVER_ERROR,{status:e.statusCode,headers:e.headers,body:Nc(s,e.headers?e.headers["content-type"]:null),requestBody:Nc(h.body,d["content-type"]),requestMethod:h.method,url:a})),r)try{const t=yield r(s,e);return p.cancel(),t}catch(r){if(r.throttleRetry&&t<n){let e=!0;if(i&&(e=yield i(t,a)),e){const e=o*parseInt(String(Math.random()*Math.pow(2,t)));yield Rc(e);continue}}p.cancel(),Ic.throwError("processing response error",Ki.errors.SERVER_ERROR,{body:Nc(s,e.headers?e.headers["content-type"]:null),error:r,requestBody:Nc(h.body,d["content-type"]),requestMethod:h.method,url:a})}return p.cancel(),s}return Ic.throwError("failed response",Ki.errors.SERVER_ERROR,{requestBody:Nc(h.body,d["content-type"]),requestMethod:h.method,url:a})}))}();return Promise.race([p.promise,m])}(t,n,((t,e)=>{let n=null;if(null!=t)try{n=JSON.parse(Js(t))}catch(e){Ic.throwError("invalid JSON",Ki.errors.SERVER_ERROR,{body:t,error:e})}return r&&(n=r(n,e)),n}))}function Tc(t,e){return e||(e={}),null==(e=_o(e)).floor&&(e.floor=0),null==e.ceiling&&(e.ceiling=1e4),null==e.interval&&(e.interval=250),new Promise((function(r,n){let i=null,o=!1;const s=()=>!o&&(o=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout((()=>{s()&&n(new Error("timeout"))}),e.timeout));const a=e.retryLimit;let h=0;!function i(){return t().then((function(t){if(void 0!==t)s()&&r(t);else if(e.oncePoll)e.oncePoll.once("poll",i);else if(e.onceBlock)e.onceBlock.once("block",i);else if(!o){if(h++,h>a)return void(s()&&n(new Error("retry limit reached")));let t=e.interval*parseInt(String(Math.random()*Math.pow(2,h)));t<e.floor&&(t=e.floor),t>e.ceiling&&(t=e.ceiling),setTimeout(i,t)}return null}),(function(t){s()&&n(t)}))}()}))}for(var Oc="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Bc={},Fc=0;Fc<Oc.length;Fc++){var Dc=Oc.charAt(Fc);if(void 0!==Bc[Dc])throw new TypeError(Dc+" is ambiguous");Bc[Dc]=Fc}function Uc(t){var e=t>>25;return(33554431&t)<<5^996825010&-(e>>0&1)^642813549&-(e>>1&1)^513874426&-(e>>2&1)^1027748829&-(e>>3&1)^705979059&-(e>>4&1)}function Lc(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=Uc(e)^n>>5}for(e=Uc(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=Uc(e)^31&i}return e}function Hc(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase(),n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;var i=(t=r).lastIndexOf("1");if(-1===i)return"No separator character for "+t;if(0===i)return"Missing prefix for "+t;var o=t.slice(0,i),s=t.slice(i+1);if(s.length<6)return"Data too short";var a=Lc(o);if("string"==typeof a)return a;for(var h=[],u=0;u<s.length;++u){var c=s.charAt(u),f=Bc[c];if(void 0===f)return"Unknown character "+c;a=Uc(a)^f,u+6>=s.length||h.push(f)}return 1!==a?"Invalid checksum for "+t:{prefix:o,words:h}}function zc(t,e,r,n){for(var i=0,o=0,s=(1<<r)-1,a=[],h=0;h<t.length;++h)for(i=i<<e|t[h],o+=e;o>=r;)o-=r,a.push(i>>o&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=e)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}var jc={decodeUnsafe:function(){var t=Hc.apply(null,arguments);if("object"==typeof t)return t},decode:function(t){var e=Hc.apply(null,arguments);if("object"==typeof e)return e;throw new Error(e)},encode:function(t,e,r){if(r=r||90,t.length+7+e.length>r)throw new TypeError("Exceeds length limit");var n=Lc(t=t.toLowerCase());if("string"==typeof n)throw new Error(n);for(var i=t+"1",o=0;o<e.length;++o){var s=e[o];if(s>>5!=0)throw new Error("Non 5-bit word");n=Uc(n)^s,i+=Oc.charAt(s)}for(o=0;o<6;++o)n=Uc(n);for(n^=1,o=0;o<6;++o){i+=Oc.charAt(n>>5*(5-o)&31)}return i},toWordsUnsafe:function(t){var e=zc(t,8,5,!0);if(Array.isArray(e))return e},toWords:function(t){var e=zc(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)},fromWordsUnsafe:function(t){var e=zc(t,5,8,!1);if(Array.isArray(e))return e},fromWords:function(t){var e=zc(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}};const Kc="providers/5.5.1",Wc=new Ki(Kc);class Jc{constructor(){Wc.checkNew(new.target,Jc),this.formats=this.getDefaultFormats()}getDefaultFormats(){const t={},e=this.address.bind(this),r=this.bigNumber.bind(this),n=this.blockTag.bind(this),i=this.data.bind(this),o=this.hash.bind(this),s=this.hex.bind(this),a=this.number.bind(this),h=this.type.bind(this);return t.transaction={hash:o,type:h,accessList:Jc.allowNull(this.accessList.bind(this),null),blockHash:Jc.allowNull(o,null),blockNumber:Jc.allowNull(a,null),transactionIndex:Jc.allowNull(a,null),confirmations:Jc.allowNull(a,null),from:e,gasPrice:Jc.allowNull(r),maxPriorityFeePerGas:Jc.allowNull(r),maxFeePerGas:Jc.allowNull(r),gasLimit:r,to:Jc.allowNull(e,null),value:r,nonce:a,data:i,r:Jc.allowNull(this.uint256),s:Jc.allowNull(this.uint256),v:Jc.allowNull(a),creates:Jc.allowNull(e,null),raw:Jc.allowNull(i)},t.transactionRequest={from:Jc.allowNull(e),nonce:Jc.allowNull(a),gasLimit:Jc.allowNull(r),gasPrice:Jc.allowNull(r),maxPriorityFeePerGas:Jc.allowNull(r),maxFeePerGas:Jc.allowNull(r),to:Jc.allowNull(e),value:Jc.allowNull(r),data:Jc.allowNull((t=>this.data(t,!0))),type:Jc.allowNull(a),accessList:Jc.allowNull(this.accessList.bind(this),null)},t.receiptLog={transactionIndex:a,blockNumber:a,transactionHash:o,address:e,topics:Jc.arrayOf(o),data:i,logIndex:a,blockHash:o},t.receipt={to:Jc.allowNull(this.address,null),from:Jc.allowNull(this.address,null),contractAddress:Jc.allowNull(e,null),transactionIndex:a,root:Jc.allowNull(s),gasUsed:r,logsBloom:Jc.allowNull(i),blockHash:o,transactionHash:o,logs:Jc.arrayOf(this.receiptLog.bind(this)),blockNumber:a,confirmations:Jc.allowNull(a,null),cumulativeGasUsed:r,effectiveGasPrice:Jc.allowNull(r),status:Jc.allowNull(a),type:h},t.block={hash:o,parentHash:o,number:a,timestamp:a,nonce:Jc.allowNull(s),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:e,extraData:i,transactions:Jc.allowNull(Jc.arrayOf(o)),baseFeePerGas:Jc.allowNull(r)},t.blockWithTransactions=_o(t.block),t.blockWithTransactions.transactions=Jc.allowNull(Jc.arrayOf(this.transactionResponse.bind(this))),t.filter={fromBlock:Jc.allowNull(n,void 0),toBlock:Jc.allowNull(n,void 0),blockHash:Jc.allowNull(o,void 0),address:Jc.allowNull(e,void 0),topics:Jc.allowNull(this.topics.bind(this),void 0)},t.filterLog={blockNumber:Jc.allowNull(a),blockHash:Jc.allowNull(o),transactionIndex:a,removed:Jc.allowNull(this.boolean.bind(this)),address:e,data:Jc.allowFalsish(i,"0x"),topics:Jc.arrayOf(o),transactionHash:o,logIndex:a},t}accessList(t){return Vh(t||[])}number(t){return"0x"===t?0:lo.from(t).toNumber()}type(t){return"0x"===t||null==t?0:lo.from(t).toNumber()}bigNumber(t){return lo.from(t)}boolean(t){if("boolean"==typeof t)return t;if("string"==typeof t){if("true"===(t=t.toLowerCase()))return!0;if("false"===t)return!1}throw new Error("invalid boolean - "+t)}hex(t,e){return"string"==typeof t&&(e||"0x"===t.substring(0,2)||(t="0x"+t),Qi(t))?t.toLowerCase():Wc.throwArgumentError("invalid hash","value",t)}data(t,e){const r=this.hex(t,e);if(r.length%2!=0)throw new Error("invalid data; odd-length - "+t);return r}address(t){return ws(t)}callAddress(t){if(!Qi(t,32))return null;const e=ws(ro(t,12));return"0x0000000000000000000000000000000000000000"===e?null:e}contractAddress(t){return bs(t)}blockTag(t){if(null==t)return"latest";if("earliest"===t)return"0x0";if("latest"===t||"pending"===t)return t;if("number"==typeof t||Qi(t))return io(t);throw new Error("invalid blockTag")}hash(t,e){const r=this.hex(t,e);return 32!==eo(r)?Wc.throwArgumentError("invalid hash","value",t):r}difficulty(t){if(null==t)return null;const e=lo.from(t);try{return e.toNumber()}catch(t){}return null}uint256(t){if(!Qi(t))throw new Error("invalid uint256");return oo(t,32)}_block(t,e){null!=t.author&&null==t.miner&&(t.miner=t.author);const r=null!=t._difficulty?t._difficulty:t.difficulty,n=Jc.check(e,t);return n._difficulty=null==r?null:lo.from(r),n}block(t){return this._block(t,this.formats.block)}blockWithTransactions(t){return this._block(t,this.formats.blockWithTransactions)}transactionRequest(t){return Jc.check(this.formats.transactionRequest,t)}transactionResponse(t){null!=t.gas&&null==t.gasLimit&&(t.gasLimit=t.gas),t.to&&lo.from(t.to).isZero()&&(t.to="0x0000000000000000000000000000000000000000"),null!=t.input&&null==t.data&&(t.data=t.input),null==t.to&&null==t.creates&&(t.creates=this.contractAddress(t)),1!==t.type&&2!==t.type||null!=t.accessList||(t.accessList=[]);const e=Jc.check(this.formats.transaction,t);if(null!=t.chainId){let r=t.chainId;Qi(r)&&(r=lo.from(r).toNumber()),e.chainId=r}else{let r=t.networkId;null==r&&null==e.v&&(r=t.chainId),Qi(r)&&(r=lo.from(r).toNumber()),"number"!=typeof r&&null!=e.v&&(r=(e.v-35)/2,r<0&&(r=0),r=parseInt(r)),"number"!=typeof r&&(r=0),e.chainId=r}return e.blockHash&&"x"===e.blockHash.replace(/0/g,"")&&(e.blockHash=null),e}transaction(t){return tu(t)}receiptLog(t){return Jc.check(this.formats.receiptLog,t)}receipt(t){const e=Jc.check(this.formats.receipt,t);if(null!=e.root)if(e.root.length<=4){const t=lo.from(e.root).toNumber();0===t||1===t?(null!=e.status&&e.status!==t&&Wc.throwArgumentError("alt-root-status/status mismatch","value",{root:e.root,status:e.status}),e.status=t,delete e.root):Wc.throwArgumentError("invalid alt-root-status","value.root",e.root)}else 66!==e.root.length&&Wc.throwArgumentError("invalid root hash","value.root",e.root);return null!=e.status&&(e.byzantium=!0),e}topics(t){return Array.isArray(t)?t.map((t=>this.topics(t))):null!=t?this.hash(t,!0):null}filter(t){return Jc.check(this.formats.filter,t)}filterLog(t){return Jc.check(this.formats.filterLog,t)}static check(t,e){const r={};for(const n in t)try{const i=t[n](e[n]);void 0!==i&&(r[n]=i)}catch(t){throw t.checkKey=n,t.checkValue=e[n],t}return r}static allowNull(t,e){return function(r){return null==r?e:t(r)}}static allowFalsish(t,e){return function(r){return r?t(r):e}}static arrayOf(t){return function(e){if(!Array.isArray(e))throw new Error("not an array");const r=[];return e.forEach((function(e){r.push(t(e))})),r}}}var qc=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function a(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}h((n=n.apply(t,e||[])).next())}))};const Gc=new Ki(Kc);function Vc(t){return null==t?"null":(32!==eo(t)&&Gc.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function $c(t){for(t=t.slice();t.length>0&&null==t[t.length-1];)t.pop();return t.map((t=>{if(Array.isArray(t)){const e={};t.forEach((t=>{e[Vc(t)]=!0}));const r=Object.keys(e);return r.sort(),r.join("|")}return Vc(t)})).join("&")}function Xc(t){if("string"==typeof t){if(32===eo(t=t.toLowerCase()))return"tx:"+t;if(-1===t.indexOf(":"))return t}else{if(Array.isArray(t))return"filter:*:"+$c(t);if(ja.isForkEvent(t))throw Gc.warn("not implemented"),new Error("not implemented");if(t&&"object"==typeof t)return"filter:"+(t.address||"*")+":"+$c(t.topics||[])}throw new Error("invalid event - "+t)}function Zc(){return(new Date).getTime()}function Yc(t){return new Promise((e=>{setTimeout(e,t)}))}const Qc=["block","network","pending","poll"];class tf{constructor(t,e,r){bo(this,"tag",t),bo(this,"listener",e),bo(this,"once",r)}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const t=this.tag.split(":");return"tx"!==t[0]?null:t[1]}get filter(){const t=this.tag.split(":");if("filter"!==t[0])return null;const e=t[1],r=""===(n=t[2])?[]:n.split(/&/g).map((t=>{if(""===t)return[];const e=t.split("|").map((t=>"null"===t?null:t));return 1===e.length?e[0]:e}));var n;const i={};return r.length>0&&(i.topics=r),e&&"*"!==e&&(i.address=e),i}pollable(){return this.tag.indexOf(":")>=0||Qc.indexOf(this.tag)>=0}}const ef={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function rf(t){return oo(lo.from(t).toHexString(),32)}function nf(t){return gu.encode(Zi([t,ro(wu(wu(t)),0,4)]))}const of=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),new RegExp("^(ipfs)://(.*)$","i"),new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function sf(t){try{return Js(af(t))}catch(t){}return null}function af(t){if("0x"===t)return null;const e=lo.from(ro(t,0,32)).toNumber(),r=lo.from(ro(t,e,e+32)).toNumber();return ro(t,e+32,e+32+r)}class hf{constructor(t,e,r,n){bo(this,"provider",t),bo(this,"name",r),bo(this,"address",t.formatter.address(e)),bo(this,"_resolvedAddress",n)}_fetchBytes(t,e){return qc(this,void 0,void 0,(function*(){const r={to:this.address,data:no([t,ma(this.name),e||"0x"])};try{return af(yield this.provider.call(r))}catch(t){return t.code,Ki.errors.CALL_EXCEPTION,null}}))}_getAddress(t,e){const r=ef[String(t)];if(null==r&&Gc.throwError(`unsupported coin type: ${t}`,Ki.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${t})`}),"eth"===r.ilk)return this.provider.formatter.address(e);const n=Xi(e);if(null!=r.p2pkh){const t=e.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(t){const e=parseInt(t[1],16);if(t[2].length===2*e&&e>=1&&e<=75)return nf(Zi([[r.p2pkh],"0x"+t[2]]))}}if(null!=r.p2sh){const t=e.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(t){const e=parseInt(t[1],16);if(t[2].length===2*e&&e>=1&&e<=75)return nf(Zi([[r.p2sh],"0x"+t[2]]))}}if(null!=r.prefix){const t=n[1];let e=n[0];if(0===e?20!==t&&32!==t&&(e=-1):e=-1,e>=0&&n.length===2+t&&t>=1&&t<=75){const t=jc.toWords(n.slice(2));return t.unshift(e),jc.encode(r.prefix,t)}}return null}getAddress(t){return qc(this,void 0,void 0,(function*(){if(null==t&&(t=60),60===t)try{const t={to:this.address,data:"0x3b3b57de"+ma(this.name).substring(2)},e=yield this.provider.call(t);return"0x"===e||"0x0000000000000000000000000000000000000000000000000000000000000000"===e?null:this.provider.formatter.callAddress(e)}catch(t){if(t.code===Ki.errors.CALL_EXCEPTION)return null;throw t}const e=yield this._fetchBytes("0xf1cb7e06",rf(t));if(null==e||"0x"===e)return null;const r=this._getAddress(t,e);return null==r&&Gc.throwError("invalid or unsupported coin data",Ki.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${t})`,coinType:t,data:e}),r}))}getAvatar(){return qc(this,void 0,void 0,(function*(){const t=[];try{const e=yield this.getText("avatar");if(null==e)return null;for(let r=0;r<of.length;r++){const n=e.match(of[r]);if(null!=n)switch(n[1]){case"https":return t.push({type:"url",content:e}),{linkage:t,url:e};case"data":return t.push({type:"data",content:e}),{linkage:t,url:e};case"ipfs":return t.push({type:"ipfs",content:e}),{linkage:t,url:`https://gateway.ipfs.io/ipfs/${e.substring(7)}`};case"erc721":case"erc1155":{const r="erc721"===n[1]?"0xc87b56dd":"0x0e89341c";t.push({type:n[1],content:e});const i=this._resolvedAddress||(yield this.getAddress()),o=(n[2]||"").split("/");if(2!==o.length)return null;const s=yield this.provider.formatter.address(o[0]),a=oo(lo.from(o[1]).toHexString(),32);if("erc721"===n[1]){const e=this.provider.formatter.callAddress(yield this.provider.call({to:s,data:no(["0x6352211e",a])}));if(i!==e)return null;t.push({type:"owner",content:e})}else if("erc1155"===n[1]){const e=lo.from(yield this.provider.call({to:s,data:no(["0x00fdd58e",oo(i,32),a])}));if(e.isZero())return null;t.push({type:"balance",content:e.toString()})}const h={to:this.provider.formatter.address(o[0]),data:no([r,a])};let u=sf(yield this.provider.call(h));if(null==u)return null;t.push({type:"metadata-url",content:u}),"erc1155"===n[1]&&(u=u.replace("{id}",a.substring(2)));const c=yield Cc(u);return c&&"string"==typeof c.image&&c.image.match(/^(https:\/\/|data:)/i)?(t.push({type:"metadata",content:JSON.stringify(c)}),t.push({type:"url",content:c.image}),{linkage:t,url:c.image}):null}}}}catch(t){}return null}))}getContentHash(){return qc(this,void 0,void 0,(function*(){const t=yield this._fetchBytes("0xbc1c58d1");if(null==t||"0x"===t)return null;const e=t.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const t=parseInt(e[3],16);if(e[4].length===2*t)return"ipfs://"+gu.encode("0x"+e[1])}const r=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);return r&&64===r[1].length?"bzz://"+r[1]:Gc.throwError("invalid or unsupported content hash data",Ki.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:t})}))}getText(t){return qc(this,void 0,void 0,(function*(){let e=Ks(t);e=Zi([rf(64),rf(e.length),e]),e.length%32!=0&&(e=Zi([e,oo("0x",32-t.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",to(e));return null==r||"0x"===r?null:Js(r)}))}}let uf=null,cf=1;class ff extends Ka{constructor(t){if(Gc.checkNew(new.target,Ka),super(),this._events=[],this._emitted={block:-2},this.formatter=new.target.getFormatter(),bo(this,"anyNetwork","any"===t),this.anyNetwork&&(t=this.detectNetwork()),t instanceof Promise)this._networkPromise=t,t.catch((t=>{})),this._ready().catch((t=>{}));else{const e=Eo(new.target,"getNetwork")(t);e?(bo(this,"_network",e),this.emit("network",e,null)):Gc.throwArgumentError("invalid network","network",t)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return qc(this,void 0,void 0,(function*(){if(null==this._network){let t=null;if(this._networkPromise)try{t=yield this._networkPromise}catch(t){}null==t&&(t=yield this.detectNetwork()),t||Gc.throwError("no network detected",Ki.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=t:bo(this,"_network",t),this.emit("network",t,null))}return this._network}))}get ready(){return Tc((()=>this._ready().then((t=>t),(t=>{if(t.code!==Ki.errors.NETWORK_ERROR||"noNetwork"!==t.event)throw t}))))}static getFormatter(){return null==uf&&(uf=new Jc),uf}static getNetwork(t){return function(t){if(null==t)return null;if("number"==typeof t){for(const e in Sc){const r=Sc[e];if(r.chainId===t)return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}return{chainId:t,name:"unknown"}}if("string"==typeof t){const e=Sc[t];return null==e?null:{name:e.name,chainId:e.chainId,ensAddress:e.ensAddress,_defaultProvider:e._defaultProvider||null}}const e=Sc[t.name];if(!e)return"number"!=typeof t.chainId&&yc.throwArgumentError("invalid network chainId","network",t),t;0!==t.chainId&&t.chainId!==e.chainId&&yc.throwArgumentError("network chainId mismatch","network",t);let r=t._defaultProvider||null;var n;return null==r&&e._defaultProvider&&(r=(n=e._defaultProvider)&&"function"==typeof n.renetwork?e._defaultProvider.renetwork(t):e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}(null==t?"homestead":t)}_getInternalBlockNumber(t){return qc(this,void 0,void 0,(function*(){if(yield this._ready(),t>0)for(;this._internalBlockNumber;){const e=this._internalBlockNumber;try{const r=yield e;if(Zc()-r.respTime<=t)return r.blockNumber;break}catch(t){if(this._internalBlockNumber===e)break}}const e=Zc(),r=Ao({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((t=>null),(t=>t))}).then((({blockNumber:t,networkError:n})=>{if(n)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),n;const i=Zc();return(t=lo.from(t).toNumber())<this._maxInternalBlockNumber&&(t=this._maxInternalBlockNumber),this._maxInternalBlockNumber=t,this._setFastBlockNumber(t),{blockNumber:t,reqTime:e,respTime:i}}));return this._internalBlockNumber=r,r.catch((t=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)})),(yield r).blockNumber}))}poll(){return qc(this,void 0,void 0,(function*(){const t=cf++,e=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(t){return void this.emit("error",t)}if(this._setFastBlockNumber(r),this.emit("poll",t,r),r!==this._lastBlockNumber){if(-2===this._emitted.block&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)Gc.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",Gc.makeError("network block skew detected",Ki.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let t=this._emitted.block+1;t<=r;t++)this.emit("block",t);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach((t=>{if("block"===t)return;const e=this._emitted[t];"pending"!==e&&r-e>12&&delete this._emitted[t]}))),-2===this._lastBlockNumber&&(this._lastBlockNumber=r-1),this._events.forEach((t=>{switch(t.type){case"tx":{const r=t.hash;let n=this.getTransactionReceipt(r).then((t=>t&&null!=t.blockNumber?(this._emitted["t:"+r]=t.blockNumber,this.emit(r,t),null):null)).catch((t=>{this.emit("error",t)}));e.push(n);break}case"filter":{const n=t.filter;n.fromBlock=this._lastBlockNumber+1,n.toBlock=r;const i=this.getLogs(n).then((t=>{0!==t.length&&t.forEach((t=>{this._emitted["b:"+t.blockHash]=t.blockNumber,this._emitted["t:"+t.transactionHash]=t.blockNumber,this.emit(n,t)}))})).catch((t=>{this.emit("error",t)}));e.push(i);break}}})),this._lastBlockNumber=r,Promise.all(e).then((()=>{this.emit("didPoll",t)})).catch((t=>{this.emit("error",t)}))}else this.emit("didPoll",t)}))}resetEventsBlock(t){this._lastBlockNumber=t-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return qc(this,void 0,void 0,(function*(){return Gc.throwError("provider does not support network detection",Ki.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})}))}getNetwork(){return qc(this,void 0,void 0,(function*(){const t=yield this._ready(),e=yield this.detectNetwork();if(t.chainId!==e.chainId){if(this.anyNetwork)return this._network=e,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",e,t),yield Yc(0),this._network;const r=Gc.makeError("underlying network changed",Ki.errors.NETWORK_ERROR,{event:"changed",network:t,detectedNetwork:e});throw this.emit("error",r),r}return t}))}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then((t=>{this._setFastBlockNumber(t)}),(t=>{})),null!=this._fastBlockNumber?this._fastBlockNumber:-1}get polling(){return null!=this._poller}set polling(t){t&&!this._poller?(this._poller=setInterval((()=>{this.poll()}),this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout((()=>{this.poll(),this._bootstrapPoll=setTimeout((()=>{this._poller||this.poll(),this._bootstrapPoll=null}),this.pollingInterval)}),0))):!t&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(t){if("number"!=typeof t||t<=0||parseInt(String(t))!=t)throw new Error("invalid polling interval");this._pollingInterval=t,this._poller&&(clearInterval(this._poller),this._poller=setInterval((()=>{this.poll()}),this._pollingInterval))}_getFastBlockNumber(){const t=Zc();return t-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=t,this._fastBlockNumberPromise=this.getBlockNumber().then((t=>((null==this._fastBlockNumber||t>this._fastBlockNumber)&&(this._fastBlockNumber=t),this._fastBlockNumber)))),this._fastBlockNumberPromise}_setFastBlockNumber(t){null!=this._fastBlockNumber&&t<this._fastBlockNumber||(this._fastQueryDate=Zc(),(null==this._fastBlockNumber||t>this._fastBlockNumber)&&(this._fastBlockNumber=t,this._fastBlockNumberPromise=Promise.resolve(t)))}waitForTransaction(t,e,r){return qc(this,void 0,void 0,(function*(){return this._waitForTransaction(t,null==e?1:e,r||0,null)}))}_waitForTransaction(t,e,r,n){return qc(this,void 0,void 0,(function*(){const i=yield this.getTransactionReceipt(t);return(i?i.confirmations:0)>=e?i:new Promise(((i,o)=>{const s=[];let a=!1;const h=function(){return!!a||(a=!0,s.forEach((t=>{t()})),!1)},u=t=>{t.confirmations<e||h()||i(t)};if(this.on(t,u),s.push((()=>{this.removeListener(t,u)})),n){let r=n.startBlock,i=null;const u=s=>qc(this,void 0,void 0,(function*(){a||(yield Yc(1e3),this.getTransactionCount(n.from).then((c=>qc(this,void 0,void 0,(function*(){if(!a){if(c<=n.nonce)r=s;else{{const e=yield this.getTransaction(t);if(e&&null!=e.blockNumber)return}for(null==i&&(i=r-3,i<n.startBlock&&(i=n.startBlock));i<=s;){if(a)return;const r=yield this.getBlockWithTransactions(i);for(let i=0;i<r.transactions.length;i++){const s=r.transactions[i];if(s.hash===t)return;if(s.from===n.from&&s.nonce===n.nonce){if(a)return;const r=yield this.waitForTransaction(s.hash,e);if(h())return;let i="replaced";return s.data===n.data&&s.to===n.to&&s.value.eq(n.value)?i="repriced":"0x"===s.data&&s.from===s.to&&s.value.isZero()&&(i="cancelled"),void o(Gc.makeError("transaction was replaced",Ki.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===i||"cancelled"===i,reason:i,replacement:this._wrapTransaction(s),hash:t,receipt:r}))}}i++}}a||this.once("block",u)}}))),(t=>{a||this.once("block",u)})))}));if(a)return;this.once("block",u),s.push((()=>{this.removeListener("block",u)}))}if("number"==typeof r&&r>0){const t=setTimeout((()=>{h()||o(Gc.makeError("timeout exceeded",Ki.errors.TIMEOUT,{timeout:r}))}),r);t.unref&&t.unref(),s.push((()=>{clearTimeout(t)}))}}))}))}getBlockNumber(){return qc(this,void 0,void 0,(function*(){return this._getInternalBlockNumber(0)}))}getGasPrice(){return qc(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield this.perform("getGasPrice",{});try{return lo.from(t)}catch(e){return Gc.throwError("bad result from backend",Ki.errors.SERVER_ERROR,{method:"getGasPrice",result:t,error:e})}}))}getBalance(t,e){return qc(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield Ao({address:this._getAddress(t),blockTag:this._getBlockTag(e)}),n=yield this.perform("getBalance",r);try{return lo.from(n)}catch(t){return Gc.throwError("bad result from backend",Ki.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:t})}}))}getTransactionCount(t,e){return qc(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield Ao({address:this._getAddress(t),blockTag:this._getBlockTag(e)}),n=yield this.perform("getTransactionCount",r);try{return lo.from(n).toNumber()}catch(t){return Gc.throwError("bad result from backend",Ki.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:t})}}))}getCode(t,e){return qc(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield Ao({address:this._getAddress(t),blockTag:this._getBlockTag(e)}),n=yield this.perform("getCode",r);try{return to(n)}catch(t){return Gc.throwError("bad result from backend",Ki.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:t})}}))}getStorageAt(t,e,r){return qc(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield Ao({address:this._getAddress(t),blockTag:this._getBlockTag(r),position:Promise.resolve(e).then((t=>io(t)))}),i=yield this.perform("getStorageAt",n);try{return to(i)}catch(t){return Gc.throwError("bad result from backend",Ki.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:i,error:t})}}))}_wrapTransaction(t,e,r){if(null!=e&&32!==eo(e))throw new Error("invalid response - sendTransaction");const n=t;return null!=e&&t.hash!==e&&Gc.throwError("Transaction hash mismatch from Provider.sendTransaction.",Ki.errors.UNKNOWN_ERROR,{expectedHash:t.hash,returnedHash:e}),n.wait=(e,n)=>qc(this,void 0,void 0,(function*(){let i;null==e&&(e=1),null==n&&(n=0),0!==e&&null!=r&&(i={data:t.data,from:t.from,nonce:t.nonce,to:t.to,value:t.value,startBlock:r});const o=yield this._waitForTransaction(t.hash,e,n,i);return null==o&&0===e?null:(this._emitted["t:"+t.hash]=o.blockNumber,0===o.status&&Gc.throwError("transaction failed",Ki.errors.CALL_EXCEPTION,{transactionHash:t.hash,transaction:t,receipt:o}),o)})),n}sendTransaction(t){return qc(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield Promise.resolve(t).then((t=>to(t))),r=this.formatter.transaction(t);null==r.confirmations&&(r.confirmations=0);const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const t=yield this.perform("sendTransaction",{signedTransaction:e});return this._wrapTransaction(r,t,n)}catch(t){throw t.transaction=r,t.transactionHash=r.hash,t}}))}_getTransactionRequest(t){return qc(this,void 0,void 0,(function*(){const e=yield t,r={};return["from","to"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>t?this._getAddress(t):null)))})),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>t?lo.from(t):null)))})),["type"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>null!=t?t:null)))})),e.accessList&&(r.accessList=this.formatter.accessList(e.accessList)),["data"].forEach((t=>{null!=e[t]&&(r[t]=Promise.resolve(e[t]).then((t=>t?to(t):null)))})),this.formatter.transactionRequest(yield Ao(r))}))}_getFilter(t){return qc(this,void 0,void 0,(function*(){t=yield t;const e={};return null!=t.address&&(e.address=this._getAddress(t.address)),["blockHash","topics"].forEach((r=>{null!=t[r]&&(e[r]=t[r])})),["fromBlock","toBlock"].forEach((r=>{null!=t[r]&&(e[r]=this._getBlockTag(t[r]))})),this.formatter.filter(yield Ao(e))}))}call(t,e){return qc(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield Ao({transaction:this._getTransactionRequest(t),blockTag:this._getBlockTag(e)}),n=yield this.perform("call",r);try{return to(n)}catch(t){return Gc.throwError("bad result from backend",Ki.errors.SERVER_ERROR,{method:"call",params:r,result:n,error:t})}}))}estimateGas(t){return qc(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield Ao({transaction:this._getTransactionRequest(t)}),r=yield this.perform("estimateGas",e);try{return lo.from(r)}catch(t){return Gc.throwError("bad result from backend",Ki.errors.SERVER_ERROR,{method:"estimateGas",params:e,result:r,error:t})}}))}_getAddress(t){return qc(this,void 0,void 0,(function*(){"string"!=typeof(t=yield t)&&Gc.throwArgumentError("invalid address or ENS name","name",t);const e=yield this.resolveName(t);return null==e&&Gc.throwError("ENS name not configured",Ki.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(t)})`}),e}))}_getBlock(t,e){return qc(this,void 0,void 0,(function*(){yield this.getNetwork(),t=yield t;let r=-128;const n={includeTransactions:!!e};if(Qi(t,32))n.blockHash=t;else try{n.blockTag=yield this._getBlockTag(t),Qi(n.blockTag)&&(r=parseInt(n.blockTag.substring(2),16))}catch(e){Gc.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",t)}return Tc((()=>qc(this,void 0,void 0,(function*(){const t=yield this.perform("getBlock",n);if(null==t)return null!=n.blockHash&&null==this._emitted["b:"+n.blockHash]||null!=n.blockTag&&r>this._emitted.block?null:void 0;if(e){let e=null;for(let r=0;r<t.transactions.length;r++){const n=t.transactions[r];if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){null==e&&(e=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let t=e-n.blockNumber+1;t<=0&&(t=1),n.confirmations=t}}const r=this.formatter.blockWithTransactions(t);return r.transactions=r.transactions.map((t=>this._wrapTransaction(t))),r}return this.formatter.block(t)}))),{oncePoll:this})}))}getBlock(t){return this._getBlock(t,!1)}getBlockWithTransactions(t){return this._getBlock(t,!0)}getTransaction(t){return qc(this,void 0,void 0,(function*(){yield this.getNetwork(),t=yield t;const e={transactionHash:this.formatter.hash(t,!0)};return Tc((()=>qc(this,void 0,void 0,(function*(){const r=yield this.perform("getTransaction",e);if(null==r)return null==this._emitted["t:"+t]?null:void 0;const n=this.formatter.transactionResponse(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let t=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;t<=0&&(t=1),n.confirmations=t}return this._wrapTransaction(n)}))),{oncePoll:this})}))}getTransactionReceipt(t){return qc(this,void 0,void 0,(function*(){yield this.getNetwork(),t=yield t;const e={transactionHash:this.formatter.hash(t,!0)};return Tc((()=>qc(this,void 0,void 0,(function*(){const r=yield this.perform("getTransactionReceipt",e);if(null==r)return null==this._emitted["t:"+t]?null:void 0;if(null==r.blockHash)return;const n=this.formatter.receipt(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let t=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;t<=0&&(t=1),n.confirmations=t}return n}))),{oncePoll:this})}))}getLogs(t){return qc(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield Ao({filter:this._getFilter(t)}),r=yield this.perform("getLogs",e);return r.forEach((t=>{null==t.removed&&(t.removed=!1)})),Jc.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)}))}getEtherPrice(){return qc(this,void 0,void 0,(function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})}))}_getBlockTag(t){return qc(this,void 0,void 0,(function*(){if("number"==typeof(t=yield t)&&t<0){t%1&&Gc.throwArgumentError("invalid BlockTag","blockTag",t);let e=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return e+=t,e<0&&(e=0),this.formatter.blockTag(e)}return this.formatter.blockTag(t)}))}getResolver(t){return qc(this,void 0,void 0,(function*(){try{const e=yield this._getResolver(t);return null==e?null:new hf(this,e,t)}catch(t){return t.code,Ki.errors.CALL_EXCEPTION,null}}))}_getResolver(t){return qc(this,void 0,void 0,(function*(){const e=yield this.getNetwork();e.ensAddress||Gc.throwError("network does not support ENS",Ki.errors.UNSUPPORTED_OPERATION,{operation:"ENS",network:e.name});const r={to:e.ensAddress,data:"0x0178b8bf"+ma(t).substring(2)};try{return this.formatter.callAddress(yield this.call(r))}catch(t){if(t.code===Ki.errors.CALL_EXCEPTION)return null;throw t}}))}resolveName(t){return qc(this,void 0,void 0,(function*(){t=yield t;try{return Promise.resolve(this.formatter.address(t))}catch(e){if(Qi(t))throw e}"string"!=typeof t&&Gc.throwArgumentError("invalid ENS name","name",t);const e=yield this.getResolver(t);return e?yield e.getAddress():null}))}lookupAddress(t){return qc(this,void 0,void 0,(function*(){t=yield t;const e=(t=this.formatter.address(t)).substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(e);if(!r)return null;let n=Xi(yield this.call({to:r,data:"0x691f3431"+ma(e).substring(2)}));if(n.length<32||!lo.from(n.slice(0,32)).eq(32))return null;if(n=n.slice(32),n.length<32)return null;const i=lo.from(n.slice(0,32)).toNumber();if(n=n.slice(32),i>n.length)return null;const o=Js(n.slice(0,i));return(yield this.resolveName(o))!=t?null:o}))}getAvatar(t){return qc(this,void 0,void 0,(function*(){let e=null;if(Qi(t)){const r=this.formatter.address(t),n=r.substring(2).toLowerCase()+".addr.reverse",i=yield this._getResolver(n);if(!i)return null;e=new hf(this,i,"_",r)}else if(e=yield this.getResolver(t),!e)return null;const r=yield e.getAvatar();return null==r?null:r.url}))}perform(t,e){return Gc.throwError(t+" not implemented",Ki.errors.NOT_IMPLEMENTED,{operation:t})}_startEvent(t){this.polling=this._events.filter((t=>t.pollable())).length>0}_stopEvent(t){this.polling=this._events.filter((t=>t.pollable())).length>0}_addEventListener(t,e,r){const n=new tf(Xc(t),e,r);return this._events.push(n),this._startEvent(n),this}on(t,e){return this._addEventListener(t,e,!1)}once(t,e){return this._addEventListener(t,e,!0)}emit(t,...e){let r=!1,n=[],i=Xc(t);return this._events=this._events.filter((t=>t.tag!==i||(setTimeout((()=>{t.listener.apply(this,e)}),0),r=!0,!t.once||(n.push(t),!1)))),n.forEach((t=>{this._stopEvent(t)})),r}listenerCount(t){if(!t)return this._events.length;let e=Xc(t);return this._events.filter((t=>t.tag===e)).length}listeners(t){if(null==t)return this._events.map((t=>t.listener));let e=Xc(t);return this._events.filter((t=>t.tag===e)).map((t=>t.listener))}off(t,e){if(null==e)return this.removeAllListeners(t);const r=[];let n=!1,i=Xc(t);return this._events=this._events.filter((t=>t.tag!==i||t.listener!=e||(!!n||(n=!0,r.push(t),!1)))),r.forEach((t=>{this._stopEvent(t)})),this}removeAllListeners(t){let e=[];if(null==t)e=this._events,this._events=[];else{const r=Xc(t);this._events=this._events.filter((t=>t.tag!==r||(e.push(t),!1)))}return e.forEach((t=>{this._stopEvent(t)})),this}}var lf=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{h(n.next(t))}catch(t){o(t)}}function a(t){try{h(n.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}h((n=n.apply(t,e||[])).next())}))};const df=new Ki(Kc),pf=["call","estimateGas"];function mf(t,e,r){if("call"===t&&e.code===Ki.errors.SERVER_ERROR){const t=e.error;if(t&&t.message.match("reverted")&&Qi(t.data))return t.data;df.throwError("missing revert data in call exception",Ki.errors.CALL_EXCEPTION,{error:e,data:"0x"})}let n=e.message;e.code===Ki.errors.SERVER_ERROR&&e.error&&"string"==typeof e.error.message?n=e.error.message:"string"==typeof e.body?n=e.body:"string"==typeof e.responseText&&(n=e.responseText),n=(n||"").toLowerCase();const i=r.transaction||r.signedTransaction;throw n.match(/insufficient funds|base fee exceeds gas limit/)&&df.throwError("insufficient funds for intrinsic transaction cost",Ki.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:i}),n.match(/nonce too low/)&&df.throwError("nonce has already been used",Ki.errors.NONCE_EXPIRED,{error:e,method:t,transaction:i}),n.match(/replacement transaction underpriced/)&&df.throwError("replacement fee too low",Ki.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:i}),n.match(/only replay-protected/)&&df.throwError("legacy pre-eip-155 transactions not supported",Ki.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:i}),pf.indexOf(t)>=0&&n.match(/gas required exceeds allowance|always failing transaction|execution reverted/)&&df.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Ki.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:i}),e}function gf(t){return new Promise((function(e){setTimeout(e,t)}))}function yf(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function vf(t){return t?t.toLowerCase():t}const wf={};class bf extends Va{constructor(t,e,r){if(df.checkNew(new.target,bf),super(),t!==wf)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");bo(this,"provider",e),null==r&&(r=0),"string"==typeof r?(bo(this,"_address",this.provider.formatter.address(r)),bo(this,"_index",null)):"number"==typeof r?(bo(this,"_index",r),bo(this,"_address",null)):df.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(t){return df.throwError("cannot alter JSON-RPC Signer connection",Ki.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new Ef(wf,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((t=>(t.length<=this._index&&df.throwError("unknown account #"+this._index,Ki.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(t[this._index]))))}sendUncheckedTransaction(t){t=_o(t);const e=this.getAddress().then((t=>(t&&(t=t.toLowerCase()),t)));if(null==t.gasLimit){const r=_o(t);r.from=e,t.gasLimit=this.provider.estimateGas(r)}return null!=t.to&&(t.to=Promise.resolve(t.to).then((t=>lf(this,void 0,void 0,(function*(){if(null==t)return null;const e=yield this.provider.resolveName(t);return null==e&&df.throwArgumentError("provided ENS name resolves to null","tx.to",t),e}))))),Ao({tx:Ao(t),sender:e}).then((({tx:e,sender:r})=>{null!=e.from?e.from.toLowerCase()!==r&&df.throwArgumentError("from address mismatch","transaction",t):e.from=r;const n=this.provider.constructor.hexlifyTransaction(e,{from:!0});return this.provider.send("eth_sendTransaction",[n]).then((t=>t),(t=>mf("sendTransaction",t,n)))}))}signTransaction(t){return df.throwError("signing transactions is unsupported",Ki.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(t){return lf(this,void 0,void 0,(function*(){const e=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(t);try{return yield Tc((()=>lf(this,void 0,void 0,(function*(){const t=yield this.provider.getTransaction(r);if(null!==t)return this.provider._wrapTransaction(t,r,e)}))),{oncePoll:this.provider})}catch(t){throw t.transactionHash=r,t}}))}signMessage(t){return lf(this,void 0,void 0,(function*(){const e="string"==typeof t?Ks(t):t,r=yield this.getAddress();return yield this.provider.send("personal_sign",[to(e),r.toLowerCase()])}))}_legacySignMessage(t){return lf(this,void 0,void 0,(function*(){const e="string"==typeof t?Ks(t):t,r=yield this.getAddress();return yield this.provider.send("eth_sign",[r.toLowerCase(),to(e)])}))}_signTypedData(t,e,r){return lf(this,void 0,void 0,(function*(){const n=yield Na.resolveNames(t,e,r,(t=>this.provider.resolveName(t))),i=yield this.getAddress();return yield this.provider.send("eth_signTypedData_v4",[i.toLowerCase(),JSON.stringify(Na.getPayload(n.domain,e,n.value))])}))}unlock(t){return lf(this,void 0,void 0,(function*(){const e=this.provider,r=yield this.getAddress();return e.send("personal_unlockAccount",[r.toLowerCase(),t,null])}))}}class Ef extends bf{sendTransaction(t){return this.sendUncheckedTransaction(t).then((t=>({hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:e=>this.provider.waitForTransaction(t,e)})))}}const Af={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class Sf extends ff{constructor(t,e){df.checkNew(new.target,Sf);let r=e;null==r&&(r=new Promise(((t,e)=>{setTimeout((()=>{this.detectNetwork().then((e=>{t(e)}),(t=>{e(t)}))}),0)}))),super(r),t||(t=Eo(this.constructor,"defaultUrl")()),bo(this,"connection","string"==typeof t?Object.freeze({url:t}):Object.freeze(_o(t))),this._nextId=42}get _cache(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout((()=>{this._cache.detectNetwork=null}),0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return lf(this,void 0,void 0,(function*(){yield gf(0);let t=null;try{t=yield this.send("eth_chainId",[])}catch(e){try{t=yield this.send("net_version",[])}catch(t){}}if(null!=t){const e=Eo(this.constructor,"getNetwork");try{return e(lo.from(t).toNumber())}catch(e){return df.throwError("could not detect network",Ki.errors.NETWORK_ERROR,{chainId:t,event:"invalidNetwork",serverError:e})}}return df.throwError("could not detect network",Ki.errors.NETWORK_ERROR,{event:"noNetwork"})}))}getSigner(t){return new bf(wf,this,t)}getUncheckedSigner(t){return this.getSigner(t).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then((t=>t.map((t=>this.formatter.address(t)))))}send(t,e){const r={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Mo(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(t)>=0;if(n&&this._cache[t])return this._cache[t];const i=Cc(this.connection,JSON.stringify(r),yf).then((t=>(this.emit("debug",{action:"response",request:r,response:t,provider:this}),t)),(t=>{throw this.emit("debug",{action:"response",error:t,request:r,provider:this}),t}));return n&&(this._cache[t]=i,setTimeout((()=>{this._cache[t]=null}),0)),i}prepareRequest(t,e){switch(t){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[vf(e.address),e.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[vf(e.address),e.blockTag]];case"getCode":return["eth_getCode",[vf(e.address),e.blockTag]];case"getStorageAt":return["eth_getStorageAt",[vf(e.address),e.position,e.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[e.signedTransaction]];case"getBlock":return e.blockTag?["eth_getBlockByNumber",[e.blockTag,!!e.includeTransactions]]:e.blockHash?["eth_getBlockByHash",[e.blockHash,!!e.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[e.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[e.transactionHash]];case"call":return["eth_call",[Eo(this.constructor,"hexlifyTransaction")(e.transaction,{from:!0}),e.blockTag]];case"estimateGas":return["eth_estimateGas",[Eo(this.constructor,"hexlifyTransaction")(e.transaction,{from:!0})]];case"getLogs":return e.filter&&null!=e.filter.address&&(e.filter.address=vf(e.filter.address)),["eth_getLogs",[e.filter]]}return null}perform(t,e){return lf(this,void 0,void 0,(function*(){if("call"===t||"estimateGas"===t){const t=e.transaction;if(t&&null!=t.type&&lo.from(t.type).isZero()&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){const r=yield this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&((e=_o(e)).transaction=_o(t),delete e.transaction.type)}}const r=this.prepareRequest(t,e);null==r&&df.throwError(t+" not implemented",Ki.errors.NOT_IMPLEMENTED,{operation:t});try{return yield this.send(r[0],r[1])}catch(r){return mf(t,r,e)}}))}_startEvent(t){"pending"===t.tag&&this._startPending(),super._startEvent(t)}_startPending(){if(null!=this._pendingFilter)return;const t=this,e=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=e,e.then((function(r){return function n(){t.send("eth_getFilterChanges",[r]).then((function(r){if(t._pendingFilter!=e)return null;let n=Promise.resolve();return r.forEach((function(e){t._emitted["t:"+e.toLowerCase()]="pending",n=n.then((function(){return t.getTransaction(e).then((function(e){return t.emit("pending",e),null}))}))})),n.then((function(){return gf(1e3)}))})).then((function(){if(t._pendingFilter==e)return setTimeout((function(){n()}),0),null;t.send("eth_uninstallFilter",[r])})).catch((t=>{}))}(),r})).catch((t=>{}))}_stopEvent(t){"pending"===t.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),super._stopEvent(t)}static hexlifyTransaction(t,e){const r=_o(Af);if(e)for(const t in e)e[t]&&(r[t]=!0);So(t,r);const n={};return["gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(e){if(null==t[e])return;const r=io(t[e]);"gasLimit"===e&&(e="gas"),n[e]=r})),["from","to","data"].forEach((function(e){null!=t[e]&&(n[e]=to(t[e]))})),t.accessList&&(n.accessList=Vh(t.accessList)),n}}function _f(t,e,r,n=2e3){if(t<e-n)throw new Gr(new Error(`timestamp ${new Date(t).toTimeString()} before 'notBefore' ${new Date(e).toTimeString()} with tolerance of ${n/1e3}s`),["invalid timestamp"]);if(t>r+n)throw new Gr(new Error(`timestamp ${new Date(t).toTimeString()} after 'notAfter' ${new Date(r).toTimeString()} with tolerance of ${n/1e3}s`),["invalid timestamp"])}function kf(t){return Array.isArray(t)?t.sort().map(kf):(e=t,"[object Object]"===Object.prototype.toString.call(e)?Object.keys(t).sort().reduce((function(e,r){return e[r]=kf(t[r]),e}),{}):t);var e}function Pf(t,e=!1){const r=t.match(/^(0x)?([\da-fA-F]+)$/);if(null==r)throw new Gr(new RangeError("input must be a hexadecimal string, e.g. '0x124fe3a' or '0214f1b2'"),["invalid format"]);const n=r[2].toLocaleLowerCase();return e?"0x"+n:n}async function xf(t,e){try{await xi(t,t.alg);const r=kf(t);return e?JSON.stringify(r):r}catch(t){throw new Gr(t,["invalid key"])}}async function Mf(t,e){const r=["SHA-256","SHA-384","SHA-512"];if(!r.includes(e))throw new Gr(new RangeError(`Valid hash algorith values are any of ${JSON.stringify(r)}`),["invalid algorithm"]);const n=new TextEncoder,i="string"==typeof t?n.encode(t).buffer:t;try{let t;return t=new Uint8Array(await crypto.subtle.digest(e,i)),t}catch(t){throw new Gr(t,["unexpected error"])}}async function If(t,n,i,o=0){let s=lo.from(0),a=lo.from(0);const h=Pf(r(e(i)),!0);let u=0;do{try{({secret:s,timestamp:a}=await t.registry(Pf(n,!0),h))}catch(t){throw new Gr(t,["cannot contact the ledger"])}s.isZero()&&(u++,await new Promise((t=>setTimeout(t,1e3))))}while(s.isZero()&&u<o);if(s.isZero())throw new Gr(new Error(`timeout of ${o}s exceeded when querying the ledger and secret still not published`),["secret not published"]);return{hex:Pf(s.toHexString(),!1),iat:a.toNumber()}}function Rf(t){return null!=t&&"object"==typeof t&&!Array.isArray(t)}function Nf(t){return Rf(t)||Array.isArray(t)?Array.isArray(t)?t.map((t=>Array.isArray(t)||Rf(t)?Nf(t):t)):Object.keys(t).sort().map((e=>[e,Nf(t[e])])):t}function Cf(t){return JSON.stringify(Nf(t))}async function Tf(e){return t(await Mf(Cf(e),"SHA-256"),!0,!1)}const Of=["SHA-256","SHA-384","SHA-512"],Bf=["ES256","ES384","ES512"],Ff=["A128GCM","A256GCM"];function Df(t){if(new Date(t).getTime()>0)return Number(t);throw new Gr(new Error("invalid timestamp"),["invalid timestamp"])}async function Uf(t){const e={...t},r=Object.keys(e);if(r.length<10||r.length>11)throw new Gr(new Error("Invalid agreeemt: "+JSON.stringify(t,void 0,2)),["invalid format"]);for(const n of r)switch(n){case"orig":case"dest":e[n]=await xf(JSON.parse(t[n]),!0);break;case"ledgerContractAddress":case"ledgerSignerAddress":e[n]=Pf(e[n],!0);break;case"pooToPorDelay":case"pooToPopDelay":case"pooToSecretDelay":e[n]=Df(e[n]);break;case"hashAlg":if(!Of.includes(e[n]))throw new Gr(new Error("Invalid hash algorithm"),["invalid algorithm"]);break;case"encAlg":if(!Ff.includes(e[n]))throw new Gr(new Error("Invalid hash algorithm"),["invalid algorithm"]);break;case"signingAlg":if(!Bf.includes(e[n]))throw new Gr(new Error("Invalid hash algorithm"),["invalid algorithm"]);break;case"schema":break;default:throw new Gr(new Error(`Property ${n} not allowed in dataAgreement`),["invalid format"])}return e}async function Lf(t,e){if(void 0===t.iss)throw new Error('Payload iss should be set to either "orig" or "dest"');const r=JSON.parse(t.exchange[t.iss]);await Ci(r,e);const n=await xi(e),i=e.alg,o={...t,iat:Math.floor(Date.now()/1e3)};return{jws:await new ki(o).setProtectedHeader({alg:i}).setIssuedAt(o.iat).sign(n),payload:o}}async function Hf(t,e,r){const n=JSON.parse(e.exchange[e.iss]),i=await Ri(t,n);if(void 0===i.payload.iss)throw new Error('Property "iss" missing');if(void 0===i.payload.iat)throw new Error("Property claim iat missing");if(void 0!==r){_f("iat"===r.timestamp?1e3*i.payload.iat:r.timestamp,"iat"===r.notBefore?1e3*i.payload.iat:r.notBefore,"iat"===r.notAfter?1e3*i.payload.iat:r.notAfter,r.tolerance)}const o=i.payload,s=o.exchange[o.iss];if(Cf(n)!==Cf(JSON.parse(s)))throw new Error(`The proof is issued by ${s} instead of ${JSON.stringify(n)}`);const a=e;for(const t in a){if(void 0===o[t])throw new Error(`Expected key '${t}' not found in proof`);if("exchange"===t){const t=e.exchange;zf(o.exchange,t)}else if(""!==a[t]&&Cf(a[t])!==Cf(o[t]))throw new Error(`Proof's ${t}: ${JSON.stringify(o[t],void 0,2)} does not meet provided value ${JSON.stringify(a[t],void 0,2)}`)}return i}function zf(t,e){const r=["id","orig","dest","hashAlg","cipherblockDgst","blockCommitment","blockCommitment","secretCommitment","schema"];for(const e of r)if("schema"!==e&&(void 0===t[e]||""===t[e]))throw new Error(`${e} is missing on dataExchange.\ndataExchange: ${JSON.stringify(t,void 0,2)}`);for(const r in e)if(""!==e[r]&&Cf(e[r])!==Cf(t[r]))throw new Error(`dataExchange's ${r}: ${JSON.stringify(t[r],void 0,2)} does not meet expected value ${JSON.stringify(e[r],void 0,2)}`)}async function jf(t,e){const{payload:r}=await Ri(t),n=r.exchange,i={...n};delete i.id;if(await Tf(i)!==n.id)throw new Gr(new Error("data exchange integrity failed"),["dataExchange integrity violated"]);const o=JSON.parse(n.dest),s=JSON.parse(n.orig);let a,h,u;try{a=(await Hf(r.poo,{iss:"orig",proofType:"PoO",exchange:n})).payload}catch(t){throw new Gr(t,["invalid poo"])}try{await Hf(t,{iss:"dest",proofType:"PoR",exchange:n},{timestamp:"iat",notBefore:1e3*a.iat,notAfter:1e3*a.iat+n.pooToPorDelay})}catch(t){throw new Gr(t,["invalid por"])}try{const t=await If(e,n.ledgerSignerAddress,n.id);h=t.hex,u=t.iat}catch(t){throw new Gr(t,["cannot verify"])}try{_f(1e3*u,1e3*r.iat,1e3*a.iat+n.pooToSecretDelay)}catch(t){throw new Gr(`Although the secret has been obtained (and you could try to decrypt the cipherblock), it's been published later than agreed: ${new Date(1e3*u).toUTCString()} > ${new Date(1e3*a.iat+n.pooToSecretDelay).toUTCString()}`,["secret not published in time"])}return{pooPayload:a,porPayload:r,secretHex:h,destPublicJwk:o,origPublicJwk:s}}async function Kf(t,e){let r,n,i,o,s;try{r=(await Ri(t)).payload}catch(t){throw new Gr(t,["invalid verification request"])}try{const t=await jf(r.por,e);n=t.destPublicJwk,i=t.origPublicJwk,o=t.pooPayload,s=t.porPayload}catch(t){throw new Gr(t,["invalid por","invalid verification request"])}try{await Ri(t,"dest"===r.iss?n:i)}catch(t){throw new Gr(t,["invalid verification request"])}return{pooPayload:o,porPayload:s,vrPayload:r,destPublicJwk:n,origPublicJwk:i}}async function Wf(e,r){const{payload:n}=await Ri(e),{destPublicJwk:i,origPublicJwk:o,secretHex:s,pooPayload:a,porPayload:h}=await jf(n.por,r);try{await Ri(e,i)}catch(t){throw t instanceof Gr&&t.add("invalid dispute request"),t}if(t(await Mf(n.cipherblock,h.exchange.hashAlg),!0,!1)!==h.exchange.cipherblockDgst)throw new Gr(new Error("cipherblock does not meet the committed (and already accepted) one"),["invalid dispute request"]);return await Ii(n.cipherblock,(await Ni(h.exchange.encAlg,s)).jwk),{pooPayload:a,porPayload:h,drPayload:n,destPublicJwk:i,origPublicJwk:o}}async function Jf(t,e,r,n){const i={proofType:"request",iss:t,dataExchangeId:e,por:r,type:"verificationRequest",iat:Math.floor(Date.now()/1e3)},o=await Qn(n);return await new ki(i).setProtectedHeader({alg:n.alg}).setIssuedAt(i.iat).sign(o)}var qf=Object.freeze({__proto__:null,checkCompleteness:Kf,checkDecryption:Wf,ConflictResolver:class{constructor(t,e){this.jwkPair=t,this.dltConfig={...Ti,...e},this.dltConfig.contract.address=Pf(this.dltConfig.contract.address,!0),this._dltSetup(),this.initialized=new Promise(((t,e)=>{this.init().then((()=>{t(!0)})).catch((t=>{e(t)}))}))}_dltSetup(){if(!this.dltConfig.disable){const t=new Sf(this.dltConfig.rpcProviderUrl);this.dltContract=new pu(this.dltConfig.contract.address,this.dltConfig.contract.abi,t)}}async init(){await Ci(this.jwkPair.publicJwk,this.jwkPair.privateJwk)}async resolveCompleteness(t){await this.initialized;const{payload:e}=await Ri(t);let r;try{r=(await Ri(e.por)).payload}catch(t){throw new Gr(t,["invalid por"])}const n={...await this._resolution(e.dataExchangeId,r.exchange[e.iss]),resolution:"not completed",type:"verification"};try{await Kf(t,this.dltContract),n.resolution="completed"}catch(t){if(!(t instanceof Gr)||t.nrErrors.includes("invalid verification request")||t.nrErrors.includes("unexpected error"))throw t}const i=await Qn(this.jwkPair.privateJwk);return await new ki(n).setProtectedHeader({alg:this.jwkPair.privateJwk.alg}).setIssuedAt(n.iat).sign(i)}async resolveDispute(t){await this.initialized;const{payload:e}=await Ri(t);let r;try{r=(await Ri(e.por)).payload}catch(t){throw new Gr(t,["invalid por"])}const n={...await this._resolution(e.dataExchangeId,r.exchange[e.iss]),resolution:"denied",type:"dispute"};try{await Wf(t,this.dltContract)}catch(t){if(!(t instanceof Gr&&t.nrErrors.includes("decryption failed")))throw new Gr(t,["cannot verify"]);n.resolution="accepted"}const i=await Qn(this.jwkPair.privateJwk);return await new ki(n).setProtectedHeader({alg:this.jwkPair.privateJwk.alg}).setIssuedAt(n.iat).sign(i)}async _resolution(t,e){return{proofType:"resolution",dataExchangeId:t,iat:Math.floor(Date.now()/1e3),iss:await xf(this.jwkPair.publicJwk,!0),sub:e}}},generateVerificationRequest:Jf,verifyPor:jf,verifyResolution:async function(t,e){return await Ri(t,e??((t,e)=>JSON.parse(e.iss)))}});class Gf{constructor(t,e){const r="string"==typeof e?new Uint8Array(n(e)):e,i=new Fh(r);this.signer=new gc(i,t)}async deployTransaction(t){t.nonce=await this.signer.provider.getTransactionCount(await this.getId()),t.gasPrice=await this.signer.provider.getGasPrice(),t.chainId=(await this.signer.provider.getNetwork()).chainId;const e=await this.signer.signTransaction(t);return(await this.signer.provider.sendTransaction(e)).hash}async getId(){return await this.signer.getAddress()}}class Vf{async deployTransaction(t){throw new Error("not implemented")}async getId(){throw new Error("not implemented")}}var $f=Object.freeze({__proto__:null,EthersSigner:Gf,I3mWalletSigner:class extends Vf{constructor(t,e,r){super(),this.provider=t,this.session=e,this.did=r}async deployTransaction(t){t.nonce=await this.provider.getTransactionCount(await this.getId()),t.gasLimit=to(t.gasLimit),t.gasPrice=to(await this.provider.getGasPrice()),t.chainId=(await this.provider.getNetwork()).chainId;const e=await this.getId();t.from=Pf(e,!0);const r=await this.session.send({url:`/identities/${this.did}/sign`,init:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"Transaction",data:t})}}),n=JSON.parse(r.body).signature;return(await this.provider.sendTransaction(n)).hash}async getId(){const t=await this.session.send({url:`/identities/${this.did}/info`,init:{method:"GET"}});return JSON.parse(t.body).addresses[0]}},DltSigner:Vf});var Xf=Object.freeze({__proto__:null,NonRepudiationDest:class{constructor(t,e,r){this.jwkPairDest={privateJwk:e,publicJwk:JSON.parse(t.dest)},this.publicJwkOrig=JSON.parse(t.orig),this.block={},this.dltConfig={...Ti,...r},this.initialized=new Promise(((e,r)=>{this.init(t).then((()=>{e(!0)})).catch((t=>{r(t)}))}))}_dltSetup(){if(!this.dltConfig.disable){const t=new Sf(this.dltConfig.rpcProviderUrl);if(Pf(this.agreement.ledgerContractAddress)!==Pf(this.dltConfig.contract.address))throw new Error(`Contract address ${this.dltConfig.contract.address} does not meet agreed one ${this.agreement.ledgerContractAddress}`);this.dltContract=new pu(this.agreement.ledgerContractAddress,this.dltConfig.contract.abi,t)}}async init(t){this.agreement=await Uf(t),this._dltSetup(),await Ci(this.jwkPairDest.publicJwk,this.jwkPairDest.privateJwk)}async verifyPoO(e,r,n){await this.initialized;const i=t(await Mf(r,this.agreement.hashAlg),!0,!1),{payload:o}=await Ri(e),s={...this.agreement,cipherblockDgst:i,blockCommitment:o.exchange.blockCommitment,secretCommitment:o.exchange.secretCommitment},a={proofType:"PoO",iss:"orig",exchange:{...s,id:await Tf(s)}},h={timestamp:Date.now(),notBefore:"iat",notAfter:"iat",...n},u=await Hf(e,a,h);return this.block={jwe:r,poo:{jws:e,payload:u.payload}},this.exchange=u.payload.exchange,u}async generatePoR(){if(await this.initialized,void 0===this.exchange||void 0===this.block.poo)throw new Error("Before computing a PoR, you have first to receive a valid cipherblock with a PoO and validate the PoO");const t={proofType:"PoR",iss:"dest",exchange:this.exchange,poo:this.block.poo.jws};return this.block.por=await Lf(t,this.jwkPairDest.privateJwk),this.block.por}async verifyPoP(t,n){if(await this.initialized,void 0===this.exchange||void 0===this.block.por||void 0===this.block.poo)throw new Error("Cannot verify a PoP if not even a PoR have been created");const i={proofType:"PoP",iss:"orig",exchange:this.exchange,por:this.block.por.jws,secret:"",verificationCode:""},o={timestamp:Date.now(),notBefore:"iat",notAfter:1e3*this.block.poo.payload.iat+this.exchange.pooToPopDelay,...n},s=await Hf(t,i,o),a=JSON.parse(s.payload.secret);return this.block.secret={hex:r(e(a.k)),jwk:a},this.block.pop={jws:t,payload:s.payload},s}async getSecretFromLedger(){if(await this.initialized,void 0===this.exchange||void 0===this.block.poo||void 0===this.block.por)throw new Error("Cannot get secret if a PoR has not been sent before");const t=Date.now(),e=1e3*this.block.poo.payload.iat+this.agreement.pooToSecretDelay,r=Math.round((e-t)/1e3),{hex:n,iat:i}=await If(this.dltContract,this.agreement.ledgerSignerAddress,this.exchange.id,r);this.block.secret=await Ni(this.exchange.encAlg,n);try{_f(1e3*i,1e3*this.block.por.payload.iat,1e3*this.block.poo.payload.iat+this.exchange.pooToSecretDelay)}catch(t){throw new Gr(`Although the secret has been obtained (and you could try to decrypt the cipherblock), it's been published later than agreed: ${new Date(1e3*i).toUTCString()} > ${new Date(1e3*this.block.poo.payload.iat+this.agreement.pooToSecretDelay).toUTCString()}`,["secret not published in time"])}return this.block.secret}async decrypt(){if(await this.initialized,void 0===this.exchange)throw new Error("No agreed exchange");if(void 0===this.block.secret?.jwk)throw new Error("Cannot decrypt without the secret");if(void 0===this.block.jwe)throw new Error("No cipherblock to decrypt");const e=(await Ii(this.block.jwe,this.block.secret.jwk)).plaintext;if(t(await Mf(e,this.agreement.hashAlg),!0,!1)!==this.exchange.blockCommitment)throw new Error("Decrypted block does not meet the committed one");return this.block.raw=e,e}async generateVerificationRequest(){if(await this.initialized,void 0===this.block.por||void 0===this.exchange)throw new Error("Before generating a VerificationRequest, you have first to hold a valid PoR for the exchange");return await Jf("dest",this.exchange.id,this.block.por.jws,this.jwkPairDest.privateJwk)}async generateDisputeRequest(){if(await this.initialized,void 0===this.block.por||void 0===this.block.jwe||void 0===this.exchange)throw new Error("Before generating a VerificationRequest, you have first to hold a valid PoR for the exchange and have received the cipherblock");const t={proofType:"request",iss:"dest",por:this.block.por.jws,type:"disputeRequest",cipherblock:this.block.jwe,iat:Math.floor(Date.now()/1e3),dataExchangeId:this.exchange.id},e=await xi(this.jwkPairDest.privateJwk);try{return await new ki(t).setProtectedHeader({alg:this.jwkPairDest.privateJwk.alg}).setIssuedAt(t.iat).sign(e)}catch(t){throw new Gr(t,["unexpected error"])}}},NonRepudiationOrig:class{constructor(t,e,r,n,i){this.jwkPairOrig={privateJwk:e,publicJwk:JSON.parse(t.orig)},this.publicJwkDest=JSON.parse(t.dest),this.block={raw:r},this.dltConfig={...Ti,...n},this.initialized=new Promise(((e,r)=>{this.init(t,i).then((()=>{e(!0)})).catch((t=>{r(t)}))}))}async init(e,r){this.agreement=await Uf(e),await Ci(this.jwkPairOrig.publicJwk,this.jwkPairOrig.privateJwk);const i=await Ni(this.agreement.encAlg);this.block={...this.block,secret:i,jwe:await Mi(this.block.raw,i.jwk,this.agreement.encAlg)};const o=t(await Mf(this.block.jwe,this.agreement.hashAlg),!0,!1),s=t(await Mf(this.block.raw,this.agreement.hashAlg),!0,!1),a=t(await Mf(new Uint8Array(n(this.block.secret.hex)),this.agreement.hashAlg),!0,!1),h={...this.agreement,cipherblockDgst:o,blockCommitment:s,secretCommitment:a},u=await Tf(h);this.exchange={...h,id:u},await this._dltSetup(r)}async _dltSetup(t){if(!this.dltConfig.disable){const e=new Sf(this.dltConfig.rpcProviderUrl);if(void 0===this.jwkPairOrig.privateJwk.d)throw new Error("INVALID SIGNING ALGORITHM: No d property found on private key");if(void 0!==t&&(this.dltConfig.signer=new Gf(e,t)),void 0===this.dltConfig.signer)throw new Error("Either a dltConfig.signer or a privateLedgerKeyHex MUST be provided.");const r=Pf(await this.dltConfig.signer.getId(),!0);if(r!==this.exchange.ledgerSignerAddress)throw new Error(`ledgerSignerAddress: ${this.exchange.ledgerSignerAddress} does not meet the address ${r} derived from the provided private key`);if(Pf(this.agreement.ledgerContractAddress)!==Pf(this.dltConfig.contract.address))throw new Error(`Contract address ${this.dltConfig.contract.address} does not meet agreed one ${this.agreement.ledgerContractAddress}`);this.dltContract=new pu(this.agreement.ledgerContractAddress,this.dltConfig.contract.abi,e)}}async generatePoO(){return await this.initialized,this.block.poo=await Lf({proofType:"PoO",iss:"orig",exchange:this.exchange},this.jwkPairOrig.privateJwk),this.block.poo}async verifyPoR(t,e){if(await this.initialized,void 0===this.block.poo)throw new Error("Cannot verify a PoR if not even a PoO have been created");const r={proofType:"PoR",iss:"dest",exchange:this.exchange,poo:this.block.poo.jws},n=1e3*this.block.poo.payload.iat,i={timestamp:Date.now(),notBefore:n,notAfter:n+this.exchange.pooToPorDelay,...e},o=await Hf(t,r,i);return this.block.por={jws:t,payload:o.payload},this.block.por}async generatePoP(){if(await this.initialized,void 0===this.block.por)throw new Error("Before computing a PoP, you have first to have received and verified the PoR");let t="verificationCode";if(!this.dltConfig.disable){const n=lo.from(`0x${this.block.secret.hex}`),i=Pf(r(e(this.exchange.id)),!0),o=await this.dltContract.populateTransaction.setRegistry(i,n,{gasLimit:this.dltConfig.gasLimit});t=await this.dltConfig.signer.deployTransaction(o)}const n={proofType:"PoP",iss:"orig",exchange:this.exchange,por:this.block.por.jws,secret:JSON.stringify(this.block.secret.jwk),verificationCode:t};return this.block.pop=await Lf(n,this.jwkPairOrig.privateJwk),this.block.pop}async generateVerificationRequest(){if(await this.initialized,void 0===this.block.por)throw new Error("Before generating a VerificationRequest, you have first to hold a valid PoR for the exchange");return await Jf("orig",this.exchange.id,this.block.por.jws,this.jwkPairOrig.privateJwk)}}});export{qf as ConflictResolution,Ff as ENC_ALGS,Of as HASH_ALGS,Xf as NonRepudiationProtocol,Gr as NrError,Bf as SIGNING_ALGS,$f as Signers,_f as checkTimestamp,Lf as createProof,Ti as defaultDltConfig,Tf as exchangeId,Vr as generateKeys,If as getSecretFromLedger,xi as importJwk,kf as jsonSort,Ii as jweDecrypt,Mi as jweEncrypt,Ri as jwsDecode,Ni as oneTimeSecret,Uf as parseAgreement,Pf as parseHex,xf as parseJwk,Mf as sha,Ci as verifyKeyPair,Hf as verifyProof};
